"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="0d4bddb6-9b7d-5bb4-bc58-69e3e2c958e6")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[3416],{169444:(e,t,n)=>{n.d(t,{f:()=>E});var o=n(848318),a=n(781239),r=n(454805),l=n(156974),i=n(720522),c=n(511067),s=n(335744),d=n(345900),p=n(749211),m=n(182671),u=n(549307),_=n(954184);function E({resolvedTypes:e,recordingKey:t}){let{showing:n,toggle:l,hide:p}=(0,c.BK)("expression-builder-create-variable"),m=o.useRef(null),E=a.rf(a.Pt(t,"createVariableDropdown"),"click",o.useCallback(()=>{1===e.length?f(e[0]):l()},[e,l])),[y,h]=o.useState(!1),v=o.useRef(null),f=e=>{let t=m.current?.getBoundingClientRect();t&&(v.current={initialPosition:new r.Mi(t.left,t.top),resolvedType:e},h(!0))},I=()=>{h(!1)};return o.createElement(o.Fragment,null,o.createElement("button",{ref:m,className:u.ZS,onClick:E},o.createElement(i.B,{svg:_.A})),y&&(y&&v.current?o.createElement(d.U,{initialPosition:v.current.initialPosition,initialWidth:d.i,resolvedType:v.current.resolvedType,onCreateVariable:I,onClose:I}):null),n&&m.current&&o.createElement(s.Cf,{arrowOffsetFromRectLeft:14,leanPadding:0,lean:"right",targetRect:m.current.getBoundingClientRect()},e.map(e=>o.createElement(g,{key:e,resolvedType:e,onClose:p,showCreationModal:f,recordingKey:t}))))}function g({resolvedType:e,onClose:t,showCreationModal:n,recordingKey:r}){let i=(0,m.F)(e),c=a.rf(a.Pt(r,"createVariableOption",i.name),"click",o.useCallback(()=>{n(e),t()},[t,e,n]));return o.createElement(l.c$,{className:u.Fs,onClick:c},o.createElement(p.i,{type:e,showTooltip:!1}),i.name)}},569366:(e,t,n)=>{let o;n.d(t,{E:()=>oT});var a=n(848318),r=n(301168),l=n(658029),i=n(593189),c=n(92778),s=n(315696),d=n(186606),p=n(320953),m=n(553547),u=n(19180),_=n(382902),E=n(536384),g=n.n(E),y=n(410441),h=n(156845),v=n(238462),f=n(781239),I=n(998568),N=n(454805),T=n(755534),b=n(401970),A=n(967688),P=n(142896),S=n(696786),C=n(303397),O=n(379267),x=n(489082),w=n(601167),D=n(355755),k=n(730143),R=n(313405),M=n(434289),L=n(17753),U=n(764872),K=n(696816),V=n(989232),B=n(315933),F=n(63163),G=n(425155),z=n(290267),W=n(925085),Y=n(614892),H=n(720522),j=n(297638),$=n(244052),J=n(420906);let X=(0,$.ex)("prototype_action_info",function(){return a.createElement("div",{className:j.s.flex.itemsCenter.justifyCenter.$},a.createElement(H.B,{className:"prototype_action_info_tooltip--prototypeDestinationInfoIcon--GeQWS",svg:J.A}),a.createElement("span",{className:j.s.flexGrow1.m6.$,style:{maxWidth:144}},(0,A.tx)("proto.prototype_panel.use_the_circular_node_to_connect_the_selected_object_to_another_frame_tooltip")))},()=>({unconstrainWidth:!0}));var q=n(209951),Z=n(596224),Q=n(749214);let ee=(0,a.memo)(function(e){return(0,Q.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,Q.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.5 6a.5.5 0 0 1 .5.5V11a1 1 0 0 0 1 1h4.5a.5.5 0 0 1 0 1H13a2 2 0 0 1-2-2V6.5a.5.5 0 0 1 .5-.5",clipRule:"evenodd"})})});var et=n(302941),en=n(754210),eo=n(511067),ea=n(23207),er=n(544405),el=n(952647);n(82433);var ei=n(227276),ec=n(246411),es=n(499025);function ed({formatter:e,value:t,disabled:n}){return a.createElement(ea.c$,{value:t,disabled:n},a.createElement("div",{className:"x78zum5 x6s0dn4 x167g77z"},a.createElement("div",{className:"x78zum5 x6s0dn4 x1kky2od xlup9mm"},a.createElement(el.J,{mode:"dark"},"MIXED"===t?a.createElement("div",{className:"x1kky2od xlup9mm"}):a.createElement(ep,{action:t}))),a.createElement("div",null,"MIXED"===t?(0,A.tx)("fullscreen.mixed"):e.format(t))))}function ep({action:e}){return a.createElement("div",{className:"prototype_action_dropdown--prototypeActionIcon--qChhY"},a.createElement(b.U,{svg:(0,ec.Yb)(e)},(0,ec.av)(e)))}function em(e){let t=`prototype-action-select-${e.recordingKey}`,n=e.dropdownShown&&e.dropdownShown.type===t,o=(0,x.E7)(e.action),l=(0,ec.Yb)(o),i=(0,ec.av)(o),c=(0,S.GS)(),s=(0,r.d4)(es.ZM),p=new en.js(c,s),m=new en.Z6(c,s),_=!(0,r.d4)(e=>e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0),E=a.createElement(b.U,{svg:l},i);return a.createElement("div",{id:t},a.createElement(ea.bL,{onChange:e.onChange,value:e.action,recordingKey:f.Pt(e,"select")},a.createElement(ea.l9,{"data-testid":"action-select",disabled:_,iconLead:a.createElement("div",{className:"x180r7m8"},E),label:a.createElement(er.h,null,(0,A.tx)("proto.action")),width:"fill"},(0,x.gl)(e.action)?(0,A.t)("fullscreen.mixed"):null),a.createElement(ea.mc,null,function(e,t){let n=(0,Z.cJ)(),o=(0,S.GS)(),r=a.createElement(ed,{formatter:t,key:"NONE",value:"NONE",disabled:!1}),l=a.createElement(ed,{formatter:t,key:"NAVIGATE_TO",value:"NAVIGATE_TO",disabled:!1}),i=a.createElement(ed,{formatter:t,key:"SWAP_STATE_TO",value:"SWAP_STATE_TO",disabled:!d.glU.isSelectionContainedInStateOrStateInstance()}),c=a.createElement(ed,{formatter:t,key:"GO_BACK",value:"GO_BACK",disabled:!1}),s=a.createElement(ed,{formatter:t,key:"SCROLL_TO",value:"SCROLL_TO",disabled:!1}),p=a.createElement(ed,{formatter:t,key:"OPEN_URL",value:"OPEN_URL",disabled:!1}),m=a.createElement(ed,{formatter:t,key:"OPEN_OVERLAY",value:"OPEN_OVERLAY",disabled:!1}),_=a.createElement(ed,{formatter:t,key:"SWAP_WITH",value:"SWAP_WITH",disabled:!1}),E=a.createElement(ed,{formatter:t,key:"CLOSE_OVERLAY",value:"CLOSE_OVERLAY",disabled:!1}),g=a.createElement(ed,{formatter:t,key:"SET_VARIABLE",value:"SET_VARIABLE",disabled:!1}),y=(0,u.k)().prototype_set_mode_action&&a.createElement(ed,{formatter:t,key:"SET_VARIABLE_MODE",value:"SET_VARIABLE_MODE",disabled:!1}),h=!e.isNestedInConditional&&a.createElement(ed,{formatter:t,key:"CONDITIONAL",value:"CONDITIONAL",disabled:!1}),v=a.createElement(ea.wv,{key:"first-divider"}),f=a.createElement(ea.wv,{key:"second-divider"}),I=a.createElement(ea.wv,{key:"third-divider"}),{getConfig:N}=(0,ei.I7)("exp_prototyping_reorder_actions"),T=!!N().getValue("new_ordering",!1),b=n?[i,c,s,v,g,h]:o?T?[r,v,l,i,c,s,p,f,g,y,h,I,m,_,E]:[r,v,l,i,c,s,p,f,m,_,E,I,g,y,h]:[r,v,l,i,c,f,g,y,h,s,p,I,m,_,E];if(e.showVideoActions&&!n){let e=[a.createElement(ea.wv,{key:"fourth-divider"}),a.createElement(ed,{formatter:t,key:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",value:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",disabled:!1}),a.createElement(ed,{formatter:t,key:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",value:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",disabled:!1}),a.createElement(ed,{formatter:t,key:"UPDATE_MEDIA_SKIP_TO",value:"UPDATE_MEDIA_SKIP_TO",disabled:!1}),a.createElement(ed,{formatter:t,key:"UPDATE_MEDIA_SKIP_BY_OPTIONS",value:"UPDATE_MEDIA_SKIP_BY_OPTIONS",disabled:!1})];b=b.concat(e)}return(0,x.gl)(e.action)&&(b=[a.createElement(ed,{formatter:t,key:"MIXED",value:"MIXED",disabled:!0}),a.createElement(ea.wv,{key:"mixed-divider"})].concat(b)),b.filter(Boolean)}(e,n?p:m))))}var eu=n(660376),e_=n(773511),eE=n(833420),eg=n(788903),ey=n(578386),eh=n(60519),ev=n(346288),ef=n(96526),eI=n(934363);let eN="prototype_action_verbose_title--actionNameInsertion--aF4kI",eT="prototype_action_verbose_title--actionName--qWJL3",eb="prototype_action_verbose_title--actionNameUI3--JAYsG",eA=()=>{let e=(0,r.d4)(e=>e.mirror.sceneGraph);return a.useMemo(()=>new en.cP(e),[e])};function eP({action:e,isNestedInConditional:t,isNarrowPanel:n,onClick:o}){let r=(0,G.YT)()===G.Oz.TWO_COL,l=a.useContext(eh.c),i=r&&l===eh.P.LEFT,c=t||n,s=(0,eg.u)((0,x.hS)(e.targetVariable)&&e.targetVariable&&"id"in e.targetVariable?e.targetVariable?.id:void 0),p=(0,x.hS)(e.targetVariable)&&e.targetVariable&&"nodeFieldAlias"in e.targetVariable?(0,ey.aA)(e.targetVariable.nodeFieldAlias.stablePathToNode,e.targetVariable.nodeFieldAlias.indexOrKey):void 0,u=s?.name??p?.name,_=eA(),E=new en.Z6((0,S.GS)()),y=(0,en._X)(e),h=(0,x.E7)(y),f=a.createElement(b.U,{svg:(0,ec.Yb)(h)},(0,ec.av)(h)),I=e=>{if(!e.connectionType||(0,x.gl)(e.connectionType))return null;let t=g()({[eT]:!0,[eb]:r}),n=g()({"prototype_action_verbose_title--actionDestination--JZ-gU":!0,"prototype_action_verbose_title--actionDestinationUI3--ZGxbq":r});switch(e.connectionType){case"NONE":case"SET_VARIABLE_MODE":case"OBJECT_ANIMATION":return null;case"INTERNAL_NODE":case"BACK":case"CLOSE":case"UPDATE_MEDIA_RUNTIME":{let o=e.transitionNodeID;if((0,x.gl)(o))return a.createElement("div",{className:t},(0,A.t)("proto.variant_actions.mixed"));if(void 0===o||m.aI(o,m.Hr))return null;let r=m.dI(o),l=_.format(r);return a.createElement("div",{className:n},l)}case"URL":{let o=e.connectionURL;if(!o)return null;if((0,x.gl)(o))return a.createElement("div",{className:t},(0,A.t)("proto.variant_actions.mixed"));return a.createElement("div",{className:n},o)}case"SET_VARIABLE":if(!e.targetVariableData||(0,x.gl)(e.targetVariableData))return null;return a.createElement("div",{className:"prototype_action_verbose_title--setVariablePreviewContainer--6omxy"},a.createElement(K.y3,{targetVariableData:e.targetVariableData,onClick:v.lQ,showVariableThumbnails:!1,isNarrowPanel:c,isInConditional:!0}));case"CONDITIONAL":{if((0,x.gl)(e)||(0,x.gl)(e.conditionalActions)||!e.conditionalActions)return null;let t=e.conditionalActions.length>0?e.conditionalActions[0].condition:void 0;return a.createElement(K.y3,{targetVariableData:t,onClick:v.lQ,isInConditional:!0,showVariableThumbnails:!1})}default:(0,eu.xb)(e.connectionType)}},N=g()({[j.s.block.bgTransparent.$]:!0,"prototype_action_verbose_title--buttonResetTextAlign--gy69p":!0,[eI.Li]:c&&!r,[eI.O8]:!c&&!r,[eI.kE]:r}),T=g()({"prototype_action_verbose_title--iconContainer--jqarD":!0,"prototype_action_verbose_title--iconContainerUI3--yBP0-":r});return a.createElement(e_.E,{className:N,onClick:o},a.createElement(eE.Y1,{horizontalAlignItems:"space-between",width:"fill-parent"},a.createElement("div",{className:T},f),(e=>{let t=h?E.format(h):"Undefined",n=g()({[eT]:!0,[eb]:r});if(((0,x.gl)(e.connectionType)||(0,x.gl)(y))&&(t=(0,A.t)("fullscreen.mixed")),!e.connectionType||(0,x.gl)(e.connectionType)||"NONE"===e.connectionType||"BACK"===e.connectionType||"CLOSE"===e.connectionType)return a.createElement(a.Fragment,null,a.createElement("div",{className:n},t));var o=I(e);switch(e.connectionType){case"INTERNAL_NODE":if("SWAP_STATE"===e.navigationType)return a.createElement(a.Fragment,null,a.createElement("div",{className:n},(0,A.t)("proto.action_change_to")),o);if(o){if("OVERLAY"===e.navigationType)return a.createElement(a.Fragment,null,a.createElement("div",{className:eN},(0,A.tx)("proto.action_overlay_title",{overlayFrameName:a.createElement("span",null,o)})));if("SWAP"===e.navigationType)return a.createElement(a.Fragment,null,a.createElement("div",{className:n},(0,A.t)("proto.action_swap_overlay_title")),o)}return a.createElement(a.Fragment,null,a.createElement("div",{className:n},t),o);case"UPDATE_MEDIA_RUNTIME":return a.createElement(a.Fragment,null,a.createElement("div",{className:n},t),o);case"URL":return a.createElement(a.Fragment,null,a.createElement("div",{className:n},o?(0,A.t)("proto.action_url_title"):(0,A.t)("proto.action_open_link")),o);case"SET_VARIABLE":{let l=e.targetVariableData&&(0,x.hS)(e.targetVariableData)&&e.targetVariableData.resolvedType===d.rXF.COLOR,c=g()({"prototype_action_verbose_title--actionNameInsertionColor--isir- prototype_action_verbose_title--actionNameInsertion--aF4kI":!0,"prototype_action_verbose_title--actionNameInsertionColorUI3--Apj0i":r});if(u&&o)return a.createElement(a.Fragment,null,a.createElement("div",{className:l?c:eN},(0,A.tx)("proto.action_set_variable_title",{variableName:a.createElement("span",{className:"prototype_action_verbose_title--variableNameContainer--XeJX2"},a.createElement(ef.wG,{text:u,isDeleted:!!s&&(0,ev.eF)(s),disableHover:i})),variableValue:a.createElement("span",{className:"prototype_action_verbose_title--variableDestinationContainer--RXbKo prototype_action_verbose_title--variableNameContainer--XeJX2"},o)})));return a.createElement(a.Fragment,null,a.createElement("div",{className:n},t))}case"SET_VARIABLE_MODE":return a.createElement(a.Fragment,null,a.createElement("div",{className:n},(0,A.t)("proto.action_set_variable_mode")));case"CONDITIONAL":return a.createElement(a.Fragment,null,a.createElement("div",{className:n},r?(0,A.t)("proto.if"):(0,A.t)("proto.action_conditional_title")),o);case"OBJECT_ANIMATION":return a.createElement(a.Fragment,null);default:(0,eu.xb)(e.connectionType)}})(e)))}var eS=n(672154),eC=n(673786),eO=n(181640),ex=n.n(eO),ew=n(223926),eD=n.n(ew),ek=n(563304),eR=n.n(ek),eM=n(626715),eL=n.n(eM),eU=n(810503),eK=n(822879),eV=n(525251),eB=n(120846),eF=n(985789),eG=n(245838);let ez="prototype_set_variable_mode_controls--dropdownRow--vl5z4",eW="missing",eY=eB.l6,eH=eB.c$,ej=eB.l6,e$=eB.c$,eJ={};function eX(){let e=(0,eg.h6)()||eJ,t=(0,eF.iR)(),n=a.useMemo(()=>{let n=eR()(t,(e,t)=>({collectionID:e.node_id,collectionName:e.name,modeOptions:e.modes?.map(t=>({modeId:{guid:t.id,collectionKey:e.key,extendedCollectionId:null},name:t.name,sortPosition:t.sortPosition,isCompatible:!0,collectionName:e.name}))||[],explicitMode:null,inheritMode:null,libraryKey:e.library_key}));return ex()({},e,n)},[t,e]),o=a.useMemo(()=>Object.entries(n).map(([e,t])=>({setKey:e,modeData:t,isLocal:void 0===t.libraryKey})),[n]),l=a.useMemo(()=>Object.values(o).filter(e=>e.modeData?.modeOptions&&e.modeData?.modeOptions.length>1),[o]),i=a.useMemo(()=>eL()(l.map(e=>e.modeData.libraryKey??eG.CC)),[l]),c=(0,eK.U)(i),[s,p]=a.useMemo(()=>{let{_local:e,_unknownFile:t,...n}=eD()(l,e=>e.isLocal?"_local":e.modeData.libraryKey&&c.data?.[e.modeData.libraryKey]===void 0?"_unknownFile":e.modeData.libraryKey),o=Object.entries(n).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>[{libraryKey:e,fileName:c.data?.[e]??""},...t]).flat(1);return t&&(o.push({libraryKey:eG.CC,fileName:(0,A.t)("variables.mode_properties_panel.used_variables.subheading")}),o.push(...t)),[e??[],o]},[c,l]),m=(0,eF.d2)(),u=a.useCallback(e=>{let t=m[(0,eC.yG)(e)],n=l.find(t=>t.setKey===e);if(n)return(e=>{if(e)return void 0===t&&(t=e.modeData.modeOptions[0].modeId.guid),e.modeData.modeOptions.find(e=>e.modeId.guid!==t&&(t=e.modeId.guid,!0))?.modeId.guid})(n)},[m,l]),_=l.length>0?l[0]:void 0,E=_?.setKey,g=_?.modeData.collectionID,y=a.useMemo(()=>E&&u(E),[E,u]),h=(0,r.wA)();return{localVariableSets:s,allVariableSets:l,firstVariableSet:_,firstVariableSetID:g,firstVariableSetMode:y,getDefaultNewModeForVariableCollectionKey:u,reportAnalyticsEventWhenSelected:e=>{let t=d.mSn.getVariableSetInfoForSetModeAnalytics(e);h((0,R.Zh)({name:"prototype.set_mode_select_variable_set",params:{...t}}))},subscribedVariableSetsWithSections:p}}function eq({targetVariableSetID:e,targetVariableModeID:t,deprecatedTargetVariableSetKey:n,updateSelectionProperties:o,recordingKey:r,actionIndexPath:l}){let{getDefaultNewModeForVariableCollectionKey:i,allVariableSets:c,reportAnalyticsEventWhenSelected:s}=eX(),{shouldShowAdvancedPrototypingPaywall:d,showAdvancedPrototypingVariablesModal:p}=(0,G.zt)(),m=(0,S.GS)();a.useEffect(()=>{if(!n||(0,x.gl)(n))return;let e=c.find(e=>e.setKey===n);e?((0,eU.Lo)("SetVariableModeControls","updating variable set key to non-deprecated id value"),o({targetVariableSetKey:void 0,targetVariableSetID:e?.modeData.collectionID})):((0,eU.Lo)("SetVariableModeControls","attempted to update variable set key to non-deprecated id value, but could not find it in the list of variable sets, will just clear out the bad data."),o({targetVariableSetKey:void 0}))},[n,c,o]);let[u,_]=a.useMemo(()=>{let t=(0,x.gl)(e)||void 0===e?e:function(e,t){let n=e.find(e=>e.modeData.collectionID===t);if(n)return n;let o=eS.gr.toRefIfSubscribed(t);if(o)return e.find(e=>e.setKey===o.key)}(c,e)||eW,n=(()=>{if(!(0,x.gl)(t)&&void 0!==t&&t!==eW)return t})();return[t,n]},[e,c]),E=a.useId(),g=a.createElement(e0,{ariaLabelledBy:E,selectedVariableSet:u,onChange:e=>{d?p():(s(e.modeData.collectionID),o({targetVariableSetID:e.modeData.collectionID,targetVariableModeID:i(e.setKey)}))},actionIndexPath:l}),y=m?a.createElement(eV.A,{input:g,label:(0,A.t)("proto.set_variable_mode.collection_label"),labelId:E}):a.createElement(Y.fI,{recordingKey:f.Pt(r,"selectTargetVariableSet")},g),h=a.useId(),v=a.createElement(e3,{ariaLabelledBy:h,selectedVariableSetKey:_&&_.setKey,selectedVariableModeID:t,onChange:e=>{d?p():o({targetVariableModeID:e})},actionIndexPath:l}),I=m?a.createElement(eV.A,{input:v,label:(0,A.t)("proto.set_variable_mode.mode_label"),labelId:h}):a.createElement(Y.fI,{recordingKey:f.Pt(r,"selectTargetVariableMode")},v);return a.createElement("div",{className:m?void 0:j.s.relative.$},y,_&&I)}let eZ={format:e=>void 0===e?(0,A.t)("proto.prototype_panel.edit_set_mode.none"):e===eW?(0,A.t)("proto.prototype_panel.edit_set_mode.missing_collection"):e.modeData.collectionName,isEqual:(e,t)=>void 0!==e&&void 0!==t&&e!==eW&&t!==eW&&(e.setKey===t.setKey||e.modeData.collectionID===t.modeData.collectionID)};function eQ(e,t){return"libraryKey"in e?[t&&a.createElement(eB.sK,{key:e.libraryKey+"divider"}),a.createElement(eH,{isHeader:!0,key:e.libraryKey+"header",formattedValue:e.fileName})]:a.createElement(eH,{key:e.setKey,value:e})}function e0({selectedVariableSet:e,onChange:t,actionIndexPath:n,ariaLabelledBy:o}){let l=(0,r.wA)(),i=(0,eo.Um)(),c="set-variable-mode--select-variable-set-"+n,{localVariableSets:s,allVariableSets:d,subscribedVariableSetsWithSections:p}=eX();return a.createElement(eY,{id:c,ariaLabelledBy:o,className:ez,property:e,formatter:eZ,dispatch:l,dropdownShown:i?.type===c?i:null,onChange:e=>{(0,x.gl)(e)||void 0===e||e===eW||t(e)}},d.length>0?[s.length>0&&a.createElement(eH,{key:f.Pt(c,"local_variables"),isHeader:!0,formattedValue:(0,A.t)("variables.mode_properties_panel.assets_created_in_file.subheading")}),...s.map(e=>eQ(e,!1)),...p.map((e,t)=>eQ(e,s.length>0||t>0))]:[])}let e1={format:e=>void 0===e?(0,A.t)("proto.prototype_panel.edit_set_mode.none"):e===eW?(0,A.t)("proto.prototype_panel.edit_set_mode.missing_mode"):e?.name??""};function e5(e){return a.createElement(e$,{key:e.modeId.guid,value:e})}function e3({selectedVariableSetKey:e,selectedVariableModeID:t,onChange:n,actionIndexPath:o,ariaLabelledBy:l}){let i=(0,r.wA)(),c=(0,eo.Um)(),s="set-variable-mode--select-variable-mode-"+o,{allVariableSets:d}=eX(),p=a.useMemo(()=>d.find(t=>t.setKey===e)?.modeData.modeOptions,[e,d]),m=a.useMemo(()=>(0,x.gl)(t)||void 0===t?t:p?.find(e=>e.modeId.guid===t)||eW,[t,p]);return a.createElement(ej,{"aria-labelledby":l,id:s,className:ez,property:m,formatter:e1,dispatch:i,dropdownShown:c?.type===s?c:null,onChange:e=>{!e||(0,x.gl)(e)||e===eW||n(e.modeId.guid)}},p&&p?.map(e5))}var e2=n(699848),e4=n(813009),e8=n(995218),e6=n(959219),e7=n(21614),e9=n(271020),te=n(632727),tt=n(273555),tn=n(52463),to=n(232958),ta=n(434328),tr=n(190561),tl=n(753644),ti=n(483157),tc=n(554326);function ts(e){a.useEffect(()=>{let t=d.Ez5?.prototypingEditorState().colorPickerEyedropperVarData;if(t)return(0,tc.lu)(t,{onChangeImmediate(){let n=t.getCopy();n&&e(n)}})},[e])}var td=n(875879),tp=n(847526),tm=n(27776),tu=n(881929),t_=n(468447),tE=n(869219);let tg=te.TI;function ty({children:e}){return(0,S.GS)()?a.createElement(tp.TN,null,e):a.createElement(Y.fI,{className:"overlay_panel--fplCheckboxRow--EYTAZ checkbox--_checkboxRow--oEhow"},e)}function th({interactionType:e,recordingKey:t,actionIndexPath:n,nodeId:o}){let[l,i]=a.useState(!1),[c,s]=a.useState(new N.Mi),u=(0,r.wA)(),_=(0,S.GS)(),E="{ "+n.join(", ")+" }",{destinationOverlayBackgroundColor:g,destinationOverlayBackgroundType:y,destinationOverlayPositionType:h,destinationOverlayBackgroundInteraction:v}=(0,e4.R)(e=>({destinationOverlayBackgroundColor:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[E]?.destinationOverlayBackgroundColor,destinationOverlayBackgroundType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[E]?.destinationOverlayBackgroundType,destinationOverlayPositionType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[E]?.destinationOverlayPositionType,destinationOverlayBackgroundInteraction:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[E]?.destinationOverlayBackgroundInteraction})),I=a.useRef(null),T=a.useRef(null),b=a.useCallback(()=>{i(!1)},[i]),P=a.useCallback(()=>{if(l)b();else{i(!0);let e=_?T.current:I.current;s((0,tn.cn)(e))}},[l,b,_]),C=a.useCallback(e=>{let t=e?"SOLID_COLOR":"NONE";p.l7.user("overlay-background-type-edit-scope",()=>{d.X3B.setOverlayBackgroundType(m.dI(o),t)}),u((0,R._P)({name:"Overlay background visible changed",params:{backgroundType:t}}))},[u,o]),O=a.useCallback(e=>{let t=e?"CLOSE_ON_CLICK_OUTSIDE":"NONE";p.l7.user("overlay-background-interaction-edit-scope",()=>{d.X3B.setOverlayBackgroundInteraction(m.dI(o),t)}),u((0,R._P)({name:"Overlay background interaction changed",params:{backgroundInteraction:t}}))},[u,o]),w=a.useCallback(()=>(0,x._W)(g,{r:0,g:0,b:0,a:.25}),[g]),D=a.useCallback((e,t)=>{t!==tt.zk.NO&&p.l7.user("overlay-background-color-edit-scope",()=>{d.X3B.setOverlayBackgroundColor(m.dI(o),e)})},[o]);ts(e=>{D(e.value,tt.zk.YES)});let k=a.useCallback((e,t)=>{D(e,tt.zk.YES)},[D]),M=a.useCallback((e,t)=>{let n=w();D({r:n.r,g:n.g,b:n.b,a:e},t)},[w,D]),L=a.useCallback(e=>{p.l7.user("overlay-position-type-edit-scope",()=>{d.X3B.setOverlayPositionType(m.dI(o),e)}),u((0,R._P)({name:"Overlay position changed",params:{position:e}}))},[u,o]),U=w(),K=w().a,V=(0,x.E7)(h),B="CLOSE_ON_CLICK_OUTSIDE"===(0,x.E7)(v),F="SOLID_COLOR"===(0,x.E7)(y),G=a.createElement("div",{className:"overlay_panel--colorValueContainer--gJtb9 paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},a.createElement(ta.J,{onClick:F?P:()=>{},color:U,opacity:K,recordingKey:f.Pt(t,"chit"),className:"overlay_panel--chit--Zn66r paint_panels--chit--twQEy"}),a.createElement(tl.AN,{className:_?"overlay_panel--colorInputUI3--ozOrK paint_panels--colorInput--nSz13":"overlay_panel--colorInput--6yyym paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:tg,property:U,disabled:!F,onChange:k,recordingKey:f.Pt(t,"colorInput"),noBorderOnFocus:!0}),a.createElement(to.Pd,{className:"overlay_panel--opacity--vrrjV paint_panels--opacityInputContainer--oqlsk",value:K,onValueChange:M,dispatch:u,disabled:!F,noBorderOnFocus:!0,recordingKey:f.Pt(t,"opacity")}));return a.createElement(Y.Zk,{className:_?"overlay_panel--overlayPanelUI3--GLqgD":"overlay_panel--overlayPanel--l-Hts"},!_&&a.createElement(Y.fI,null,a.createElement(ti.Q,{faded:!0,className:"overlay_panel--overlayPanelTitle--e9pjs"},(0,A.tx)("proto.overlay_settings"))),a.createElement(tA,{overlayPositionType:V,onOverlayPositionTypeChange:L,recordingKey:t}),!("ON_HOVER"===e||"ON_PRESS"===e)&&a.createElement(ty,null,a.createElement(e9.S,{label:a.createElement(er.J,null,(0,A.tx)("proto.close_when_clicking_outside")),recordingKey:f.Pt(t,"closeOnClickOutside"),onChange:O,checked:B})),a.createElement(ty,null,a.createElement(e9.S,{label:a.createElement(er.J,null,_?(0,A.tx)("proto.overlay_panel.background"):(0,A.tx)("proto.add_background")),recordingKey:f.Pt(t,"addBackgroundBehindOverlay"),onChange:C,checked:F})),F&&(_?a.createElement(eV.A,{ref:T,label:(0,A.t)("proto.overlay_panel.background"),input:G}):a.createElement(Y.fI,{ref:I}," ",G," ")),l&&a.createElement(tr.h,{disabledVariableIds:new Set,initialPosition:c,color:U,boundVariable:null,onChange:D,onClose:b,recordingKey:f.Pt(t,"colorPicker")}))}let tv=eB.l6,tf=eB.c$;class tI extends a.PureComponent{constructor(){super(...arguments),this.titleFormatter=new en.Cr,this.renderOverlayPositionOption=(e,t)=>a.createElement(tf,{key:t,value:e,recordingKey:f.Pt(this.props,e)})}render(){let e=["CENTER","TOP_LEFT","TOP_CENTER","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT"].map(this.renderOverlayPositionOption);return a.createElement(tv,{ariaLabelledBy:this.props.ariaLabelledBy,chevronClassName:"overlay_panel--chevron--7RTA-",className:this.props.className,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,dropdownWidth:tm.DxS,formatter:this.titleFormatter,id:this.props.recordingKey??"overlay-position_select",inputClassName:"overlay_panel--input--tGHHB",onChange:this.props.onChange,property:this.props.property,recordingKey:f.Pt(this.props,"select")},e,a.createElement(eB.sK,null),this.renderOverlayPositionOption("MANUAL",10))}}tI.displayName="OverlayPositionDropdown";class tN extends td.I{}class tT extends td.Y{}class tb extends a.PureComponent{render(){return a.createElement(tN,{className:this.props.className,property:this.props.property,onChange:this.props.onChange,recordingKey:this.props.recordingKey},a.createElement(tT,{value:"CENTER",tooltip:(0,A.t)("proto.tooltip_overlay_position_center"),svg:t_.A,recordingKey:f.Pt(this.props,"center")}),a.createElement(tT,{value:"TOP_LEFT",tooltip:(0,A.t)("proto.tooltip_overlay_position_top_left"),svg:tE.A,recordingKey:f.Pt(this.props,"top-left")}),a.createElement(tT,{value:"BOTTOM_CENTER",tooltip:(0,A.t)("proto.tooltip_overlay_position_bottom_center"),svg:tu.A,recordingKey:f.Pt(this.props,"bottom-center")}))}}function tA({overlayPositionType:e,onOverlayPositionTypeChange:t,recordingKey:n}){let o=(0,S.GS)(),l=(0,r.wA)(),i=(0,eo.Um)(),c=a.useId(),s=a.createElement(tI,{ariaLabelledBy:c,className:"overlay_panel--overlayPositionDropdown--ZxxSI",property:e,dispatch:l,dropdownShown:i,onChange:t,recordingKey:f.Pt(n,"overlayPositionDropdown")}),d=a.createElement(tb,{property:e,onChange:t,recordingKey:f.Pt(n,"overlayPositionControl"),className:"overlay_panel--overlayPositionControl--SWngJ"});return o?a.createElement(eV.A,{label:(0,A.t)("proto.overlay_panel.position"),labelId:c,input:s}):a.createElement(Y.fI,null,s,d)}var tP=n(732676),tS=n(910401),tC=n(672595);let tO="prototype_conditional_controls--conditionalRowUI3--rQlu6",tx="prototype_conditional_controls--conditionIcon--Npk57";var tw=n(609746),tD=n(969560),tk=n(764361);function tR({onDeleteAction:e,updateMultipleDestinationNodes:t,updateSelectionProperties:n,updateCondition:o,updateActions:r,onAddAction:l,autoOpenVariablePicker:i,isSelected:c,handleMouseDownUI3:s,...p}){let m=p.conditionalActions,u=m?.actions?m?.actions:[],_=m?.condition?m?.condition:void 0,E=(0,G.YT)()===G.Oz.TWO_COL,g=E?tO:"prototype_conditional_controls--conditionalRowIf--25FqB prototype_conditional_controls--conditionalRow--u0PaS",y=a.createElement(K.KN,{resolvedType:d.rXF.BOOLEAN,targetVariableData:_,updateSelectionProperties:n,recordingKey:p.recordingKey,updateConditionInConditionalAction:o,showVariableThumbnails:!0,isNarrowPanel:!0}),h=a.createElement("div",{className:"prototype_conditional_controls--addButton--vlYLn"},a.createElement(tC.t,{addButtonPressed:l,recordingKey:f.Pt(p.recordingKey,"addActionToIfButton"),renderButton:!0,isNestedInConditional:!0})),v=a.createElement(a.Fragment,null,E?a.createElement("span",{className:"prototype_conditional_controls--conditionIconUI3--zcwx0"},(0,A.tx)("proto.else")):a.createElement(H.B,{className:tx,svg:tw.A}),!E&&u.length>0&&a.createElement("div",{className:"prototype_conditional_controls--addButtonForElse--ogBWu prototype_conditional_controls--addButton--vlYLn"},a.createElement(tC.t,{addButtonPressed:l,recordingKey:f.Pt(p.recordingKey,"addActionToElseButton"),renderButton:!E,isNestedInConditional:!0}))),I=E?a.createElement(e_.E,{className:"prototype_conditional_controls--elseBlockRowUI3--VXjmO",onClick:s},v):a.createElement(Y.fI,{className:E?tO:"prototype_conditional_controls--conditionalRow--u0PaS"},v);return a.createElement(a.Fragment,null,p.ifStatement&&a.createElement("div",{className:g},!E&&a.createElement(W.Y,{direction:"horizontal",spacing:4},a.createElement("span",{className:E?"prototype_conditional_controls--conditionalRowConditionUI3--M2mOx":"prototype_conditional_controls--conditionalRowCondition--kn-f7"},a.createElement(W.Y,{direction:"horizontal",spacing:0},a.createElement(H.B,{className:tx,svg:tD.A}),a.createElement(W.Y,{direction:"horizontal",spacing:0},(0,x.hS)(_)&&y),a.createElement(H.B,{className:"prototype_conditional_controls--icon--JV1i0",svg:tk.default}))),!E&&u.length>0&&h)),!p.ifStatement&&I,u&&u.map((o,r)=>a.createElement(nY,{key:r,action:o,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],r],autoOpenVariablePicker:i,expandedRows:p.expandedRows,interactionType:p.interactionType,isNestedInConditional:!0,numActions:u.length,onAddAction:l,onDeleteAction:()=>e(r),onDrop:p.onDrop,onExpand:p.onExpand,onSelect:p.onSelect,recordingKey:f.Pt(p.recordingKey,"conditional-action-row",r),selectedActionIndex:p.selectedActionIndex,selectedInteractions:p.selectedInteractions,stateManagementVersion:p.stateManagementVersion,updateMultipleDestinationNodes:t.appendActionIndex(r),updateSelectionProperties:n.appendActionIndex(r)})),0===u.length&&a.createElement(nY,{key:0,action:p.emptyAction,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],0],autoOpenVariablePicker:i,expandedRows:p.expandedRows,interactionType:p.interactionType,isNestedInConditional:!0,numActions:u.length,onAddAction:l,onDeleteAction:()=>e(0),onDrop:p.onDrop,onExpand:p.onExpand,onSelect:p.onSelect,recordingKey:f.Pt(p.recordingKey,"conditional-action-row",0),selectedActionIndex:p.selectedActionIndex,selectedInteractions:p.selectedInteractions,stateManagementVersion:p.stateManagementVersion,updateMultipleDestinationNodes:t.appendActionIndex(0),updateSelectionProperties:n.appendActionIndex(0)}))}function tM(e,t,n){return function(o){var a=[...t];a.length>e?a[e].condition=o:a.push({condition:0===e?o:void 0,actions:[]},{condition:1===e?o:void 0,actions:[]}),n({conditionalActions:a})}}function tL({onDrop:e,onSelect:t,onExpand:n,action:o,updateMultipleDestinationNodes:l,updateSelectionProperties:i,interactionType:c,recordingKey:s,stateManagementVersion:d,selectedInteractions:p,actionIndexPath:m,selectedActionIndex:u,expandedRows:_,autoOpenVariablePicker:E,onNewActionAdded:g,handleMouseDownUI3:y}){let h=(0,r.wA)(),v=(0,D.p8)("currentPage"),I=(0,G.YT)()===G.Oz.TWO_COL,N=I?u.equals(m):void 0,{shouldShowAdvancedPrototypingPaywall:T,showAdvancedPrototypingConditionalActionsModal:b}=(0,G.zt)(),P=(0,x.hS)(o.conditionalActions)&&o.conditionalActions?o.conditionalActions:[],S=e=>function(t){var n=[...P];n.length>e?n[e].actions=[...t]:n.push({actions:t}),i({conditionalActions:n})},C=e=>function(t){var n=[...P],o=0;if(n.length>e){var a=n[e].actions;a?a.push(t):a=[t],o=a.length}else n.push({actions:0===e?[t]:[]},{actions:1===e?[t]:[]}),o=1;"SET_VARIABLE"===t.connectionType&&(E.current=!0),i({conditionalActions:n}),g&&g(new tS.Op([m[0],e,o-1])),h((0,R._P)({name:"Prototype add action",params:{action:t.connectionType?t.connectionType:"NONE",source:"panel",page_id:v,actionInConditionalAction:!0}}))},O=e=>function(t){if(T)b();else{var n=[...P];let o=P[e],a=[];if(o&&o.actions)for(let e=0;e<o.actions.length;e++){let n=o.actions[e];e!==t?a.push(n):h((0,R._P)({name:"Prototype delete action",params:{action:n.connectionType?n.connectionType:"NONE",source:"panel",page_id:v,actionInConditionalAction:!0}}))}n[e].actions=a,i({conditionalActions:n})}},w=P.length>0?P[0]:void 0,k=P.length>1?P[1]:void 0;return a.createElement("div",{style:I?{position:"relative"}:void 0},(0,x.gl)(o.conditionalActions)&&a.createElement(eE.Y1,null,a.createElement(e_.E,{className:"prototype_conditional_controls--mixedConditionalText--6O32b",onClick:()=>{var e=[];e.push({},{}),i({conditionalActions:e})}},(0,A.t)("fullscreen.properties_panel.click_to_replace_mixed_content"))),(0,x.hS)(o.conditionalActions)&&a.createElement(a.Fragment,null,a.createElement(tR,{key:0,actionIndexPath:[m[0],0],autoOpenVariablePicker:E,conditionalActions:w,emptyAction:{ifStatement:!0,action:o},expandedRows:_,handleMouseDownUI3:y,ifStatement:!0,interactionType:c,isSelected:N,onAddAction:C(0),onDeleteAction:O(0),onDrop:e,onExpand:n,onSelect:t,recordingKey:f.Pt(s,"conditional-block",0),selectedActionIndex:u,selectedInteractions:p,stateManagementVersion:d,updateActions:S(0),updateCondition:tM(0,P,i),updateMultipleDestinationNodes:l.appendActionIndex(0),updateSelectionProperties:i.appendActionIndex(0)}),a.createElement(tR,{key:1,actionIndexPath:[m[0],1],autoOpenVariablePicker:E,conditionalActions:k,emptyAction:{ifStatement:!1,action:o},expandedRows:_,handleMouseDownUI3:y,ifStatement:!1,interactionType:c,isSelected:N,onAddAction:C(1),onDeleteAction:O(1),onDrop:e,onExpand:n,onSelect:t,recordingKey:f.Pt(s,"conditional-block",1),selectedActionIndex:u,selectedInteractions:p,stateManagementVersion:d,updateActions:S(1),updateCondition:tM(1,P,i),updateMultipleDestinationNodes:l.appendActionIndex(1),updateSelectionProperties:i.appendActionIndex(1)})))}function tU({updateSelectionProperties:e,conditionalActions:t,autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:o,...r}){let l=t.length>0?t[0]:void 0,i=l?.condition?l?.condition:void 0,c=g()({"prototype_conditional_controls--standaloneIfConditional--GLFDU":!0,"prototype_conditional_controls--placeholderText--esG0u":!i});return a.createElement(a.Fragment,null,a.createElement(eV.A,{input:null,label:(0,A.t)("proto.condition")}),a.createElement(e2.Ad,{appendedClassName:"prototype_conditional_controls--conditionalActionRightPadding--xpK6Z",label:null,input:(0,x.hS)(i)?a.createElement("div",{className:c},a.createElement(K.KN,{resolvedType:d.rXF.BOOLEAN,targetVariableData:i,updateSelectionProperties:e.appendActionIndex(0),recordingKey:r.recordingKey,updateConditionInConditionalAction:tM(0,t,e),autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:o,showVariableThumbnails:!0,isNarrowPanel:!0})):null}))}var tK=n(195124),tV=n(540698),tB=n(640483);class tF{constructor(e,t){this.nodeFormatter=e,this.scene=t,this.format=e=>{let t=this.nodeFormatter.format(e);if(this.scene&&e!==m.AD&&null!=e){let n=this.scene.get(e);if(n?.isResponsiveSet)return"/"===t?(0,A.t)("sites.panel.home"):t}return t}}}var tG=n(702038),tz=n(700436),tW=n(184226),tY=n(488307),tH=n(739321);let tj=eB.c$,t$=eB.l6;function tJ(e){let t=a.useMemo(()=>new en.cP(e.scene),[e.scene]),[n,o]=a.useState([]),[r,l]=a.useState([]),i=(0,Z.cJ)(),c=e.nodeId===x.oV?x.oV:m.dI(e.nodeId),s=n;(0,x.hS)(c)&&c!==m.AD&&-1===s.indexOf(c)&&(s=s.concat([c]));let p=`prototype-destination-select-${e.recordingKey}`,u="SCROLL_TO"!==e.action?s.filter(e=>t.hasNameForNode(e)).map((t,n)=>a.createElement(tj,{key:`enabled-${t}`,value:t,recordingKey:f.Pt(e,`viable-option-${n}`),disabled:!1})):((n,o)=>{let r=eD()(n.filter(e=>t.hasNameForNode(e)),t=>t===o&&(0,x.hS)(o)?tK.Ql(e.scene,t)?.guid:e.scene.get(t)?.parentGuid),l=Object.keys(r);(0,tK.X4)(l,t.format.bind(t));let{tlfId:i,index:c}=(0,tK.H_)(e.scene,l);return i&&c&&(l.splice(c,1),l=[i,...l]),l.reduce((t,n,o)=>(0!==o&&t.push(a.createElement(eB.sK,{key:o})),t.push(a.createElement(tj,{key:`disabled-${n}`,value:n+" ",recordingKey:f.Pt(e,`disabled-option-${n}`),disabled:!0})),r[n].forEach((n,o)=>{t.push(a.createElement(tj,{key:`enabled-${n+o}`,value:n,recordingKey:f.Pt(e,`viable-option-${o}`),disabled:!1}))}),t),[])})(s,c),_=r.filter(e=>t.hasNameForNode(e)).map((t,n)=>a.createElement(tj,{key:`disabled-${t}`,value:t,recordingKey:f.Pt(e,`disabled-option-${n}`),disabled:!0})),E=e.isUI3?a.Fragment:Y.fI;return a.createElement(E,null,a.createElement(t$,{ariaLabelledBy:e.ariaLabelledBy,chevronClassName:"prototype_destination_dropdown--chevron--pmWtI",className:e.className,dataTestId:"destination-select",dispatch:e.dispatch,dropdownShown:e.dropdownShown,dropdownWidth:tm.DxS,formatter:new tF(t,e.scene),hideDropdownWhenContainerMoves:!(0,tV.nl)(),id:p,inputClassName:"prototype_destination_dropdown--input--rzglN",onChange:e.onChange,onOptionFocus:e=>{tG.Uc(e??"")},property:c,recordingKey:f.Pt(e,"select"),willShowDropdown:()=>{let t=d.baT.ALL;"SCROLL_TO"===e.action?t=d.baT.SCROLL_TO:"SWAP_STATE_TO"===e.action?t=d.baT.STATES:"NAVIGATE_TO"===e.action&&i&&(t=d.baT.RESPONSIVE_SETS);let{viableIds:n,disabledIds:a}=d.X3B.getTransitionDestinationsOnActiveCanvas(t);return o(n),l(a),Promise.resolve()}},u||null,0!==r.length&&0!==s.length&&a.createElement(eB.sK,null),_))}let tX=a.memo(function(e){let t=(0,k.tS)(),n=(0,k._G)(),o=(0,r.d4)(tq),l=(0,r.d4)(tz.Sh),i=(0,r.d4)(tz.dK),c=(0,tB.to)(),s=(0,tW.D)(l,i),p=(0,r.d4)(tZ),m=a.useMemo(()=>(0,tH.cP)(p,t,n,c,e.actionIndexPath),[p,t,n,e.actionIndexPath,c]),u=a.useMemo(()=>(0,tH.cP)(o,t,n,c),[o,t,n,c]),_=m||u;if(!_||_.mode!==d.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)return null;let{allStates:E,stateGroupModel:g,selectedStates:y,selectedStatesPropertyValues:h}=_,v=g.propertySortOrder||[],f=g.propertyValues;return f?a.createElement(tY.lS,{allStates:E,extended:!0,hideErrorsPanel:!0,onSelectProperty:t=>{let n={};for(let e of Object.keys(t)){let o=t[e].symbol.node_id;for(let t of(n[e]=o,s[e]||[]))n[t]=o;for(let e of l)n[e]||(n[e]=o)}e.onChange(n)},recordingKey:e.recordingKey,selectedStates:y,selectedStatesPropertyValues:h,shouldIndent:!0,sortedProperties:v,stateGroupPropertyValues:f}):null});function tq(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function tZ(e){return e.mirror.selectionProperties.prototypeDestinationStateGroupSelectionInfo}var tQ=n(979890),t0=n(238004),t1=n(169444),t5=n(263267),t3=n(491892),t2=n(980061),t4=n(175393);let t8="prototype_set_variable_controls--dropdownAndIconContainer--6m3Tw",t6="prototype_set_variable_controls--icon---HzDt",t7="prototype_set_variable_controls--placeholderText--PBIqf";function t9({targetVariableData:e,targetVariable:t,updateSelectionProperties:n,autoOpenVariablePicker:o,...l}){let i=a.useRef(null),c=(0,r.wA)(),s=(0,S.GS)(),p=(0,r.d4)(e=>e.variablePickerShown),_=(0,eg.tZ)((0,x.hS)(t)&&"id"in t?t.id:void 0),E=(0,eg.u)((0,x.hS)(t)&&"id"in t?t.id:void 0),[y,h]=a.useState("");(0,F.h)(()=>{o&&!0===o.current&&(I(),o.current=!1)});let v=(0,eg.BQ)((0,x.hS)(t)&&"id"in t?t.id:void 0)??(0,ey.m9)((0,x.hS)(t)&&"nodeFieldAlias"in t?t.nodeFieldAlias:void 0);a.useEffect(()=>{void 0!==e&&v&&"MIXED"!==v&&(0,x.hS)(e)&&e.resolvedType!==v.resolvedType&&!((0,ey.tz)(e.resolvedType)&&(0,ey.tz)(v.resolvedType))&&n({targetVariableData:void 0})},[v,n,e]);let I=()=>{let e=i.current.getBoundingClientRect();c((0,t0.C)({type:"variable-picker-set-variable-action",isShown:!0,resolvedType:d.rXF.STRING,initialPosition:new N.Mi(e.left-20,e.top),key:l.recordingKey,onVariableSelected:C}))},T=a.useCallback(()=>{c((0,t0.B)())},[c]),[b,P]=a.useState(!1),C=a.useCallback(t=>{if(void 0!==t&&t.node_id){let o={targetVariable:{id:t.node_id}},a=d.CWU.getVariableResolvedValue(t.node_id,new Map);!e&&t.resolvedType===d.rXF.COLOR&&a&&(o.targetVariableData=a??void 0),n(o),c((0,R.Zh)({name:"prototype.variable_selected",params:{collectionId:t.variableSetId,variableId:t.node_id,variableType:t.resolvedType}})),P(!0)}},[c,e,n]),O=a.useCallback(e=>{e.value.stablePath.map(e=>m.sH(e))&&(n({targetVariable:{nodeFieldAlias:{stablePathToNode:e.value.stablePath,nodeField:"COMPONENT_PROP_ASSIGNMENTS",indexOrKey:e.value.explicitDefId}}}),P(!0))},[n]),w=a.useMemo(()=>({type:"LOCAL_VARIABLES",layout:"list"}),[]),D=a.useRef(null);ts(e=>{n({targetVariableData:e})});let k="nodeFieldAlias"in t?(0,ey.aA)(t.nodeFieldAlias.stablePathToNode,t.nodeFieldAlias.indexOrKey):void 0,M=k?(0,ey.Xx)(k.varValue.resolvedType):null,L=null;if((0,x.gl)(t))L=null;else if(v?.resolvedType===d.rXF.COLOR)L=(0,x.gl)(e)?a.createElement("div",{className:"prototype_set_variable_controls--targetVariableDataMixedContainer--H6uGu"},(0,A.t)("fullscreen.mixed")):a.createElement(a.Fragment,null,a.createElement(t2.gJ,{variableValue:e??v,onChange:e=>{n({targetVariableData:e})},recordingKey:f.Pt(l.recordingKey,"variableValueInput"),setVariableAction:!0,innerContainerClassName:"prototype_set_variable_controls--variableColorInputContainer--NaOmp"}));else{let t=l.isNestedInConditional?"prototype_set_variable_controls--absoluteIconInConditional--BbEmW":"prototype_set_variable_controls--absoluteIcon--1XpBF",o=d.rXF.BOOLEAN;E?o=E.resolvedType:k&&(o=k.varValue.resolvedType===d.rXF.TEXT_DATA?d.rXF.STRING:k.varValue.resolvedType),L=a.createElement("div",{className:s?void 0:j.s.ml12.$},a.createElement("div",{className:t8},a.createElement(K.KN,{resolvedType:o,targetVariableData:e,autoOpenExpressionBuilder:b,setAutoOpenExpressionBuilder:P,updateSelectionProperties:n,recordingKey:l.recordingKey,isNarrowPanel:l.isNarrowPanel,showVariableThumbnails:!0}),!s&&a.createElement(H.B,{className:g()(t6,t),svg:tk.default})))}let U=g()({"prototype_set_variable_controls--targetVariableDropdown--IZwoF":!s&&!l.isNarrowPanel,"prototype_set_variable_controls--targetVariableDropdownNarrow--WWi-t prototype_set_variable_controls--targetVariableDropdown--IZwoF":!s&&l.isNarrowPanel,"prototype_set_variable_controls--targetVariableDropdownUI3--Pz71q":s,[t7]:s&&!(_||k)}),V=(0,r.d4)(es.ZM)?(0,A.t)("proto.select_variable_unified"):s?(0,A.t)("proto.select_variable.short"):(0,A.t)("proto.select_variable"),B=a.createElement(tQ.D8,{recordingKey:f.Pt(l.recordingKey,"selectTargetVariable"),onClick:I},a.createElement("div",{className:s?void 0:(0,x.hS)(t)?"prototype_set_variable_controls--targetVariableLabel--AFCqK":"prototype_set_variable_controls--targetVariableLabelInactive--zHWCC prototype_set_variable_controls--targetVariableLabel--AFCqK",ref:i},a.createElement(W.Y,null,a.createElement("div",{className:U},a.createElement("div",{className:t8},(0,x.gl)(t)?a.createElement("div",{className:g()(j.s.pt2.$,j.s.pb2.$)},(0,A.t)("fullscreen.mixed")):_?a.createElement(ef.wG,{text:_,thumbnailValue:v,isDeleted:!!E&&(0,ev.eF)(E)}):k?a.createElement(ef.wG,{text:k.name,thumbnailValue:M,isDeleted:!1,colorTheme:ef.J2.COMPONENT}):a.createElement("div",{className:g()(j.s.pt2.$,j.s.pb2.$,s?"prototype_set_variable_controls--placeholderTextColorUI3--Pc-4N":void 0)},V),!s&&a.createElement(H.B,{className:t6,svg:tk.default})))))),G=s?a.createElement(eV.A,{input:B,label:(0,A.t)("proto.target")}):B,z=g()({"prototype_set_variable_controls--setVariableToContainerNarrow--HHbHQ prototype_set_variable_controls--setVariableToContainer--kxsCZ":!s&&l.isNarrowPanel,"prototype_set_variable_controls--setVariableToContainer--kxsCZ":!s&&!l.isNarrowPanel,"prototype_set_variable_controls--setVariableToContainerUI3--pGbDe":s,[t7]:s&&!e&&v?.resolvedType!==d.rXF.COLOR}),Y=a.createElement("div",{className:z,"data-testid":"set-variable-container"},L),$=s?null!==L?a.createElement(eV.A,{label:(0,A.t)("proto.variable.value"),input:Y}):null:Y;return a.createElement("div",{className:s?void 0:j.s.relative.$},G,p.isShown&&"variable-picker-set-variable-action"===p.type&&p.key===l.recordingKey?a.createElement(a.Fragment,null,a.createElement(t4.vx,{title:"",headerSize:"hidden",initialPosition:p.initialPosition,onClose:T,dragHeaderOnly:!1,initialWidth:216,canRenderBelowViewport:!0},a.createElement(t3.YK,{currentView:w,disabledVariableIds:new Set,onClose:T,onComponentPropSelected:(0,u.k)().ds_variable_props_proto?O:void 0,onSearchInputChange:h,onVariableSelected:C,pickerType:"set-variable",recordingKey:f.Pt(l.recordingKey,"variablePickerForSelection"),renderSetControls:()=>a.createElement(t5.Z,{currentView:w,subscribedLibraries:[],setControlRightButtons:a.createElement(t1.f,{resolvedTypes:[d.rXF.BOOLEAN,d.rXF.STRING,d.rXF.FLOAT,d.rXF.COLOR]}),recordingKey:f.Pt(l.recordingKey,"variablePickerForSelection")}),searchInputRef:D,searchQuery:y,selectedItem:E})),a.createElement(t3.$3,{onClose:T})):null,$)}var ne=n(723372),nt=n(748059),nn=n(47825),no=n(976710);let na=(0,a.forwardRef)(({htmlAttributes:e,children:t,...n},o)=>(0,Q.jsx)(e_.E,{...n,ref:o,htmlAttributes:e,className:(0,ne.A)(no.gb,no.qy),children:(0,Q.jsx)("span",{"aria-hidden":!0,className:no.Kk,children:t})}));na.displayName="ToggleTip.IconTrigger";let nr=(0,a.forwardRef)(({manager:e,children:t,htmlAttributes:n,...o},a)=>(0,Q.jsx)(el.J,{mode:"dark",children:(0,Q.jsxs)(nt.mc,{...nn.r,...n,...o,...e.getContainerProps({ref:a}),className:"toggle-tip__container__IjXj- typography__bodyMedium__phzT0",children:[(0,Q.jsx)(nt.i3,{...e.getArrowProps(),width:14,height:7,className:"toggle-tip__arrow__Ve94t"}),t]})}));nr.displayName="ToggleTip.Container";let nl=(0,a.forwardRef)(({children:e,iconLead:t,htmlAttributes:n,...o},a)=>(0,Q.jsx)(el.J,{mode:"dark",children:(0,Q.jsxs)("div",{...nn.r,...n,...o,ref:a,className:"toggle-tip__content__M80HZ",style:{maxWidth:o.maxWidth??"180px"},children:[t&&t,(0,Q.jsx)("span",{className:(0,ne.A)("toggle-tip__text__Lo6VS",{"toggle-tip__hasIconLead__d-j37":!!t}),children:e})]})}));nl.displayName="ToggleTip.Content";var ni=n(566371),nc=n(347701),ns=n(808943),nd=n(156137),np=n(523669),nm=n(801296),nu=n(469508);function n_(){let e=a.createElement(nu.N,{newTab:!0,href:"https://help.figma.com/hc/articles/14397859494295",htmlAttributes:{rel:"noopener noreferrer",onMouseDown:e=>{e.stopPropagation(),e.preventDefault()}}},(0,A.tx)("proto.state_management.info_tooltip_learn_more")),t=a.createElement("span",null,a.createElement("strong",null,(0,A.tx)("proto.animation_panel.preserve_scroll_position")));return a.createElement(a.Fragment,null,(0,A.tx)("proto.state_management.info_tooltip",{PreserveScrollPositionBold:t,LearnMoreLink:e}))}let nE=(0,$.ex)("prototype_state_management_info",function(){return a.createElement("div",{className:"prototype_state_management_info_tooltip--stateManagementMoreInfo---gER1 tooltip--text--Ll1mS"},a.createElement(n_,null))}),ng="prototype_state_management_panel--checkboxRow--2u02e checkbox--_checkboxRow--oEhow",ny="prototype_state_management_panel--stateManagementPanelTooltipUI3--x5MQ3",nh="prototype_state_management_panel--expandCaret--uuDge";var nv=n(523860),nf=n(85206);function nI({transition:e,navigationType:t,recordingKey:n,showPreserveScrollPosition:o,showResetVideoState:l,showResetInteractiveComponentState:i,updateSelectionProperties:c,stateManagementVersion:s,selectedInteractions:d}){let p=(0,r.wA)(),m=(0,S.GS)(),[_,E]=a.useState(!m),g=(0,e8.Em)(),y=a.useContext(eh.c),h=(0,G.YT)()===G.Oz.TWO_COL&&y===eh.P.LEFT,v=function(e){let[t,n]=(0,a.useState)(!1),{getArrowProps:o,getContainerProps:r,getTriggerProps:l}=(0,nt.fP)({...e,isOpen:t,onOpenChange:n,type:"tooltip",arrowPadding:5,openOnHover:!0});return{isOpen:t,toggle:()=>n(e=>!e),getTriggerProps:l,getArrowProps:o,getContainerProps:r}}({placement:"bottom"});if(h)return null;let I=(0,G.LH)(s),N=a.createElement(e9.S,{onChange:t=>{p((0,R._P)({name:"Preserve Scroll Changed",params:{newValue:t}})),c({...function(e){if((0,x.hS)(e.preserveScroll))return{transitionPreserveScroll:e.preserveScroll}}({...e,preserveScroll:t})})},checked:!0===e.preserveScroll,mixed:(0,x.gl)(e.preserveScroll),recordingKey:f.Pt(n,"preserve-scroll-check"),label:a.createElement(er.J,null,(0,A.tx)("proto.animation_panel.preserve_scroll_position"))}),T=m?a.createElement(tp.TN,null,N):a.createElement(Y.fI,{className:ng},N),P=a.createElement(e9.S,{onChange:t=>{p((0,R._P)({name:"Reset Scroll Position Changed",params:{newValue:t,noodleUpgradedThisSession:nm.zZ.haveAnyInteractionsBeenUpgraded(d)}})),c({...function(e){if((0,x.hS)(e.resetScrollPosition))return{transitionResetScrollPosition:e.resetScrollPosition}}({...e,resetScrollPosition:t})})},checked:!0===e.resetScrollPosition,mixed:(0,x.gl)(e.resetScrollPosition),recordingKey:f.Pt(n,"reset-scroll-position-check"),label:a.createElement(er.J,null,(0,A.tx)("proto.animation_panel.reset_scroll_position"))}),C=(0,u.k)().fpl_toggle_tip?a.createElement("div",{className:ny},a.createElement(na,{...v.getTriggerProps()},a.createElement(ni.B,null)),a.createElement(nr,{manager:v},a.createElement(nl,{maxWidth:240},a.createElement(n_,null)))):a.createElement("div",{"data-tooltip-type":L.Ib.SPECIAL,"data-tooltip":nE,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":240,className:m?ny:void 0},a.createElement(np.In,{icon:"info-16"})),O=m?a.createElement(tp.TN,null,P," ",g&&C):a.createElement(Y.fI,{className:ng},P),w=a.createElement(e9.S,{onChange:t=>{p((0,R._P)({name:"Reset Component State Changed",params:{newValue:t,noodleUpgradedThisSession:nm.zZ.haveAnyInteractionsBeenUpgraded(d)}})),c({...function(e){if((0,x.hS)(e.resetInteractiveComponents))return{transitionResetInteractiveComponents:e.resetInteractiveComponents}}({...e,resetInteractiveComponents:t})})},checked:!0===e.resetInteractiveComponents,mixed:(0,x.gl)(e.resetInteractiveComponents),recordingKey:f.Pt(n,"reset-component-state-check"),label:a.createElement(er.J,null,(0,A.tx)("proto.animation_panel.reset_component_state"))}),D=m?a.createElement(tp.TN,null,w):a.createElement(Y.fI,{className:ng},w),k=a.createElement(e9.S,{onChange:t=>{p((0,R._P)({name:"Reset Video Position Changed",params:{newValue:t}})),c({...function(e){if((0,x.hS)(e.resetVideoPosition))return{transitionResetVideoPosition:e.resetVideoPosition}}({...e,resetVideoPosition:t})})},checked:!0===e.resetVideoPosition,mixed:(0,x.gl)(e.resetVideoPosition),recordingKey:f.Pt(n,"reset-video-position-check"),label:a.createElement(er.J,null,(0,G.LH)(s)?(0,A.tx)("proto.state_management.reset_video_state"):(0,A.tx)("proto.animation_panel.reset_video_state"))}),M=m?a.createElement(tp.TN,null,k):a.createElement(Y.fI,{className:ng},k),U=a.createElement(Y.Zk,{className:`prototype_state_management_panel--stateManagementPanel--sYaaj ${(0,G.kM)(s)&&"prototype_state_management_panel--stateManagementPanelWithVersion--AovOP"}`},!m&&a.createElement(Y.fI,null,a.createElement(ti.Q,{className:"prototype_state_management_panel--panelTitle--Nr4Eh",faded:!0},(0,A.tx)("proto.state_management")),!(0,G.kM)(s)&&C),(0,G.uU)(s)&&o&&T,l&&(0,G.uU)(s)&&M,I&&O,I&&i&&D,I&&l&&M,(0,x.gl)(s)&&a.createElement(W.Y,{direction:"horizontal",padding:{horizontal:12,vertical:12}},a.createElement(Y.nV,null,(0,A.tx)("proto.state_management.mixed_state_update")))),K=a.createElement(b.U,{svg:_?nv.A:nf.A},_?a.createElement(nc.O,{className:nh}):a.createElement(ns.k,{className:nh})),V=a.createElement(e_.E,{key:"expand-caret",recordingKey:f.Pt(n,"expand-caret"),onClick:()=>{E(!_)},actionOnPointerDown:!0,className:"prototype_state_management_panel--expandRow--RVDCp"},K,a.createElement("span",null,(0,A.tx)("proto.state")));return a.createElement(nd.k,{name:"prototype_state_management_panel"},m&&V,(_||!m)&&U)}let nN=eB.c$,nT=eB.l6,nb=m.AD;class nA extends en.cP{format(e){return e===nb||null===e?(0,A.t)("proto.target_video_node_name_formatter.this_video"):super.format(e)}}function nP(e){let{viableSameFrameVideoIds:t,disabledSameFrameVideoIds:n,scene:o,dropdownShown:l,targetVideoNodeID:i,isVideoSelected:c,onChange:s}=e,d=(0,r.wA)(),[p,u]=a.useState(()=>c?new nA(o):new en.cP(o));t.sort((e,t)=>{let n=p.format(e),o=p.format(t);return n.localeCompare(o)}),c&&t.unshift(nb);let _=t.length>0&&n.length>0,E=`prototype-target-video-select-${e.recordingKey}`,g=(0,S.GS)(),y=a.useId(),h=a.createElement(nT,{ariaLabelledBy:y,chevronClassName:"prototype_target_video_dropdown--chevron--jgz53",className:"prototype_target_video_dropdown--targetVideoDropdown--6hKF-",dataTestId:"target-video-select",dispatch:d,dropdownAlignment:"left",dropdownShown:l,formatter:p,id:E,inputClassName:"prototype_target_video_dropdown--input--infAK",onChange:s,onOptionFocus:e=>{tG.Uc(e??"")},property:(0,x.gl)(i)?i:m.dI(i),recordingKey:f.Pt(e,"select")},t.filter(e=>p.hasNameForNode(e)).map((t,n)=>a.createElement(nN,{key:`enabled-${n}`,value:t,recordingKey:f.Pt(e,`viable-option-${n}`),disabled:!1})),_&&a.createElement(eB.sK,null),n.filter(e=>p.hasNameForNode(e)).map((t,n)=>a.createElement(nN,{key:`disabled-${n}`,value:t,recordingKey:f.Pt(e,`viable-option-${n}`),disabled:!0})));return g?a.createElement(eV.A,{input:h,label:(0,A.t)("proto.video_dropdown.label"),labelId:y}):h}var nS=n(264478);function nC({action:e,recordingKey:t,onURLChange:n,onOpenInNewTabChange:o}){let r=(0,S.GS)(),l=a.createElement(nS.ks,{className:r?"prototype_open_url_action_options--urlInputUI3--H-JfT":"prototype_open_url_action_options--urlInput--T-tGT",dataTestId:"url-input",placeholder:(0,A.t)("proto.interaction.example_com"),value:(0,x.gl)(e.connectionURL)?(0,A.t)("fullscreen.mixed"):(0,x._W)(e.connectionURL,""),onChange:n,recordingKey:f.Pt(t,"urlTextInput"),autoFocus:!1}),i=a.createElement(e9.S,{label:a.createElement(er.J,null,(0,A.tx)("proto.action_open_url_in_new_tab")),onChange:o,recordingKey:f.Pt(t,"open-url-in-new-tab-check"),checked:void 0===e.openUrlInNewTab||!0===e.openUrlInNewTab});return a.createElement(a.Fragment,null,r?a.createElement(eV.A,{label:(0,A.t)("proto.open_url.text_input_label"),input:l}):l,r?a.createElement(tp.TN,null,i):a.createElement(Y.fI,{className:"prototype_open_url_action_options--checkboxRow--mu17T checkbox--_checkboxRow--oEhow"},i))}var nO=n(959750),nx=n(785812);function nw({updateSelectionProperties:e,action:t,extraScrollOffset:n,showScrollToOptions:o,recordingKey:l}){let{smallNudgeAmount:i,bigNudgeAmount:c}=(0,nO.sT)(),s=(0,r.wA)(),d=(0,S.GS)(),p=(t,n)=>(o,a)=>{t&&e({extraScrollOffset:{...t,[n]:o}},{shouldCommit:a})},m=(0,x._W)(n,{x:0,y:0});if(!o||"SCROLL_TO"!==t)return null;let u=a.createElement(to.gq,{bigNudgeAmount:c,className:d?void 0:eI.U,"data-tooltip":(0,A.t)("proto.trigger.y_offset"),"data-tooltip-type":L.Ib.TEXT,dispatch:s,inputClassName:d?eI.oM:eI.hF,onValueChange:p(m,"y"),recordingKey:f.Pt(l,"extraScrollOffsetY"),scrubMultiplier:i,smallNudgeAmount:i,tooltipForScreenReadersOnly:!1,value:m.y,wheelMultiplier:i},d?a.createElement("span",{className:eI.QK},(0,A.tx)("proto.scroll_options.scroll_offset.y")):a.createElement(H.B,{className:eI.QK,svg:nx.A})),_=a.createElement(to.gq,{bigNudgeAmount:c,className:d?void 0:eI.sC,"data-tooltip":(0,A.t)("proto.trigger.x_offset"),"data-tooltip-type":L.Ib.TEXT,dispatch:s,inputClassName:d?eI.oM:eI.hF,onValueChange:p(m,"x"),recordingKey:f.Pt(l,"extraScrollOffsetX"),scrubMultiplier:i,smallNudgeAmount:i,tooltipForScreenReadersOnly:!1,value:m.x,wheelMultiplier:i},d?a.createElement("span",{className:eI.QK},(0,A.tx)("proto.scroll_options.scroll_offset.x")):a.createElement(H.B,{className:eI.Kh,svg:nx.A}));return d?a.createElement(tp.Cm,{label:a.createElement(eV.F,{tooltip:(0,A.t)("proto.scroll_options.offset")},(0,A.t)("proto.scroll_options.offset")),leftInput:_,rightInput:u}):a.createElement(Y.fI,null,u,_)}let nD=(0,a.memo)(function(e){return(0,Q.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,Q.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M18 12a6 6 0 1 1-12 0 6 6 0 0 1 12 0m1 0a7 7 0 1 1-14 0 7 7 0 0 1 14 0m-6.5-3.5a.5.5 0 0 0-1 0V12a.5.5 0 0 0 .146.354l2 2a.5.5 0 0 0 .708-.708L12.5 11.793z",clipRule:"evenodd"})})}),nk="prototype_video_action_options--chevron--mkNyv",nR="prototype_video_action_options--input--3-cEi",nM=eB.c$,nL=eB.l6,nU=new en.js,nK=new en.Z6;function nV({action:e,onChange:t,updateSelectionProperties:n,dropdownShown:o,recordingKey:l}){let i=(0,S.GS)(),c=(0,en.Od)(e),s=(0,x.E7)(e.mediaAction),d="UPDATE_MEDIA_RUNTIME"===(0,x.E7)(e.connectionType),p="SKIP_TO"===s,m="SKIP_FORWARD"===s||"SKIP_BACKWARD"===s,u="PLAY"===s||"PAUSE"===s||"TOGGLE_PLAY_PAUSE"===s,_="MUTE"===s||"UNMUTE"===s||"TOGGLE_MUTE_UNMUTE"===s,E=(0,r.wA)(),g=(0,nO.RU)(),y=a.useCallback(e=>{n({mediaSkipToTime:e}),E((0,R._P)({name:"Media skip to time changed",params:{value:e}}))},[E,n]),h=`prototype-media-action-select-${l}`,v="prototype_video_action_options--shortDropdown--NOXXv",I=o&&o.type===h?nU:nK,N=a.useId(),T=a.createElement(nL,{ariaLabelledBy:N,chevronClassName:nk,className:v,dataTestId:"media-play-pause-select",dispatch:E,dropdownShown:o,formatter:I,id:h,inputClassName:nR,onChange:t,property:c,recordingKey:f.Pt(l,"select")},a.createElement(nM,{key:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",value:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",recordingKey:f.Pt(l,"toggle-play-pause-option"),disabled:!1}),a.createElement(nM,{key:"UPDATE_MEDIA_PLAY",value:"UPDATE_MEDIA_PLAY",recordingKey:f.Pt(l,"play-option"),disabled:!1}),a.createElement(nM,{key:"UPDATE_MEDIA_PAUSE",value:"UPDATE_MEDIA_PAUSE",recordingKey:f.Pt(l,"pause-option"),disabled:!1})),b=a.useId(),P=a.createElement(nL,{ariaLabelledBy:b,chevronClassName:nk,className:v,dataTestId:"media-mute-unmute-select",dispatch:E,dropdownShown:o,formatter:I,id:h,inputClassName:nR,onChange:t,property:c,recordingKey:f.Pt(l,"select")},a.createElement(nM,{key:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",value:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",recordingKey:f.Pt(l,"toggle-mute-unmute-option"),disabled:!1}),a.createElement(nM,{key:"UPDATE_MEDIA_MUTE",value:"UPDATE_MEDIA_MUTE",recordingKey:f.Pt(l,"mute-option"),disabled:!1}),a.createElement(nM,{key:"UPDATE_MEDIA_UNMUTE",value:"UPDATE_MEDIA_UNMUTE",recordingKey:f.Pt(l,"unmute-option"),disabled:!1})),C=a.useId(),O=a.createElement(nL,{ariaLabelledBy:C,chevronClassName:nk,className:v,dataTestId:"media-skip-by-select",dispatch:E,dropdownShown:o,dropdownWidth:160,formatter:I,id:h,inputClassName:nR,onChange:t,property:c,recordingKey:f.Pt(l,"select")},a.createElement(nM,{key:"UPDATE_MEDIA_SKIP_FORWARD",value:"UPDATE_MEDIA_SKIP_FORWARD",recordingKey:f.Pt(l,"skip-forward-option"),disabled:!1}),a.createElement(nM,{key:"UPDATE_MEDIA_SKIP_BACKWARD",value:"UPDATE_MEDIA_SKIP_BACKWARD",recordingKey:f.Pt(l,"skip-backward-option"),disabled:!1})),w=a.createElement(to.qd,{className:"prototype_video_action_options--timestampContainer---DdaI","data-tooltip":(0,A.t)("proto.trigger.timestamp_to_set_to"),"data-tooltip-type":L.Ib.TEXT,dataTestId:"mediaSkipToTime-input",dispatch:E,displayFractions:!0,inputClassName:"prototype_video_action_options--timestamp--luOrs",max:3600,onValueChange:y,recordingKey:f.Pt(l,"mediaSkipToTimeInput"),scrubMultiplier:g/1e3,tooltipForScreenReadersOnly:!0,value:e.mediaSkipToTime||0,wheelMultiplier:g/1e3},i?a.createElement(nD,null):void 0),D="SKIP_BACKWARD"===s?(0,A.t)("proto.trigger.duration_to_jump_backward"):(0,A.t)("proto.trigger.duration_to_jump_forward"),k=a.createElement(to.dE,{className:"prototype_video_action_options--timeAmountContainer--5kpHn","data-tooltip":D,"data-tooltip-type":L.Ib.TEXT,dataTestId:"mediaSkipByAmount-input",dispatch:E,max:3600,onValueChange:e=>{n({mediaSkipByAmount:e}),E((0,R._P)({name:"Media skip by amount changed",params:{value:e}}))},recordingKey:f.Pt(l,"mediaSkipByAmountInput"),scrubMultiplier:g/1e3,tooltipForScreenReadersOnly:!0,value:e.mediaSkipByAmount||5,wheelMultiplier:g/1e3});if(!d)return null;if(i){if(u)return a.createElement(eV.A,{input:T,label:(0,A.t)("proto.video_options.behavior"),labelId:N});if(_)return a.createElement(eV.A,{input:P,label:(0,A.t)("proto.video_options.behavior"),labelId:b});if(m)return a.createElement(a.Fragment,null,a.createElement(eV.A,{input:O,label:(0,A.t)("proto.video_options.direction"),labelId:C}),a.createElement(eV.A,{input:k,label:(0,A.t)("proto.video_options.offset")}));if(p)return a.createElement(eV.A,{input:w,label:(0,A.t)("proto.video_options.timestamp")})}return a.createElement(Y.fI,null,u&&T,_&&P,m&&O,m&&k,p&&w)}var nB=n(956783);function nF({action:e,recordingKey:t,interactionType:n,onActionChange:o,updateMultipleDestinationNodes:l,updateSelectionProperties:i,stateManagementVersion:c,autoOpenVariablePicker:s,autoOpenExpressionBuilder:p,setAutoOpenExpressionBuilder:u,..._}){let E=(0,r.wA)(),y=(0,eo.Um)(),{scene:v}=(0,e4.R)(e=>({scene:e.mirror.sceneGraph})),I=(0,S.GS)(),N=(0,e8.cJ)(),T=(0,G.YT)(),b=T===G.Oz.SINGLE_COL,P=T===G.Oz.TWO_COL,C=a.useContext(eh.c),O=P&&C===eh.P.RIGHT,w="SET_VARIABLE"===(0,x.E7)(e.connectionType),D="SET_VARIABLE_MODE"===(0,x.E7)(e.connectionType),k="CONDITIONAL"===(0,x.E7)(e.connectionType),M="INTERNAL_NODE"===(0,x.E7)(e.connectionType),L="INTERNAL_NODE"===(0,x.E7)(e.connectionType)&&"SWAP_STATE"===(0,x.E7)(e.navigationType),U="URL"===(0,x.E7)(e.connectionType),K=M||"BACK"===(0,x.E7)(e.connectionType)||"CLOSE"===(0,x.E7)(e.connectionType),V="UPDATE_MEDIA_RUNTIME"===(0,x.E7)(e.connectionType),B=(0,r.d4)(e=>{let t=e.mirror.selectionProperties.numSelected,n=e.mirror.selectionProperties.numVideosSelected;return 1===t&&!!n}),F=(0,e7.uQ)(),z=[],W=[];if(F){let{viableIds:e,disabledIds:t}=d.X3B.getVideoNodesOnSameTlfAsNode(F);z=e,W=t}let Y=m.dI((0,x.E7)(e.transitionNodeID)),H=null!=Y&&Y!==m.AD,$=M&&(!(0,x.hS)(e.transitionNodeID)||H)&&!(N&&!L&&"SCROLL_TO"!==(0,x.E7)(e.navigationType)),J=(0,x.E7)(e.navigationType),X=M&&"OVERLAY"===(0,x.E7)(J),q=(0,G.hU)(e.transitionType,e.easingType,e.easingFunction,e.transitionDuration,e.transitionShouldSmartAnimate,e.transitionPreserveScroll,e.transitionResetVideoPosition,e.openUrlInNewTab,e.transitionResetScrollPosition,e.transitionResetInteractiveComponents),Z=K&&!X&&("INSTANT"===q.behavior||"DISSOLVE"===q.behavior),Q=M&&"OVERLAY"===(0,x.E7)(e.navigationType)&&H,ee=M&&(X||"SWAP"===(0,x.E7)(J)),et=!V&&(0,G.oc)(e),ea=(0,G.GB)(e),er=(0,G.uU)(c)?Z||et:(0,G.Fp)(c,e.connectionType,e.navigationType),{selectedInteractions:el}=(0,nB.Ay)(e6.J.NORMAL),ei=el.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>h.d({nodeID:e.sourceNodeID,interactionID:e.id})),ec=a.useCallback(e=>{let t=m.sH(e);t&&i({transitionNodeID:t}),E((0,R._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(ei),destinationTlfId:e}}))},[E,i,ei]),es=a.useCallback(e=>{l(e),E((0,R._P)({name:"Variant based prototyping UI changed",params:{source:"panel"}})),E((0,R._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(ei)}}))},[l,E,ei]),ed=a.useCallback(e=>{i({connectionURL:e.target.value})},[i]),ep=(0,en.Od)(e),em=g()({[eI.Ph]:!I,[eI.Ti]:_.isNestedInConditional&&!b&&!O}),eu=a.useId(),e_=M&&!L,eE=a.createElement(tJ,{action:ep,ariaLabelledBy:eu,className:eI.iR,dispatch:E,dropdownShown:y,isUI3:I,nodeId:e.transitionNodeID||m.Hr,onChange:ec,recordingKey:f.Pt(t,"destinationDropdown"),scene:v}),eg=a.createElement(nw,{action:ep,showScrollToOptions:"SCROLL_TO"===ep,extraScrollOffset:e.extraScrollOffset,updateSelectionProperties:i,recordingKey:f.Pt(t,"scrollOptionsPanel")}),ey=a.createElement(th,{interactionType:n,updateSelectionProperties:i,recordingKey:f.Pt(t,"overlaySettings"),actionIndexPath:_.actionIndexPath,nodeId:e.transitionNodeID||m.Hr});return a.createElement("div",{className:em},e_&&(I?a.createElement(a.Fragment,null,a.createElement(eV.A,{labelId:eu,label:ee?(0,A.t)("proto.overlay"):(0,A.t)("proto.destination"),input:eE}),eg,Q&&ey):eE),U&&a.createElement(nC,{action:e,recordingKey:t,onOpenInNewTabChange:e=>{i({openUrlInNewTab:e}),E((0,R._P)({name:"Open Url In New Tab Changed",params:{value:e}}))},onURLChange:ed}),V&&a.createElement(nP,{dropdownShown:y,scene:v,targetVideoNodeID:e.transitionNodeID||m.Hr,recordingKey:f.Pt(t,"targetVideoDropdown"),viableSameFrameVideoIds:z,disabledSameFrameVideoIds:W,isVideoSelected:B,onChange:ec}),a.createElement(nV,{dropdownShown:y,action:e,onChange:o,updateSelectionProperties:i,recordingKey:t}),!I&&eg,w&&a.createElement("div",{className:I?void 0:j.s.ml4.$},a.createElement(t9,{action:ep,autoOpenVariablePicker:s,className:eI.PB,dispatch:E,isNarrowPanel:_.isNestedInConditional||_.isNarrowPanel,isNestedInConditional:_.isNestedInConditional,nodeId:e.transitionNodeID||m.Hr,onChange:ec,recordingKey:f.Pt(t,"setVariableControls"),targetVariable:e.targetVariable||{id:""},targetVariableData:e.targetVariableData,updateSelectionProperties:i})),D&&a.createElement("div",{className:I?void 0:j.s.ml4.$},a.createElement(eq,{dispatch:E,targetVariableSetID:e.targetVariableSetID,targetVariableModeID:e.targetVariableModeID,deprecatedTargetVariableSetKey:e.targetVariableSetKey,updateSelectionProperties:i,recordingKey:f.Pt(t,"setVariableControls"),actionIndexPath:_.actionIndexPath.join(",")})),k&&(O?a.createElement(tU,{recordingKey:f.Pt(t,"conditionalActionSection","conditional-block",0),autoOpenExpressionBuilder:p,setAutoOpenExpressionBuilder:u,updateSelectionProperties:i,conditionalActions:(0,x.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]}):a.createElement(tL,{action:e,actionIndexPath:_.actionIndexPath,autoOpenVariablePicker:s,expandedRows:_.expandedRows,handleMouseDownUI3:_.handleMouseDownUI3,interactionType:n,onDrop:_.onDrop,onExpand:_.onExpand,onNewActionAdded:_.onNewActionAdded,onSelect:_.onSelect,recordingKey:f.Pt(t,"conditionalActionSection"),selectedActionIndex:_.selectedActionIndex,selectedInteractions:_.selectedInteractions,stateManagementVersion:c,updateMultipleDestinationNodes:l,updateSelectionProperties:i})),L&&a.createElement("div",{className:j.s.ml0.$},a.createElement(tX,{onChange:es,nodeId:e.transitionNodeID||m.Hr,recordingKey:f.Pt(t,"consumption"),actionIndexPath:_.actionIndexPath})),$&&a.createElement(a.Fragment,null,I&&a.createElement("div",{className:eI.x}),a.createElement(tP.X7,{transition:q,interactionType:n,navigationType:e.navigationType,recordingKey:f.Pt(t,"animationPanel"),updateSelectionProperties:i,isNarrowPanel:_.isNestedInConditional||_.isNarrowPanel,stateManagementVersion:c})),Q&&!I&&ey,er&&a.createElement(a.Fragment,null,I&&a.createElement("div",{className:eI.x}),a.createElement(nI,{connectionType:e.connectionType,navigationType:e.navigationType,recordingKey:f.Pt(t,"stateManagementPanel"),selectedInteractions:_.selectedInteractions,showPreserveScrollPosition:Z,showResetInteractiveComponentState:!!ea,showResetVideoState:!!et,stateManagementVersion:c,transition:q,updateSelectionProperties:i})))}var nG=n(705047),nz=n(548384);let nW=Symbol("ACTION_ROW");function nY({updateMultipleDestinationNodes:e,updateSelectionProperties:t,onDeleteAction:n,stateManagementVersion:o,selectedInteractions:l,autoOpenVariablePicker:i,autoOpenExpressionBuilder:s,setAutoOpenExpressionBuilder:d,...p}){let m=(0,r.wA)(),{shouldShowAdvancedPrototypingPaywall:u,showAdvancedPrototypingVariablesModal:E,showAdvancedPrototypingConditionalActionsModal:y}=(0,G.zt)(),v=(0,eo.Um)(),I=(0,G.hP)(),{firstVariableSetMode:N,firstVariableSetID:T}=eX(),P=p.action,C=p.isNestedInConditional&&(0,tS.qQ)(p.action),O=!!P.connectionType&&"CONDITIONAL"===P.connectionType,w=(0,S.GS)(),D=(0,G.YT)(),k=D===G.Oz.SINGLE_COL,M=D===G.Oz.TWO_COL,U=a.useContext(eh.c),K=M&&U===eh.P.RIGHT,V=M&&U===eh.P.LEFT,B=!((0,x.gl)(p.action)||["CLOSE","NONE"].includes(P.connectionType))&&!w;var F=p.selectedActionIndex.equals(p.actionIndexPath);let W=1===p.selectedActionIndex.path.length&&p.isNestedInConditional&&p.actionIndexPath[0]===p.selectedActionIndex.path[0];var j=void 0===p.expandedRows||void 0!==p.expandedRows.find(e=>e.equals(p.actionIndexPath));w&&(j=!!k||!V||O);let $=a.useCallback(()=>{(B||k)&&p.onExpand(p.actionIndexPath)},[B,k,p]),[J,X]=a.useState(!1);a.useEffect(()=>{if(O){let e=setTimeout(()=>{X(!0)},0);return()=>clearTimeout(e)}X(!0)},[O]);let q=O&&!j,Z=O&&j,Q=a.useRef(null),ea=a.useId(),[er,el]=(0,_.fp)(G.hV),{position:ei,dragItem:ec}=(0,z.h4)(()=>({type:nW,element:Q,item:{action:p.action,actionIndexPath:new tS.Op(p.actionIndexPath)},dropPositionThreshold:Z?.2:q?1/3:.5,getDeepestTargetOnly:!0,canDrag:!!V||!j,onDrop(e){p.onDrop(e),el(!0)}})),es=a.useMemo(()=>{let e=Q.current;if(!e||!ei||K)return;if(ec&&"CONDITIONAL"===ec.connectionType&&p.isNestedInConditional||(0,tS.qQ)(ec)){el(!1);return}let t=C?z.Nz.BEFORE:ei;var n=void 0;let o=e.offsetParent?.firstElementChild?.scrollTop??0;return t===z.Nz.BEFORE?n=e.offsetTop-o:t===z.Nz.AFTER&&(n=e.offsetTop+e.offsetHeight-o),el(!0),n},[ei,K,ec,p.isNestedInConditional,C,el]),ed=ei&&O&&!j&&ei===z.Nz.INSIDE&&"CONDITIONAL"!==ec.connectionType,ep=f.rf(p.recordingKey,"mousedown",e=>{j||(F=!0,p.onSelect(p.actionIndexPath,!0))}),eu=f.rf(p.recordingKey,"mousedown",e=>{F=!1,p.onSelect(p.actionIndexPath,!1)}),e_=f.rf(p.recordingKey,"click",e=>{p.onSelect(p.actionIndexPath,!0)}),eE=f.rf(p.recordingKey,"mousedown",e=>{(0,tS.qQ)(p.action)||p.onSelect(p.actionIndexPath,!0)}),eg=e=>{var n=!0,o=!1;switch(e){case"NONE":t({connectionType:"NONE"});break;case"NAVIGATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"NAVIGATE"});break;case"OPEN_OVERLAY":t({connectionType:"INTERNAL_NODE",navigationType:"OVERLAY"});break;case"SCROLL_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SCROLL_TO"});break;case"SWAP_WITH":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP"});break;case"SWAP_STATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP_STATE"});break;case"GO_BACK":t({connectionType:"BACK"});break;case"CLOSE_OVERLAY":t({connectionType:"CLOSE"});break;case"OPEN_URL":t({connectionType:"URL"});break;case"SET_VARIABLE":u?(n=!1,E()):(t({connectionType:"SET_VARIABLE"}),i.current=!0);break;case"SET_VARIABLE_MODE":u?(n=!1,E()):t({connectionType:"SET_VARIABLE_MODE",targetVariableSetID:T,targetVariableModeID:N});break;case"UPDATE_MEDIA_PLAY":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PLAY"});break;case"UPDATE_MEDIA_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PAUSE"});break;case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_PLAY_PAUSE"});break;case"UPDATE_MEDIA_MUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"MUTE"});break;case"UPDATE_MEDIA_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"UNMUTE"});break;case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_MUTE_UNMUTE"});break;case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_FORWARD"});break;case"UPDATE_MEDIA_SKIP_BACKWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_BACKWARD"});break;case"UPDATE_MEDIA_SKIP_TO":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_TO"});break;case"CONDITIONAL":o=!0,u?(n=!1,y()):(t({connectionType:"CONDITIONAL"}),w&&d&&d(!0))}if(w||j||$(),M&&p.onExpand(p.actionIndexPath,o),n){let t=l.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>h.d({nodeID:e.sourceNodeID,interactionID:e.id}));m((0,R._P)({name:"Prototype action changed",params:{action:e,source:"panel",connectorIds:JSON.stringify(t)}}))}},ey=p.isNestedInConditional?eI.It:eI.ft,ev=g()({[eI.wu]:!V,[eI.zX]:V&&er}),ef=a.createElement(b.U,{svg:nG.A},a.createElement(ee,{className:eI._2}));if(C&&p.onAddAction)return a.createElement("div",{className:V?eI.LW:void 0},es&&a.createElement("hr",{className:ey,style:{transform:`translateY(${es}px)`}}),V&&p.isNestedInConditional&&ef,a.createElement("div",{className:ev,ref:Q},a.createElement(tC.t,{addButtonPressed:p.onAddAction,recordingKey:f.Pt(p.recordingKey,"addAction"),isNestedInConditional:!0})));let eN=(0,en._X)(P),eT="NONE"!==eN,eb=(j||!eT)&&!V,eA=p.numActions>1,eS=(p.numActions>1||p.isNestedInConditional)&&!V,eC=g()({[eI.$l]:!0,[eI.KY]:V&&!p.isNestedInConditional,[eI.Iw]:V&&!p.isNestedInConditional&&er,[eI.DM]:V&&p.isNestedInConditional,[eI.vs]:V&&p.isNestedInConditional&&er,[eI.M9]:V&&p.isNestedInConditional&&W&&er,[eI.I_]:V&&O&&!F&&er,[eI.Cu]:F&&!w,[eI.PE]:F&&V&&!p.isNestedInConditional,[eI.Ze]:ed,[eI.Op]:p.isNestedInConditional&&!w}),eO=g()({[eI.rn]:!0,[eI.Gu]:V,[eI.Ti]:p.isNestedInConditional&&!w&&!K,[eI.Yo]:p.isNestedInConditional&&w&&!K}),ex=a.createElement(H.B,{key:"expand-caret",className:eI.GE,svg:j?nv.A:nf.A,recordingKey:f.Pt(p.recordingKey,"expandCaret"),onClick:$}),ew=a.createElement(eP,{action:P,isNestedInConditional:p.isNestedInConditional,isNarrowPanel:p.isNarrowPanel&&eA,onClick:w?e_:void 0}),eD=a.createElement(em,{dispatch:m,dropdownShown:v,onChange:eg,action:eN,recordingKey:f.Pt(p.recordingKey,"actionDropdown"),showVideoActions:I,isNestedInConditional:p.isNestedInConditional}),ek=a.createElement(Y.K0,{className:w?eI.gG:eI.hH,onClick:n,"data-tooltip-type":L.Ib.TEXT,"data-tooltip":(0,A.t)("proto.prototype_panel.delete"),"aria-label":(0,A.t)("proto.prototype_panel.delete"),recordingKey:f.Pt(p.recordingKey,"actionDeleteButton")},a.createElement(b.U,{svg:nz.A},a.createElement(c.O,null))),eR=a.createElement(Y.fI,{className:eO,onDoubleClick:$},B&&ex,eb?a.createElement("span",{className:eI.P2},eD):ew,eS&&ek),eM=eb?eD:ew,eL=a.createElement(et.S.div,{className:eO,onDoubleClick:$},B&&ex,eS?a.createElement(e2.DE,{labelId:ea,appendedClassName:eI.Jw,label:null,input:eM,icon:ek}):a.createElement(e2.Ad,{appendedClassName:eI.Jw,label:null,input:eM})),eU=a.createElement(et.S.div,{className:eO},k||K?a.createElement(eV.A,{label:(0,A.t)("proto.action"),input:eM}):eM),eK=w?eU:eL,eB=g()({[eI.Oe]:!0,[eI.h2]:F,[eI.Ob]:O});return a.createElement(et.S.div,{className:eC,ref:Q,role:"button",tabIndex:0,onMouseDown:w?void 0:ep,onMouseUp:w?void 0:eu},void 0!==es&&a.createElement("hr",{className:ey,style:{transform:`translateY(${es}px)`}}),V?a.createElement(et.S.div,{className:eB,role:"button",tabIndex:0,onMouseDown:w?eE:void 0},p.isNestedInConditional&&ef,eK):w?eK:eR,j&&J&&a.createElement(nF,{action:P,actionIndexPath:p.actionIndexPath,autoOpenExpressionBuilder:s,autoOpenVariablePicker:i,expandedRows:p.expandedRows,handleMouseDownUI3:eE,interactionType:p.interactionType,isNarrowPanel:p.isNarrowPanel,isNestedInConditional:p.isNestedInConditional,onActionChange:eg,onDrop:p.onDrop,onExpand:p.onExpand,onNewActionAdded:p.onNewActionAdded,onSelect:p.onSelect,recordingKey:p.recordingKey,selectedActionIndex:p.selectedActionIndex,selectedInteractions:l,setAutoOpenExpressionBuilder:d,stateManagementVersion:o,updateMultipleDestinationNodes:e,updateSelectionProperties:t}))}var nH=n(138810),nj=n(589776),n$=n(275210);function nJ({onChange:e,value:t,shouldFocusKeyCaptureField:n,setShouldFocusKeyCaptureField:o}){let r;let l=(0,n$._i)(t?.keyCodes),i=t=>e({keyCodes:t,triggerDevice:"KEYBOARD"}),[c,s]=a.useState(!1),d=a.useRef(null);a.useEffect(()=>{(!t||!t.keyCodes||0===t.keyCodes.length)&&n&&d.current&&(o(!1),d.current.focus(),s(!0))},[o,n,t]),a.useEffect(()=>{if(!c)return()=>{};let t=new nj.L,n=t.onPress(t=>{e({keyCodes:[t.buttons[0]],triggerDevice:t.controllerType}),requestAnimationFrame(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})});return t.start(),()=>{n.release(),t.end()}},[e,c]);let p=null,m=(0,n$.E8)(t),u=(0,S.GS)();return c?r=a.createElement(nX,null,u?(0,A.tx)("proto.keyCapture.press_key_lowercase"):(0,A.tx)("proto.keyCapture.press_key")):t?.triggerDevice==="KEYBOARD"&&l?p=(0,n$.U8)(l):m?p=m:r=a.createElement(nX,null,u?(0,A.tx)("proto.keyCapture.click_to_set_key"):(0,A.tx)("proto.keyCapture.click_to_select")),a.createElement(Y.rp,{ref:d,className:"prototype_key_capture_field--root--bD21s","data-tooltip-type":L.Ib.TEXT,"data-tooltip":p&&p.length>10?p:null,onFocus:()=>s(!0),onBlur:()=>s(!1),onKeyDown:e=>{e.preventDefault(),e.stopPropagation();let t=e.which||e.keyCode;!n$.RI.has(t)&&n$.pu[t]&&(t===l?.keyCode&&e.repeat?i((0,n$.wb)({keyCode:t,metaKey:e.metaKey||l.metaKey,shiftKey:e.shiftKey||l.shiftKey,ctrlKey:e.ctrlKey||l.ctrlKey,altKey:e.altKey||l.altKey})):i((0,n$.wb)({...e,keyCode:t})),document.activeElement instanceof HTMLElement&&document.activeElement.blur())},recordingKey:"keycapture"},p??r)}function nX({children:e}){return a.createElement("span",{className:"prototype_key_capture_field--placeholder--gWUKF"},e)}var nq=n(113326),nZ=n(966369);let nQ=eB.l6,n0=eB.c$,n1=new en.VG,n5=new en.EX,n3=new en.JV,n2=new en.Eq;function n4(e){let t=(0,r.wA)(),n=(0,eo.Um)(),o=(0,S.GS)(),l=(0,Z.cJ)(),{showVideoV2Triggers:i}=(0,e4.R)(e=>({allStatesInSelection:e.mirror.selectionProperties.stateGroupSelectionInfo?.mode===d.iCO.STATE,allTopLevelFramesInSelection:!!e.mirror.selectionProperties.allTopLevelFramesInSelection,showVideoV2Triggers:(0,ec.dq)(e.mirror.selectionProperties)})),c=(0,_.md)(nZ.NE),s=t=>{let n=a.createElement("div",{className:"transition_interaction_dropdown--prototypeInteractionIcon---njby"},(0,ec.e7)(t));return a.createElement(n0,{key:t,value:t,icon:o?n:void 0,recordingKey:f.Pt(e,t),disabled:!function(t){if("NONE"===t)return!0;let n=!!e.interactionsOnSelectedNodes&&e.interactionsOnSelectedNodes.every(t=>e.interactionsOnSelectedNodes&&m.aI(t.sourceNodeID,e.interactionsOnSelectedNodes[0].sourceNodeID))&&!(0,x.hS)(e.property),o=(function(){if(e.interactionsOnSelectedNodes)return new Set(e.interactionsOnSelectedNodes.map(e=>e?.event?.interactionType).filter(e=>void 0!==e))})()?.has(t)&&(0,x.hS)(e.property)&&e.property!==t;return(!n&&!o||!!["ON_KEY_DOWN","DRAG","ON_VOICE","ON_MEDIA_HIT"].includes(t))&&("AFTER_TIMEOUT"===t?!e.interactionContainsOpenLinkAction:"ON_MEDIA_HIT"===t||"ON_MEDIA_END"===t?i:(!e.interactionContainsOpenLinkAction||"ON_CLICK"===t||"MOUSE_UP"===t)&&(!e.interactionContainsUpdateMediaRuntime||"ON_HOVER"!==t&&"ON_PRESS"!==t&&"DRAG"!==t)&&(!e.interactionOnlyContainsBack||"ON_HOVER"!==t&&"ON_PRESS"!==t))}(t)})},p=(l?[]:["NONE"]).map(s),u=["ON_CLICK",...l?[]:["DRAG"],"ON_HOVER","ON_PRESS","ON_KEY_DOWN"].map(s),E=["MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].map(s),g=(l?[]:["ON_MEDIA_HIT","ON_MEDIA_END"]).map(s),y=["AFTER_TIMEOUT"].map(s),h=c?"ON_MEDIA_HIT"!==e.property?n5:n2:"ON_MEDIA_HIT"!==e.property?n1:n3,v=a.useCallback(e=>e-24,[]),I=[...p,!l&&a.createElement(eB.sK,{key:"select1"}),...u,a.createElement(eB.sK,{key:"select2"}),...E,!l&&a.createElement(eB.sK,{key:"select3"}),...y,...!l&&i?[a.createElement(eB.sK,{key:"select4"}),...g]:[]],[N,T]=a.useState(void 0),b=a.createElement(nq.Q,{setMaxWidth:T,options:I,formatOption:e=>e&&e.props.value?h.format(e.props.value):"",getIcon:()=>(0,ec.e7)("AFTER_TIMEOUT")}),A=(0,x.E7)(e.property);return a.createElement(a.Fragment,null,a.createElement(nQ,{ariaLabel:e.ariaLabel,ariaLabelledBy:e.ariaLabelledBy,chevronClassName:"transition_interaction_dropdown--chevron--pyzhq",className:e.className,dataTestId:"interaction-select",dispatch:t,dropdownAlignment:v,dropdownShown:n,dropdownWidth:N,formatter:h,hideDropdownWhenContainerMoves:!(0,tV.nl)(),icon:o&&A?(0,ec.e7)(A):void 0,id:"interaction-type-select",onChange:e.onChange,property:e.property,recordingKey:f.Pt(e,"select")},I),b)}let n8={keyCodes:[],triggerDevice:"KEYBOARD"};function n6(e,t,n,o){return n?a.createElement(eV.A,{label:e,input:t,appendedClassName:o?void 0:eI.dU}):a.createElement(Y.fI,null,t)}function n7(e){let{detailPropsMultipleActions:t,interactionsOnSelectedNodesAndComponents:n,updateSelectionProperties:o}=(0,nB.Ay)(e.category),{interactionType:l="NONE",transitionTimeout:i=.8,mediaHitTime:c=0,interactionMaintained:s=!1,interactionDuration:d=.3,keyTrigger:p=n8}=t.interactionEvent,m=(e,t)=>{if(e.connectionType===t)return e;if("CONDITIONAL"===e.connectionType)for(let n of(0,x.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]){let e=n.actions?n.actions.find(e=>e.connectionType===t):void 0;if(void 0!==e)return e}return null},u=void 0!==t.interactionActions.find(e=>m(e,"URL")),_=void 0!==t.interactionActions.find(e=>m(e,"UPDATE_MEDIA_RUNTIME")),E=1===t.interactionActions.length&&"BACK"===t.interactionActions[0].connectionType,y=void 0!==t.interactionActions.find(e=>m(e,"CONDITIONAL"));return function(e){let t=(0,r.wA)(),n=e.updateSelectionProperties,o=(0,nO.RU)(),[l,i]=a.useState(!1),c=(0,S.GS)(),s=(0,G.YT)(),d=s===G.Oz.SINGLE_COL,p=s===G.Oz.TWO_COL,m=!0===(0,x.E7)(e.maintained),u=(0,x.E7)(e.keyTrigger),_="ON_KEY_DOWN"===(0,x.E7)(e.interactionType),E="AFTER_TIMEOUT"===(0,x.E7)(e.interactionType),y="ON_MEDIA_HIT"===(0,x.E7)(e.interactionType),h=["MOUSE_IN","MOUSE_OUT","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].indexOf((0,x.E7)(e.interactionType)||"")>-1,v=a.useId(),I=a.createElement(n4,{ariaLabel:(0,A.t)("proto.trigger"),ariaLabelledBy:v,className:eI.sQ,interactionContainsOpenLinkAction:e.interactionContainsOpenLinkAction,interactionContainsUpdateMediaRuntime:e.interactionContainsUpdateMediaRuntime,interactionOnlyContainsBack:e.interactionOnlyContainsBack,interactionsOnSelectedNodes:e.interactionsOnSelectedNodes,onChange:o=>{B.sn.start("interaction_details_changed"),n({interactionType:o}),t((0,R._P)({name:"Prototype Interaction Type Changed",params:{newType:o,oldType:(0,x._W)(e.interactionType,"MIXED")}})),"ON_KEY_DOWN"===o&&i(!0)},property:e.interactionType,recordingKey:f.Pt(e,"interactionDropdown")}),N=c?d?a.createElement(eV.A,{labelId:v,label:(0,A.t)("proto.trigger"),input:I}):a.createElement("div",{className:eI.BX},I):a.createElement(Y.fI,{className:g()(eI.SG,eI.QT)},I,a.createElement("div",{className:eI.LY},e.headerButtons)),T=a.createElement(a.Fragment,null,E&&n6((0,A.t)("proto.delay"),a.createElement(to.W4,{className:c?eI.Lp:eI.Zp,"data-tooltip":(0,A.t)("proto.trigger.after_delay_timeout"),"data-tooltip-type":L.Ib.TEXT,dataTestId:"timeout-input",dispatch:t,inputClassName:c?eI.Gl:void 0,max:20,onValueChange:e=>{n({transitionTimeout:e})},recordingKey:f.Pt(e,"timeoutInput"),scrubMultiplier:o/1e3,tooltipForScreenReadersOnly:!0,value:e.timeout,wheelMultiplier:o/1e3},c?a.createElement(nH.A,null):void 0),c,d),_&&n6((0,A.t)("proto.key"),a.createElement(nJ,{onChange:e=>{n({keyTrigger:e})},value:u,shouldFocusKeyCaptureField:l,setShouldFocusKeyCaptureField:i}),c,d),y&&n6((0,A.t)("proto.time"),a.createElement(to.qd,{className:eI.Ym,"data-tooltip":(0,A.t)("proto.trigger.video_hit_time"),"data-tooltip-type":L.Ib.TEXT,dataTestId:"mediaHitTime-input",dispatch:t,displayFractions:!0,inputClassName:eI.vE,max:3600,onValueChange:e=>{n({mediaHitTime:e})},recordingKey:f.Pt(e,"mediaHitTimeInput"),scrubMultiplier:o/1e3,tooltipForScreenReadersOnly:!0,value:e.mediaHitTime,wheelMultiplier:o/1e3},c?a.createElement(nD,null):void 0),c,d),h&&n6((0,A.t)("proto.delay"),a.createElement(to.W4,{allowEmpty:!0,className:c?eI.Lp:eI.aq,"data-tooltip":(0,A.t)("proto.trigger.after_delay_timeout"),"data-tooltip-type":L.Ib.TEXT,dataTestId:"duration-input",dispatch:t,inputClassName:c?eI.Gl:eI.p0,min:0,onValueChange:e=>{n(e&&e>0?{interactionMaintained:!0,interactionDuration:e}:{interactionMaintained:!1})},placeholder:(0,A.t)("proto.trigger.add_delay_placeholder"),recordingKey:f.Pt(e,"delayInput"),scrubMultiplier:o/1e3,tooltipForScreenReadersOnly:!0,value:m?e.interactionDuration:void 0,wheelMultiplier:o/1e3},c?a.createElement(nH.A,null):void 0),c,d));return c?a.createElement("div",{className:p?eI.eU:void 0},N,T):a.createElement("div",{className:eI.cF},N,T)}({...e,updateSelectionProperties:o,interactionType:l,interactionContainsOpenLinkAction:u,interactionContainsUpdateMediaRuntime:_,interactionOnlyContainsBack:E,interactionContainsConditionalAction:y,timeout:i,maintained:s,interactionDuration:d,mediaHitTime:c,keyTrigger:p,interactionsOnSelectedNodes:n,recordingKey:f.Pt(e.recordingKey,G.Qe)})}let n9="prototype_interaction_edit_modal--contentContainer--bo2b4",oe="prototype_interaction_edit_modal--ui3TwoColContentContainer--x9vrG",ot="prototype_interaction_edit_modal--ui3SingleColContentContainer--uF-ir",on="prototype_interaction_edit_modal--ui3CollapsedModalHeaderButtons--7yPuD",oo="prototype_interaction_edit_modal--dividerHorizontal--3wvnB",oa="prototype_interaction_edit_modal--ui3InteractionsPanelContentRight--bVfG8";function or(e){let{selectedInteractions:t,makeUpdateSelectionPropertiesForActionIndex:n,makeUpdateMultipleDestinationNodesForActionIndex:o,differentLengthActions:r,mergedActions:l}=(0,nB.Ay)(e.category,e.filterOutNoneActions),i="NONE"!==(0,x.E7)(e.interactionType),c=void 0!==l.find(e=>"CONDITIONAL"===e.connectionType),{selectedActionIndex:s,onSelect:d}=e,p=(0,S.GS)(),m=(0,G.YT)(),u=m===G.Oz.SINGLE_COL,_=m===G.Oz.TWO_COL,{expandedRows:E,setExpandedRows:y,deleteButtonPressed:h,newActionIndexPath:v,resetNewActionIndexPath:I}=e,N=(0,Z.cJ)()&&"ON_CLICK"===(0,x.E7)(e.interactionType)&&1===l.length&&void 0!==l.find(e=>e.connectionURL||"NAVIGATE"===e.navigationType);a.useEffect(()=>{v&&!v?.equals([])&&(p?d(v.path,!0):(y([...E,v]),d([],!1)),I())},[E,y,v,I,d,p]);let T=a.useCallback(e=>{E.find(t=>t.equals(e))?y(E.filter(t=>!t.equals(e))):y([...E,new tS.Op(e)])},[E,y]),b=a.useCallback(n=>{var o=n.dropItem;if((0,x.gl)(o)||(0,tS.qQ)(n.dragItem.action))return;let a=e.interactionsOnSelectedNodes;if(!a||!t)return;for(var r=0;r<t?.length;r++){let e=t[r];if(e&&e.actions){let a=e.actions,l=(0,tS.Vp)(a,s,E,o,n.position);if(l.newSelectedActionIndex&&_&&d(l.newSelectedActionIndex.path,!0),l.newActions&&(t[r].actions=l.newActions,p||d([],!1)),l.newExpandedRows){if(_){let e=[];l.newActions?.forEach((t,n)=>{"CONDITIONAL"===t.connectionType&&e.push(new tS.Op([n]))}),y(e)}else y(l.newExpandedRows)}}}let l=a.map(e=>t.find(t=>t.id===e.id)??e);C.Y5.updateSelectionProperties({prototypeInteractions:l})},[E,y,e.interactionsOnSelectedNodes,s,t,d,p,_]),P=g()({"prototype_interaction_edit_modal--panelUI3--WK3CN":p,"prototype_interaction_edit_modal--panelUI3TwoColumn--V5gi4":_});return N?a.createElement(q.rC,{isInteractionModal:!0}):a.createElement(z.hh,null,a.createElement(Y.Zk,{className:P},e.shouldHideTitle?null:a.createElement(Y.fI,null,a.createElement(Y.U8,{title:(0,A.t)("proto.interaction.interaction"),dataTooltipContentKey:X,dataTooltipTimeoutDelay:50})),a.createElement("div",null,(i||p)&&a.createElement(a.Fragment,null,u&&a.createElement(a.Fragment,null,a.createElement(n7,{category:e.category,recordingKey:G.dJ,headerButtons:a.createElement(a.Fragment,null)}),a.createElement("div",{className:"prototype_interaction_edit_modal--dividerHorizontalUI3--HMCeE"})),r&&a.createElement(W.Y,{direction:"horizontal",padding:{horizontal:16,vertical:12}},a.createElement(Y.nV,null,(0,A.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content"))),!r&&a.createElement(a.Fragment,null,l?.map((r,i)=>a.createElement(nY,{key:i,action:r,actionIndexPath:[i],autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,autoOpenVariablePicker:e.autoOpenVariablePicker,expandedRows:E,interactionType:e.interactionType,isNarrowPanel:!c,isNestedInConditional:!1,numActions:l.length,onDeleteAction:()=>h(i),onDrop:b,onExpand:T,onNewActionAdded:e.onNewActionAdded,onSelect:e.onSelect,recordingKey:f.Pt(e.recordingKey,G.eG,i),selectedActionIndex:s,selectedInteractions:t,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder,stateManagementVersion:e.stateManagementVersion,updateMultipleDestinationNodes:o(i),updateSelectionProperties:n(i)})))))))}var ol=n(531788),oi=n(952039);function oc({transition:e,recordingKey:t,updateSelectionProperties:n,stateManagementVersion:o,selectedInteractions:l}){let i=(0,r.wA)(),c=(0,S.GS)(),s=(0,G.YT)()===G.Oz.SINGLE_COL,d=()=>{for(let t of(V.definedAnalyticsHandler.trackDefinedEvent("prototype.state_management_noodle_upgraded",{num_interactions:l.length,preserve_scroll_position_value:!!e.preserveScroll}),l))(0,G.uU)(t.stateManagementVersion)&&t.id&&t.sourceNodeID&&nm.zZ.recordInteractionUpgraded(t.id,t.sourceNodeID);n({...(0,x.hS)(e.preserveScroll)&&(0,x.hS)(o)?{transitionResetScrollPosition:!e.preserveScroll}:{},stateManagementVersion:1}),i(oi.F.enqueue({type:"state-management-updated",message:(0,A.t)("proto.state_management.visual_bell_updated_message"),button:{text:(0,A.t)("proto.state_management.visual_bell_update_all"),action:()=>{C.Y5.triggerActionInUserEditScope("update-interactions-state-management-on-page"),i(oi.F.enqueue({type:"state-management-updated-all",message:(0,A.t)("proto.state_management.visual_bell_update_all_message")}))}}}))},p=()=>{V.definedAnalyticsHandler.trackDefinedEvent("prototype.state_management_noodle_reverted",{num_interactions:l.length}),n({stateManagementVersion:0})},m=1===o?a.createElement(ol.$n,{variant:"link",recordingKey:f.Pt(t,"revert-state-management-version"),onClick:p,htmlAttributes:{"data-testid":"revert-state-management-button"}},(0,A.tx)("proto.state_management.revert_controls")):a.createElement(ol.$n,{variant:"secondary",recordingKey:f.Pt(t,"update-state-management-version"),onClick:d},(0,A.tx)("proto.state_management.update_controls")),u=s?ol.IK:ol.$n,_=1===o?a.createElement(u,{variant:"secondary",onClick:p,recordingKey:f.Pt(t,"revert-state-management-version"),htmlAttributes:{"data-testid":"revert-state-management-button"}},(0,A.tx)("proto.state_management.revert_controls")):a.createElement(u,{variant:"primary",onClick:d,recordingKey:f.Pt(t,"update-state-management-version")},(0,A.tx)("proto.state_management.update_controls")),E=1===o?(0,A.tx)("proto.state_management.new_controls"):(0,A.tx)("proto.state_management.old_controls"),g=a.createElement(nu.N,{trusted:!0,newTab:!0,href:"https://help.figma.com/hc/articles/14397859494295"},c?(0,A.tx)("proto.state_management.controls_help_link_new"):(0,A.tx)("proto.state_management.controls_help_link")),y=a.createElement("div",{className:"prototype_state_management_version_panel--versionControls--siAOf"},a.createElement(Y.JU,{className:"prototype_state_management_version_panel--label--vvYMX"},E,g),a.createElement("div",{className:"prototype_state_management_version_panel--buttonContainer--rJZ-y"},m)),h=a.createElement("div",{className:"prototype_state_management_version_panel--containerUI3--V5tpG"},a.createElement(er.J,null,E),a.createElement(er.J,null,g),_),v=a.createElement("div",{className:"prototype_state_management_version_panel--containerUI3TwoCol--AAp8u"},a.createElement("span",{className:"prototype_state_management_version_panel--labelWrapperUI3--37g5A"},a.createElement(er.J,null,E)),a.createElement("span",{className:"prototype_state_management_version_panel--helpLinkWrapperUI3--BttuC"},g),_);return a.createElement(nd.k,{name:"prototype_state_management_version_panel"},a.createElement(Y.Zk,{className:c?"prototype_state_management_version_panel--panelUI3--8-Db5":void 0},c?s?h:v:y))}let os="created_noodle";function od(e){let{shouldHideTitle:t=!1,category:n,newActionIndexPath:o}=e,r=(0,G.YT)()===G.Oz.TWO_COL,{detailProps:l,detailPropsMultipleActions:i,interactionsOnSelectedNodesAndComponents:c,updateSelectionProperties:s,selectedInteractions:d}=(0,nB.Ay)(e.category,e.filterOutNoneActions);(0,F.h)(()=>{if(void 0!==B.sn.get(os)){let e=B.sn.stop(os);(0,V.trackEvent)(os,{elapsedMs:e,numConnectors:d.length},{forwardToDatadog:!0})}});let{showPanel:p,transition:m}=(0,G.n6)(l,i,d),{interactionType:u="NONE",interactionMaintained:_=!1,interactionDuration:E=.3,keyTrigger:g=n8,transitionTimeout:y=.8,mediaHitTime:h=0}=i.interactionEvent,v=(0,G.iC)(d),I=a.createElement(or,{autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,autoOpenVariablePicker:e.autoOpenVariablePicker,category:n,deleteButtonPressed:e.deleteButtonPressed,expandedRows:e.expandedRows,filterOutNoneActions:e.filterOutNoneActions,interactionDuration:E,interactionType:u,interactionsOnSelectedNodes:c,keyTrigger:g,maintained:_,mediaHitTime:h,newActionIndexPath:o,onNewActionAdded:e.onNewActionAdded,onSelect:e.onSelect,recordingKey:f.Pt(e,G.Qe),resetNewActionIndexPath:e.resetNewActionIndexPath,selectedActionIndex:e.selectedActionIndex,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder,setExpandedRows:e.setExpandedRows,shouldHideTitle:t,stateManagementVersion:v,timeout:y});return a.createElement("div",null,I,!r&&p&&a.createElement(oc,{transition:m,recordingKey:f.Pt(e,"stateManagementVersionPanel"),updateSelectionProperties:s,stateManagementVersion:v,selectedInteractions:d}))}var op=n(756912),om=n(124213),ou=n(812051),o_=n(941606);function oE(e,t,n){let[o,a,r]=e.path;if(void 0===o||void 0===a||void 0===r)return;let l=t[o]?.conditionalActions;if((0,x.hS)(l)){let e=l?.[a]?.actions?.length??0;if(r>=e){if(0===e){n([o],!0);return}n([o,a,r-1],!0);return}}}function og(e,t,n){let o=e.path[0]>=t.length,a=0===e.path.length;if(o){n([t.length-1],!0);return}if(a){n([0],!0);return}}var oy=n(786175),oh=n(397228);let ov=()=>{d.glU?.setSelectedInteractions([]),(0,u.k)().prototype_ai_magic_link_show_suggestion_toast&&C.Y5.showMagicLinkSuggestedVisualBell("create_node_transition"),C.Y5.deselectProperty()},of=(0,y.jz)("197px"),oI=(0,y.c8)("50%");function oN(e){var t;return e&&o?.height<369?o=t={...o,height:369}:o??={width:440,height:e?369:320,leftWidthPct:45}}let oT=a.memo(function({filterOutNoneActions:e}){let t=(0,r.d4)(oC),n=(0,nB.HS)(),{selectedInteractions:o}=(0,nB.Ay)(n,e),l=o.length>0,[i,c]=a.useState(!1),s=f.v_(G.dJ,"keydown",e=>"Shift"!==e.key?f.aH:(c(!0),t&&l)?void 0:f.aH),d=f.v_(G.dJ,"keyup",e=>"Shift"!==e.key?f.aH:(c(!1),t&&l)?void 0:f.aH);if(a.useEffect(()=>(document.addEventListener("keydown",s),document.addEventListener("keyup",d),()=>{document.removeEventListener("keydown",s),document.removeEventListener("keyup",d)}),[s,d]),(0,ou.G7)()||!t||!l)return null;let p=o.some(e=>e.actions?.some(e=>"CONDITIONAL"===e.connectionType));return a.createElement(ob,{category:n,containsConditional:p,pressingShiftKey:i,initialX:t.initialX,initialY:t.initialY,shouldPin:t.shouldPin,setPressingShiftKey:c,filterOutNoneActions:e})}),ob=a.memo(function({category:e,containsConditional:t,pressingShiftKey:n,initialX:s,initialY:E,shouldPin:v,setPressingShiftKey:P,filterOutNoneActions:x}){let V=(0,r.wA)(),[B,F]=a.useState(!1),[,z]=(0,_.fp)(o_.x),W=(0,a.useRef)(null),[Y,H]=a.useState(0),j=v||B,$=(0,S.GS)(),J=(0,G.YT)(),X=J===G.Oz.SINGLE_COL,q=J===G.Oz.TWO_COL,[Q,ee]=a.useState(new tS.Op($?[0]:[])),{selectedInteractions:et,differentLengthActions:en,interactionsOnSelectedNodesAndComponents:eo,mergedActions:ea,detailProps:er,detailPropsMultipleActions:el,updateSelectionProperties:ei}=(0,nB.Ay)(e,x),ec=el.interactionEvent.interactionType??"NONE",es=(0,Z.cJ)();var ed=Q.path.length>0?Q:new tS.Op([0]);let ep=ed.isConditional(),em=(e,t)=>ed=new tS.Op(e);$&&ed.path[0]>=ea.length&&!ep?og(Q,ea,em):$&&ep&&oE(Q,ea,em);let eu=a.useCallback((e,t)=>{t?ee(new tS.Op(e)):ee(new tS.Op([]))},[]);a.useEffect(()=>{if(0===ea.length){(0,I.us)("the interactions panel should always have actions if rendered");let e=JSON.parse(JSON.stringify(et));for(let t of e)if(t&&t.actions?.length===0){let e={connectionType:"NONE"};t.actions=[e]}let t=eo.map(t=>e.find(e=>m.aI(e.id,t.id))??t);C.Y5.updateSelectionProperties({prototypeInteractions:t})}if(!$)return;let e=Q.isConditional();if(e){if(e){oE(Q,ea,eu);return}}else{og(Q,ea,eu);return}},[ea,Q,$,eu,et,eo]);let{shouldShowAdvancedPrototypingPaywall:e_,showAdvancedPrototypinglMultipleActionsModal:eE}=(0,G.zt)(),{showPanel:eg,transition:ey}=(0,G.n6)(er,el,et),ev=(0,G.iC)(et);var ef=[];q?ea.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&ef.push(new tS.Op([t]))}):ea.length<4&&ea.forEach((e,t)=>{ef.push(new tS.Op([t]))});let[eI,eN]=a.useState(ef),eT=a.useRef(null),eb=n&&!j&&Y<=((0,u.k)().fpl_draggable_modal_a11y?1:0),eA=(0,y.jz)(oy.prototypeInteractionModalWidth),eP=(0,y.jz)(oy.prototypeInteractionModalExpandedWidth),eS=oN(eg).width,eC=t?eP:eA;q&&(eC=eS);let[eO,ex]=a.useState(v),ew=(0,w._X)({subscribeToUpdates_expensive:!v}),eD=a.useCallback(()=>{B||(V((0,R._P)({name:"prototype_interaction_details_modal_dragged"})),F(!0))},[V,B,F]),ek=a.useMemo(()=>{let e=new N.Mi(s,E);if(v)return q?new N.Mi(e.x-(eS-eA),e.y):t?new N.Mi(e.x-(eP-eA),e.y):e;{let t=(0,w.$g)(ew,e);return new N.Mi(t.x-eC/2,t.y+30)}},[eC,s,E,t,v,ew,q,eP,eA,eS]);a.useEffect(()=>{if(!n)return;let e=e=>{!e.shiftKey&&n&&P(!1)};return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e)}},[n,P]),a.useEffect(()=>{z(eb)},[z,eb]),a.useEffect(()=>{ex(v)},[v]),a.useEffect(()=>()=>{V((0,R._P)({name:"prototype_interaction_details_modal_closed"}))},[V]);let eR=(0,_.md)(om.uW);a.useEffect(()=>{es&&eR?.focus()},[es,eR]);let eM=a.useRef(null),[eL,eU]=a.useState(!1);a.useEffect(()=>{eL&&(eU(!1),eM.current?.scrollToBottom())},[eL,eU,eM]);let[eK,eV]=a.useState(new tS.Op([])),eB=(0,k.q5)(),eF=a.useCallback((e,t)=>{let n=e.event.clipboardData||window.clipboardData;switch(t){case M.zy.COPY:case M.zy.CUT:{let o=JSON.parse(JSON.stringify(et)),a=(0,op.lg)(o),r=O.fG(eB?.key||null,{prototypeInteractions:a});if(!r)break;if(O.C4(n,r,""),t===M.zy.CUT){let e=[];for(let t of et){let{sourceNodeID:n,id:o}=t;n&&o&&e.push(h.d({nodeID:n,interactionID:o}))}p.l7.user("delete-prototype-interactions",()=>d.glU?.deleteInteractions(e)),C.Y5.deselectProperty()}e.accept()}}},[eB?.key,et]),eG=a.useRef(!1),[ez,eW]=a.useState(!1),{firstVariableSetMode:eY,firstVariableSetID:eH}=eX(),ej=(0,D.p8)("currentPage"),e$=a.useCallback((e,t,n,o)=>{V((0,R._P)({name:"Prototype delete action",params:{action:e,source:"panel",connector_id:t,page_id:n,actionInConditionalAction:o}}))},[V]),eJ=a.useCallback(e=>{if(eo&&et){var t=!1,n=!1;if(e_)eE();else{for(let r=0;r<et?.length;r++){let l=et[r],i=[];if(l&&l.actions){var o=0,a=[];for(let r=0;r<l.actions.length;r++){let c=l.actions[r];if(r!==e)void 0!==eI.find(e=>e.equals([r]))&&a.push(new tS.Op([o])),i.push(c),o++;else{let e=l.id?l.id:m.Hr;e$(c.connectionType?c.connectionType:"NONE",(0,m.dI)(e),ej),r===l.actions.length-1&&(t=!0),2===l.actions.length&&(n=!0)}eN(a)}et[r].actions=i}}let r=eo.map(e=>et.find(t=>t.id===e.id)??e);C.Y5.updateSelectionProperties({prototypeInteractions:r}),n&&$&&eN([new tS.Op([0])]),t&&q&&ee(new tS.Op([e-1]))}}},[eo,et,e_,eE,eI,ej,e$,q,$]),eq=a.useCallback(e=>{if(!eo||!et||!e.path.length||void 0===e.path[0])return;let[t,n,o]=e.path,a=e.isConditional();if(e_)eE();else if(a){let e=!1,a=!1,r=et.map(r=>{let l=r.actions;if(!l)return r;let i=l.map((l,i)=>{if(i!==t||"CONDITIONAL"!==l.connectionType)return l;let c=l.conditionalActions;if(!c)return l;let s=c.map((t,l)=>{if(l!==n)return t;let i=t.actions;if(!i)return t;let c=i[o];c&&e$(c.connectionType?c.connectionType:"NONE",(0,m.dI)(r.id??m.Hr),ej,!0);let s=i.filter((e,t)=>t!==o);return e=o===i.length-1,a=0===s.length,{...t,actions:s}});return{...l,conditionalActions:s}});return{...r,actions:i}}),l=eo.map(e=>r.find(t=>t.id===e.id)??e);C.Y5.updateSelectionProperties({prototypeInteractions:l}),a?ee(new tS.Op([t])):!a&&e&&ee(new tS.Op([t,n,o-1]))}else eJ(t);document.activeElement?.blur()},[eo,et,e_,eE,eJ,ej,e$]),eZ=es&&"ON_CLICK"===ec&&1===ea.length&&void 0!==ea.find(e=>e.connectionURL||"NAVIGATE"===e.navigationType),eQ=a.createElement(T.P,{className:q?"prototype_interaction_edit_modal--ui3TwoColScrollContainer--IWuQ4":n9,useBottomPinning:!q,ref:eM,allowScrollAndZoomOver:!0,"data-not-draggable":!0},a.createElement(od,{autoOpenExpressionBuilder:ez,autoOpenVariablePicker:eG,category:e,deleteButtonPressed:eJ,expandedRows:eI,filterOutNoneActions:x,newActionIndexPath:eK,onNewActionAdded:e=>{eV(e)},onSelect:eu,recordingKey:q?f.Pt("leftCol",G.dJ):G.dJ,resetNewActionIndexPath:()=>{eV(new tS.Op([]))},selectedActionIndex:Q,setAutoOpenExpressionBuilder:eW,setExpandedRows:eN,shouldHideTitle:!0})),e0=1===et.length,e1=et[0],e5=e1.actions&&e1.actions.length<2,e3=e1.actions&&1===e1.actions.length&&e1.actions[0],e2=!e3||"NONE"===e3.connectionType,e4=e0&&e5&&e2;var e8=m.Hr;let e6=a.createElement(tC.t,{skipPaywall:e4,addButtonPressed:e=>{if(!et)return;if(("CONDITIONAL"===e.connectionType||"SET_VARIABLE"===e.connectionType||"SET_VARIABLE_MODE"===e.connectionType)&&e_){eE();return}"SET_VARIABLE_MODE"===e.connectionType&&(e.targetVariableSetID=eH,e.targetVariableModeID=eY),"SET_VARIABLE"===e.connectionType&&eG&&(eG.current=!0),$&&"CONDITIONAL"===e.connectionType&&eW(!0);let t=!1;var n=null,o=$&&!en&&!e4&&et[0].actions&&1===et[0].actions.length;if(en||e4)for(var a=0;a<et.length;a++){let t=et[a];t.actions=[e];let n=t.id,o=t.sourceNodeID;(0,G.uU)(t.stateManagementVersion)&&n&&o&&nm.zZ.recordInteractionUpgraded(n,o),t.stateManagementVersion=1}else for(var a=0;a<et.length;a++){let o=et[a];if(o.actions){if((0,G.uU)(o.stateManagementVersion)&&(o.id&&o.sourceNodeID&&nm.zZ.recordInteractionUpgraded(o.id,o.sourceNodeID),o.actions?.forEach(e=>{e.transitionResetScrollPosition=!e.transitionPreserveScroll})),q){if(Q.isConditional()){let n=Q.path[0],a=Q.path[1],r=Q.path[2],l=o.actions?.[n],i=l.conditionalActions?.[a].actions?.length??0;n===o.actions.length-1&&r===i-1&&(t=!0),l.conditionalActions?.[a].actions?.splice(r+1,0,e)}else{let n=Q.path[0]+1;n===o.actions.length&&(t=!0),o.actions?.splice(n,0,e)}}else o.actions?.push(e);e8=o.id?o.id:m.Hr}else o.actions=[e],e8=o.id?o.id:m.Hr;if(o.stateManagementVersion=1,q){let e=[...Q.path];e[e.length-1]+=1,n=new tS.Op([...e])}else n=new tS.Op([o.actions.length-1])}let r=eo.map(e=>et.find(t=>t.id===e.id)??e);if(C.Y5.updateSelectionProperties({prototypeInteractions:r}),o||q){var l=[];r[0].actions?.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&l.push(new tS.Op([t]))}),eN(l)}eU&&(!q||t)&&eU(!0),eV&&eV(n),V((0,R._P)({name:"Prototype add action",params:{action:e.connectionType?e.connectionType:"NONE",source:"panel",connector_id:(0,m.dI)(e8),page_id:ej}}))},renderButton:!0,recordingKey:G.dJ,isNestedInConditional:q&&Q.isConditional()}),e7=et.some(e=>void 0!==e.actions&&e.actions?.length>1),e9=!Q.isConditional()&&!e7,te=a.createElement(l.K,{onClick:()=>eq(Q),"aria-label":(0,A.t)("proto.prototype_panel.delete"),disabled:e9,recordingKey:f.Pt(G.dJ,"actionDeleteButton"),htmlAttributes:{"data-tooltip":(0,A.t)("proto.prototype_panel.delete"),"data-tooltip-type":L.Ib.TEXT}},a.createElement(b.U,{svg:nz.A},a.createElement(c.O,null))),tt=a.createElement("div",{className:"prototype_interaction_edit_modal--ui3FooterContainer--oYsXM"},e6," ",te),tn=a.createElement(eh.c.Provider,{value:eh.P.LEFT},a.createElement("div",{className:q?"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeftResizable--16pLu":"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeft--UYWSG",ref:eT,style:q?{width:`${oN(eg).leftWidthPct}%`}:void 0},a.createElement(n7,{category:e,recordingKey:G.dJ,headerButtons:a.createElement(a.Fragment,null)}),a.createElement("div",{className:oo}),eQ,a.createElement("div",{className:oo}),a.createElement(a.Fragment,null,tt))),to=ea.length>0?a.createElement(eh.c.Provider,{value:eh.P.RIGHT},a.createElement(T.P,{allowScrollAndZoomOver:!0,"data-not-draggable":!0,className:q?"prototype_interaction_edit_modal--ui3ScrollContainerRight--LJr-n":void 0},a.createElement(oA,{selectedActionIndex:ed,handleExpandUI3:(e,t)=>{!t&&ea.length>1?eN(eI.filter(t=>!t.equals(e))):eI.find(t=>t.equals(e))||eN([...eI,new tS.Op(e)])},autoOpenVariablePicker:eG,autoOpenExpressionBuilder:ez,setAutoOpenExpressionBuilder:eW,filterOutNoneActions:x}))):null,ta=a.useRef(of),[,tr]=(0,i.i)({disabled:!q,onDragStart(){eT.current&&(ta.current=eT.current.getBoundingClientRect().width)},onDrag(e){if(eT.current&&ta.current){let t=oN(eg),n=ta.current+e.delta.x,a=n/t.width*100;n<of?a=of/t.width*100:a>oI&&(a=oI),eT.current.style.width=`${a}%`,o={...t,leftWidthPct:a}}}}),tl=q?a.createElement("div",{className:"prototype_interaction_edit_modal--ui3TwoColPanelContainer--e8MK8"},a.createElement("div",{className:"prototype_interaction_edit_modal--ui3TwoColInnerContainer--ZvJj2"},tn,a.createElement("div",{className:"prototype_interaction_edit_modal--dividerVertical--Noi1C"},a.createElement("div",{...tr({className:"prototype_interaction_edit_modal--verticalResizeHandle--xkc8V"})})),to),eg&&a.createElement(oc,{transition:ey,recordingKey:f.Pt(G.dJ,"stateManagementVersionPanel"),updateSelectionProperties:ei,stateManagementVersion:ev,selectedInteractions:et})):eQ,ti=a.createElement(t4.vx,{ref:W,allowAutoExpanding:!0,allowResizeHeight:q,allowResizeWidth:q,allowWheelPassthrough:!0,arrowPosition:v?void 0:t4.F_.TOP,arrowRelativeX:v?void 0:eC/2,beMoreAccessible:!!(0,u.k)().fpl_draggable_modal_a11y,canRenderBelowViewport:!0,containerClassName:g()({[n9]:!q,[oe]:q,[ot]:X,"prototype_interaction_edit_modal--abovePropertiesPanel--hFejC":eO,"prototype_interaction_edit_modal--belowPropertiesPanel--f1Jfl":!eO,"prototype_interaction_edit_modal--modalExpandedWidth--IDl6k":t&&!$,"prototype_interaction_edit_modal--modalWidth--cCH7B":!t&&!$,"prototype_interaction_edit_modal--hideModal--RSp-R":eb}),contentContainerClassName:g()({[n9]:!q,[oe]:q,[ot]:X}),dataTestId:"in-context-prototype-interaction-edit-modal",dragHeaderOnly:!0,fullFrame:q,headerClassName:"prototype_interaction_edit_modal--multilineInteractionDetailsHeader--OE8Wr",headerSize:"small",initialHeight:q?oN(eg).height-t4.uF:void 0,initialPosition:ek,initialWidth:q?oN(eg).width:void 0,maxHeight:q?800:void 0,maxWidth:q?800:void 0,minHeight:q?eg?369:320:void 0,minWidth:q?440:void 0,onClose:ov,onDragStart:()=>{ex(!0),eD()},onFocus:()=>H(e=>e+1),onResize:q?e=>{o={...oN(eg),height:e.height,width:e.width}}:void 0,recordingKey:"interactionDetailsModal",title:(t,{titleId:n})=>a.createElement("div",{className:"prototype_interaction_edit_modal--onboardingRow--UlvE0"},eZ?a.createElement(oS,{closeButton:t}):a.createElement(oP,{category:e,createActionTrigger:e6,closeButton:t,titleId:n}))},$?tl:eQ),tc=es?ti:a.createElement(U.vL,{name:"Prototype Draggable modal",className:"prototype_interaction_edit_modal--prototypeDraggableModal--njJ6A",handleClipboard:eF},ti);return a.createElement(K.ht.Provider,{value:a.useMemo(()=>({autoCloseOnScroll:!j}),[j])},tc)});function oA({selectedActionIndex:e,autoOpenVariablePicker:t,handleExpandUI3:n,autoOpenExpressionBuilder:o,setAutoOpenExpressionBuilder:r,filterOutNoneActions:l}){let i=(0,nB.HS)(),{selectedInteractions:c,mergedActions:s,makeUpdateSelectionPropertiesForActionIndex:d,makeUpdateMultipleDestinationNodesForActionIndex:p,detailPropsMultipleActions:m}=(0,nB.Ay)(i,l),u=e.path[0],_=p(u),E=d(u),g=(0,G.iC)(c),y=m.interactionEvent.interactionType??"NONE";if(e.isConditional()){let n=e.path[1],l=e.path[2],i=s[u],d=((0,x.hS)(i.conditionalActions)&&i.conditionalActions?i.conditionalActions:[])[n],p=d?.actions?.[l];return p?a.createElement("div",{className:oa},a.createElement(nY,{key:l,action:p,actionIndexPath:e.path,autoOpenExpressionBuilder:o,autoOpenVariablePicker:t,expandedRows:[e],interactionType:y,isNarrowPanel:!0,isNestedInConditional:!0,numActions:s.length,onDeleteAction:v.lQ,onDrop:v.lQ,onExpand:v.lQ,onSelect:v.lQ,recordingKey:f.Pt(G.dJ,G.Qe,G.eG,u),selectedActionIndex:e,selectedInteractions:c,setAutoOpenExpressionBuilder:r,stateManagementVersion:g,updateMultipleDestinationNodes:_.appendActionIndex(n).appendActionIndex(l),updateSelectionProperties:E.appendActionIndex(n).appendActionIndex(l)})):null}return a.createElement("div",{className:oa},a.createElement(nY,{key:u,action:s[u],actionIndexPath:[u],autoOpenExpressionBuilder:o,autoOpenVariablePicker:t,expandedRows:[e],interactionType:y,isNarrowPanel:!0,isNestedInConditional:!1,numActions:s.length,onDeleteAction:v.lQ,onDrop:v.lQ,onExpand:n,onSelect:v.lQ,recordingKey:f.Pt(G.dJ,G.Qe,G.eG,u),selectedActionIndex:e,selectedInteractions:c,setAutoOpenExpressionBuilder:r,stateManagementVersion:g,updateMultipleDestinationNodes:_,updateSelectionProperties:E}))}function oP({category:e,closeButton:t,createActionTrigger:n,titleId:o}){let i=(0,r.wA)(),{selectedInteractions:c}=(0,nB.Ay)(e),p=(0,G.YT)(),m=(()=>{if(1!==c.length)return 0;let e=c[0],t={nodeID:e.sourceNodeID,interactionID:e.id};return(d.X3B?.getMatchingInteractions(h.d(t))??[]).length})(),_=(0,u.k)().prototype_hide_matching_noodles&&1===c.length&&m>1&&a.createElement(l.K,{actionOnPointerDown:!0,onClick:()=>{if(1!==c.length)return;let e=c[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=d.X3B?.getMatchingInteractions(h.d(t))??[];d.glU?.selectInteractionsAndSourceNodes(n);let o=(0,A.t)("proto.interaction_details.visual_bell.selected_n_matching_interactions",{total_num_interactions:n.length});C.Y5.showVisualBellWithUndo("selected-matching-noodles",o,!1),i((0,R._P)({name:"prototype_select_matching_interactions",params:{num_connectors:n.length}}))},"aria-label":(0,A.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:m}),htmlAttributes:{tabIndex:-1,onMouseEnter:()=>{if(1!==c.length)return;let e=c[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=d.X3B?.getMatchingInteractions(h.d(t))??[];d.glU?.hoverInteractions(n)},onMouseLeave:()=>d.glU?.hoverInteractions([]),"data-tooltip":(0,A.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:m}),"data-tooltip-type":L.Ib.TEXT}},a.createElement(b.U,{svg:oh.A},a.createElement(s.A,null)));switch(p){case G.Oz.TWO_COL:return a.createElement("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeader--Ka7aM"},a.createElement("span",{id:o},(0,A.tx)("proto.interaction_details.header")),a.createElement("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeaderButtons--UqykU"},_,t));case G.Oz.SINGLE_COL:return a.createElement(a.Fragment,null,a.createElement("span",{id:o},(0,A.tx)("proto.interaction_details.header")),a.createElement("div",{className:on},_,n,t))}}function oS({closeButton:e}){return a.createElement(a.Fragment,null,(0,A.tx)("proto.sites_interaction_link_details.header"),a.createElement("div",{className:on},e))}let oC=e=>e.pickerShown?.id===P.o$?e.pickerShown:null},85028:(e,t,n)=>{n.d(t,{y7:()=>eS,a1:()=>eL,dT:()=>eF});var o=n(848318),a=n(301168),r=n(544405),l=n(353317),i=n(658029),c=n(270251),s=n(713196),d=n(92778),p=n(186606),m=n(320953),u=n(553547),_=n(195124),E=n(382902),g=n(536384),y=n.n(g),h=n(410441),v=n(996202),f=n(865114),I=n(156845),N=n(238462),T=n(781239),b=n(979890),A=n(454805),P=n(720522),S=n(401970),C=n(967688),O=n(244534),x=n(142896),w=n(754210),D=n(995218),k=n(696786),R=n(303397),M=n(489082),L=n(246411),U=n(966369),K=n(730143),V=n(200300),B=n(700436),F=n(273555),G=n(959219),z=n(17753),W=n(52463),Y=n(499025),H=n(341090),j=n(967045),$=n(998390);function J(e){return e??"Default"}let X=o.createContext({getNodeName:J}),q=o.memo(function({getNodeName:e=J,children:t}){let n=o.useMemo(()=>({getNodeName:e}),[e]);return o.createElement(X.Provider,{value:n},t)});var Z=n(425155),Q=n(275210),ee=n(956783),et=n(189819),en=n(313405),eo=n(197696),ea=n(748790),er=n(880801),el=n(619534),ei=n(131258),ec=n(122586),es=n(636074),ed=n(129256);function ep(){let e=(0,a.wA)(),t=(0,a.d4)(e=>(0,eo.Yh)(e.mirror.appModel,er.JT.MAGIC_LINK));return(0,ea.PE)()?o.createElement("span",{className:"magic_link--magicLinkButton--CWefW","data-testid":"magic-link-entry"},o.createElement(i.K,{recordingKey:T.Pt("prototypeInteractionList","magicLinkButton"),"aria-label":(0,C.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip-v2"),onClick:()=>{(0,ec.$I)({moduleToOpen:{type:"custom",module:o.createElement(es.p,null),name:ei.Sn.MAGIC_LINK,beforeModuleOpen:()=>{e((0,en.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"properties_panel"}})),(0,el.B3)(er.JT.MAGIC_LINK),t&&(0,el.Ag)(er.JT.MAGIC_LINK,ed.e,{})}},trackingData:{source:"prototype_magic_link_triggered"}})},htmlAttributes:{"data-tooltip":(0,C.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip-v2"),"data-tooltip-show-above":!0}},o.createElement(et.B,null))):null}var em=n(614892),eu=n(934151),e_=n(699848),eE=n(297638);let eg=(0,n(244052).ex)("prototype_info",function(e){let{tooltipText:t}=e;return o.createElement("div",{className:eE.s.flex.justifyCenter.itemsCenter.$},o.createElement("span",{className:eE.s.m6.flexGrow1.$,style:{maxWidth:144}},t))},e=>({tooltipText:e.getAttribute("data-tooltip-text")}));var ey=n(124213),eh=n(320486),ev=n(756912),ef=n(786175),eI=n(952200),eN=n(389075),eT=n(57540);let eb=new w.JV,eA=new w.Eq,eP=new w.sX,eS=o.memo(function({filterInteractionCategory:e}){let t=(0,a.wA)(),n=(0,a.d4)(ee.Cy),r=(0,a.d4)(ee.n9),l=(0,a.d4)(ee.DV),i=(0,a.d4)(ew),c=(0,a.d4)(B.dK),s=(0,a.d4)(B.Xt),d=(0,ee.a2)(),E=(0,ee.R)(),g=(0,a.d4)(ek),y=(0,a.d4)(ex),f=Object.keys(s).length>1,N=eR(),T=function(){let e=eR(),t=(0,a.d4)(eD);return!!e&&!!t&&t.selectionOverrides[p.YnC.PROTOTYPE_INTERACTIONS]}(),b=(0,K.q5)(),P=(0,v.U)(),S=(0,D.cJ)(),C=o.useMemo(()=>new w.cP(c),[c]),k=o.useCallback(e=>C.format(e),[C]),M=o.useRef(null),L=e=>{R.Y5.updateSelectionProperties({prototypeInteractions:e},{shouldCommit:F.zk.NO_BUT_TRACK_AS_EDIT}),R.Y5.commit()},U=(0,$.Zj)(Object.keys(s)),V=o.createElement(eC,{currentSelectedProperty:i,dispatch:t,filterInteractionCategory:e,headerAccessory:U&&o.createElement(ep,null),inSites:S,inheritedInternalInteractionGroups:E,interactionGroups:d,isOrInInstance:N,isValidPrototypingSourceSelected:g,mixed:f,onAddProperty:e=>{e.stopPropagation();let t=[],o=[];for(let e of Object.keys(s)){let n=p.glU.generateUniqueID();if(!n)return;let a=u.sH(n);if(!a)return;let r={id:a,sourceNodeID:u.sH(e)??u.Hr,event:{interactionType:eL(d,void 0,S)}};r.stateManagementVersion=1,r.actions=[{connectionType:"NONE"}],t.push(r);let l=(0,_.kh)(c,e);o.push(l?l.guid:"")}let a=t.map(e=>I.d({nodeID:e.sourceNodeID,interactionID:e.id}));if(a.length>0){p.glU.setSelectedInteractions(a);let e=(0,W.cn)(M.current);eF(new A.Mi(e.x,e.y+(0,h.jz)(ef.rightNavGridRowHeight)))}let l=[...n,...t,...r];P("prototype_interaction_added",{interactionCount:l.length,sourceTlfIds:JSON.stringify(o)}),L(l)},onChange:(e,t)=>{let o=e.map(e=>e.interactions).reduce((e,t)=>e.concat(t),[]),a=new Set,l=[];for(let e of o){let t=u.dI(e.id);if(t&&!a.has(t))l.push(e);else{if(!(t=p.glU.generateUniqueID()))continue;let n=u.sH(t);if(!n)continue;l.push({...e,id:n})}t&&a.add(t)}t===G.J.NORMAL?l=[...l,...r]:t===G.J.INHERITED_INTERNAL&&(l=[...n,...l]),L(l)},onDeleteProperty:(e,t)=>{let n=(t===G.J.NORMAL?d:E).filter((t,n)=>e.has(n)),o=[];for(let e of n)o.push(...e.interactions);let a=eB(o);m.l7.user("delete-prototype-interactions",()=>p.glU.deleteInteractions(a)),R.Y5.deselectProperty()},openFile:b,shouldIgnoreKeyboardEvents:l.length>0||i.type!==p.rrT.PROTOTYPE_INTERACTION&&i.type!==p.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,showResetInteractionsButton:T,toggleScrollBehaviorPicker:()=>{if(y?.id===x.AO)t(O.XE());else{let e=(0,W.cn)(M.current);t(O.u1({id:x.AO,initialX:e.x,initialY:e.y}))}}});return o.createElement(q,{getNodeName:k},S?V:o.createElement(em.Zk,{"data-onboarding-key":"prototypePanel",ref:M,"data-testid":"prototype-interaction-list"},V))});function eC(e){let t=o.useRef(!1),n=(0,k.GS)(),a=!!e.filterInteractionCategory,l=!a||e.filterInteractionCategory===G.J.NORMAL,i=e.isOrInInstance&&e.inheritedInternalInteractionGroups.length>0,c=a?e.filterInteractionCategory===G.J.INHERITED_INTERNAL&&i:i,s=n?o.createElement("div",{className:"prototype_interaction_list--categoryRow--Xxfm4"},o.createElement(r.J,{className:"prototype_interaction_list--categoryLabel--0dGOM"},(0,C.tx)("proto.interaction_list.variant_interactions"))):o.createElement(em.fI,null,o.createElement(em.nV,{className:"prototype_interaction_list--label--dGwgy"},(0,C.tx)("proto.interaction_list.variant_interactions"))),d=(0,V.o3)(V.nt.useGrid)&&n;return o.createElement(o.Fragment,null,l&&o.createElement(eu.dD.Provider,{value:{useGrid:d}},o.createElement(j.h6,{addProperty:e.onAddProperty,boldHeaderRow:e.interactionGroups.length>=1||e.inheritedInternalInteractionGroups.length>=1,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,headerAccessory:e.headerAccessory,hideAddButton:!e.isValidPrototypingSourceSelected,onChange:t=>e.onChange(t,G.J.NORMAL),onDeleteProperty:t=>e.onDeleteProperty(t,G.J.NORMAL),onResetInteractions:m.nc.user("reset-instance-interactions",()=>p.glU.resetSymbolOverrides(p.YnC.PROTOTYPE_INTERACTIONS)),openFile:e.openFile,pickerShown:null,propertyList:e.interactionGroups,recordingKey:"prototypeInteractionList",renderProperty:(n,a,r,l,i,c,s,p,m)=>o.createElement(eO,{key:d?void 0:a,autoOpenVariablePicker:t,category:G.J.NORMAL,dispatch:e.dispatch,hasFocus:i,inSites:e.inSites,index:a,interactionGroup:n,interactionGroups:e.interactionGroups,isDragging:l,onMouseDown:s,onMouseMove:p,onMouseUp:m,recordingKey:T.Pt("prototypeInteractionList",a),selected:r,singletonRow:e.interactionGroups.length<=1}),selectedPropertyType:p.rrT.PROTOTYPE_INTERACTION,shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,showResetInteractionsButton:e.showResetInteractionsButton,stylePickerShown:{isShown:!1},title:e.inSites?"":(0,C.t)("proto.title_interactions"),toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker})),c&&s,c&&o.createElement(eu.dD.Provider,{value:{useGrid:d}},o.createElement(j.h6,{addProperty:N.lQ,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,hideAddButton:!0,onChange:t=>e.onChange(t,G.J.INHERITED_INTERNAL),onDeleteProperty:t=>e.onDeleteProperty(t,G.J.INHERITED_INTERNAL),openFile:e.openFile,pickerShown:null,propertyList:e.inheritedInternalInteractionGroups,recordingKey:T.Pt("prototypeInheritedInternalInteractionList"),renderProperty:(n,a,r,l,i,c,s,p,m)=>o.createElement(eO,{key:d?void 0:a,autoOpenVariablePicker:t,category:G.J.INHERITED_INTERNAL,dispatch:e.dispatch,hasFocus:i,inSites:e.inSites,index:a,interactionGroup:n,interactionGroups:e.inheritedInternalInteractionGroups,isDragging:l,onMouseDown:s,onMouseMove:p,onMouseUp:m,recordingKey:T.Pt("prototypeInheritedInternalInteractionList",a),selected:r,singletonRow:e.inheritedInternalInteractionGroups.length<=1}),selectedPropertyType:p.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,stylePickerShown:{isShown:!1},title:"",toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker})))}function eO({interactionGroups:e,interactionGroup:t,index:n,hasFocus:r,isDragging:_,selected:g,singletonRow:h,onMouseDown:N,onMouseMove:A,onMouseUp:D,dispatch:M,category:K,recordingKey:V,inSites:F}){let j=(0,k.GS)(),{getNodeName:$}=o.useContext(X),J=(0,a.d4)(ee.DV),q=(0,ee.a2)(),Q=(0,a.d4)(ex),et=Q?.id===x.o$?Q:null,en=(0,a.d4)(B.dK),[eo,ea]=o.useState(!1),er=(0,E.md)(U.NE)?eA:eb,el=o.useContext(eh.qd),ei=function(e,t){let n=new Set(t.map(e=>{let t=I.s(e);return t?u.dI(t.interactionID):""}).filter(e=>""!==e));for(let t of e.interactions){let e=u.dI(t.id);if(e&&n.has(e))return!0}return!1}(t,J),[ec,es]=(0,E.fp)(ey.jM),ed=(0,E.md)(ey.uW),{useGrid:ep}=o.useContext(eu.dD),em=o.useRef(null),eE=o.useRef(null),ef=o.useCallback(()=>{let e=j&&F?eE.current:em.current;eF((0,W.cn)(e))},[F,j]),eP=o.useCallback(()=>{p.glU.setSelectedInteractions([]),M(O.XE()),R.Y5.deselectProperty()},[M]),eS=n=>{if(!em||!eE)return;F&&ed?.focus();let o=eV(t),a=n.metaKey||n.ctrlKey;if(a)ei?o=J.filter(e=>!o.includes(e)):o.push(...J);else if(!F&&n.shiftKey){var r;let n,a;let l=(r=t.key,e.findIndex(({key:e})=>e===r));if(-1===l)return;let i=function(e,t){let n=1/0,o=e;for(let a of t){let t=Math.abs(e-a);t<n&&(o=a,n=t)}return o}(l,function(e,t){let n=new Set,o=new Set(t);for(let t=0;t<e.length;t++)eV(e[t]).some(e=>o.has(e))&&n.add(t);return n}(e,J)),c=(n=l,a=i,l>i&&(n=i,a=l),e.slice(n,a+1));for(let e of(o=[...J],c))o.push(...eV(e))}if(p.glU.setSelectedInteractions(o),R.Y5.updateAppModel({currentSelectedProperty:{type:K===G.J.NORMAL?p.rrT.PROTOTYPE_INTERACTION:p.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,indices:[]}}),o.length){let e=et&&et.shouldPin;if(F){let t=ec.length+o.length>1;a?(a||t)&&M(O.XE()):(es([]),e||ef())}else e||ef()}else eP()},eC=(0,a.d4)(Y.ZM),eO=!1,ew=null,eD=null;for(let e of t.interactions)if(!ew&&e.actions&&e.actions.length>0)ew=e.actions[0],eD=e;else if(eK(ew,$,j,eC)!=eK((e.actions??[])[0],$,j,eC)){eO=!0;break}let ek=()=>{let e=eB(t.interactions);p.glU.hoverInteractions(e),ea(!0)},eR=()=>{p.glU.hoverInteractions([]),ea(!1)},eM=new w.js(j,eC),eL=(0,w.mj)(ew),eG=eD?.actions?.length??0,ez=eG>1?(0,C.t)("sites.panel.interaction_summary",{numActions:eG}):eO||!ew||"NONE"===eL?void 0:eM.format(eL),{tooltipText:eW,showTooltip:eY}=(0,ev.QY)(ez),eH=e=>{e.stopPropagation()},ej=e=>{e.stopPropagation();let n=eB(t.interactions);m.l7.user("delete-prototype-interactions",()=>p.glU.deleteInteractions(n)),R.Y5.deselectProperty(),R.Y5.commit()},e$=!1,eJ=!1;if(K===G.J.NORMAL){for(let e of t.interactions){if(!e.actions||0===e.actions.length)continue;let t=e.actions[0];if(!t||"SWAP_STATE"!==t.navigationType)continue;let n="";if(t.transitionNodeID){let e=en.get(u.dI(t.transitionNodeID));if(e){if(e.isState)n=e.parentGuid||"";else{e$=!0;break}}}let o=p.glU.getContainingStateGroupOrSelf(u.dI(e.sourceNodeID??u.Hr))||"";if(""===o||""!==n&&o!==n){e$=!0;break}}let n=["ON_CLICK","MOUSE_DOWN","MOUSE_UP"].includes(t.event.interactionType??""),o=e.some(e=>"ON_HOVER"===e.event.interactionType);eJ=n&&o}e$=K!==G.J.INHERITED_INTERNAL&&e$;let eX=function(e,t,n){if(e!==G.J.INHERITED_INTERNAL)return null;let o=n.find(e=>e.key===t.key&&e.interactions.length===t.interactions.length&&1===t.interactions.length&&function(e,t){let n=void 0!==e.actions&&e.actions.length>=1,o=void 0!==t.actions&&t.actions.length>=1;if(!n||!o)return!1;let a=e.actions.every(e=>"UPDATE_MEDIA_RUNTIME"===e.connectionType),r=e.actions.every(e=>u.fn(e.transitionNodeID));var l=!1;for(let e of t.actions)if("INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType){l=!0;break}return a&&r&&l}(e.interactions[0],t.interactions[0]));return o?.interactions[0]??null}(K,t,e),eq=(0,f.ZC)(eX),eZ=(0,v.U)();if(o.useEffect(()=>{null===eq&&eX&&eZ("prototype_interaction_conflict_override_created",{interaction_type:t.interactions[0].event?.interactionType,action_type:eX.event?.interactionType})}),t.event.interactionType&&el&&el!==(0,Z.hD)(t.event.interactionType)||"mouse"===el&&(0,eh.zL)(t.interactions))return null;let eQ=K===G.J.INHERITED_INTERNAL&&q.some(e=>e.key===t.key)&&!eX,e0=g&&r,e1=ei&&!g,e5=o.createElement(s.Z,null),e3=e$||eJ||eQ,e2=e$?(0,C.t)("proto.prototype_panel.this_interaction_must_swap_from_a_variant_to_another_variant_within_the_same_component_set_tooltip"):eJ?(0,C.t)("proto.prototype_panel.prototype_multiple_interactions_mouse_and_hover_tooltip"):eQ?(0,C.t)("proto.prototype_panel.this_interaction_will_not_be_triggered_as_interactions_on_instances_are_triggered_before_inherited_internal_interactions_tooltip"):"",e4=o.createElement(e_.Y9,{ref:eE,"data-testid":`prototypeInteractionItem-${n}`,hideGrabber:!0,onMouseEnter:ek,onMouseLeave:eR,onClick:eS,recordingKey:T.Pt(V,"draggableRow"),selected:ei,"aria-selected":ei},o.createElement(e_.s2,{label:null,leftIcon:o.createElement(l.d,{"aria-expanded":e1&&!!et,recordingKey:T.Pt(V,"interactionIcon"),htmlAttributes:{onMouseDown:eH,"data-tooltip-type":z.Ib.TEXT,"data-tooltip":e3?e2:eU(t.event,er,!!F)},"aria-label":e3?e2:eU(t.event,er,!!F),children:e3?e5:(0,L.e7)(t.event.interactionType)}),input:o.createElement(b.D8,{onMouseDown:eH,recordingKey:T.Pt(V,"interactionText"),className:"prototype_interaction_list--ellipsis--ro1zN ellipsis--ellipsis--Tjyfa",onMouseEnter:eY},eU(t.event,er,!!F),ez&&o.createElement("span",{"data-tooltip-type":z.Ib.TEXT,"data-tooltip":eW,className:"prototype_interaction_list--summaryText--hGpp4"},"\xa0\xb7\xa0",ez)),rightIcon:o.createElement("div",{hidden:!eo},o.createElement(i.K,{onClick:ej,"aria-label":(0,C.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:T.Pt(V,"removeButton"),htmlAttributes:{onMouseDown:eH}},o.createElement(S.U,{svg:eI.A,fallbackSvg:eN.A},o.createElement(d.O,null))))}));if(F)return e4;let e8=o.createElement(c.u,{className:y()({"prototype_interaction_list--interactionButton--q-58Q":!0,"prototype_interaction_list--interactionButtonSelected--8YX9A":e0,"prototype_interaction_list--interactionButtonSelectedSecondary--Nx73L":e1}),onClick:eS,htmlAttributes:{onKeyDown:e=>{ep&&("Enter"!==e.key&&(" "!==e.key||e.shiftKey)||eS(e))},onMouseDown:eH},"aria-haspopup":"dialog","aria-expanded":!!et,recordingKey:V},e3&&o.createElement(P.B,{className:"prototype_interaction_list--warningIcon--Mgr5O",svg:eT.A,"data-tooltip-type":z.Ib.SPECIAL,"data-tooltip":eg,"data-tooltip-text":e2}),o.createElement("div",{className:e3?"prototype_interaction_list--interactionNameShort--5UMLL prototype_interaction_list--interactionName--zQsSL":"prototype_interaction_list--interactionName--zQsSL"},eU(t.event,er,!!F)),o.createElement(S.U,{className:"prototype_interaction_list--actionIcon--x-haP",svg:eO?(0,L.Yb)("NONE"):(0,L.Yb)((0,w.mj)(ew))},(0,L.av)((0,w.mj)(ew))),o.createElement("div",{className:"prototype_interaction_list--targetText--UMXyE",dir:"auto"},eO?(0,C.t)("proto.variant_actions.mixed"):K===G.J.INHERITED_INTERNAL?(0,C.t)("proto.variant_actions.change_to"):eK(ew,$,j,eC))),e6=o.createElement("span",{className:"prototype_interaction_list--removeButton--g6aiQ"},o.createElement(i.K,{onClick:ej,"aria-label":(0,C.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:T.Pt(V,"removeButton"),htmlAttributes:{onMouseDown:eH}},o.createElement(S.U,{svg:eI.A,fallbackSvg:eN.A},o.createElement(d.O,null))));return ep?o.createElement(eu.lt,{ref:em,htmlAttributes:{"data-testid":`prototypeInteractionItem-${n}`},input:e8,icon:e6,selected:g||ei,hasFocus:e0,singletonRow:h,recordingKey:T.Pt(V,"draggableRow")}):o.createElement("div",null,o.createElement(H.e,{ref:em,className:j?"prototype_interaction_list--interactionListRow---i0Rg ui3_rows--ui3OneInputOneIconRow--SMoQ9 ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu":void 0,"data-testid":`prototypeInteractionItem-${n}`,dragging:_,onMouseDown:N,onMouseEnter:ek,onMouseLeave:eR,onMouseMove:A,onMouseUp:D,recordingKey:T.Pt(V,"draggableRow"),selected:e0,selectedSecondary:e1,singletonRow:h},e8,e6))}function ex(e){return e.pickerShown}function ew(e){return e.mirror.appModel.currentSelectedProperty}function eD(e){return e.mirror.selectionProperties.resettableInstanceOverrides}function ek(e){return e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0}function eR(){let e=(0,a.d4)(B.Xt),t=(0,a.d4)(B.dK);for(let n of Object.keys(e)){let e=t.get(n);if(e&&("INSTANCE"===e.type||e.isInstanceSublayer))return!0}return!1}let eM=["ON_CLICK","DRAG","ON_HOVER","ON_PRESS","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"];function eL(e,t,n){let o=new Set;for(let{event:t}of e)o.add(t.interactionType);for(let e of eM)if(!o.has(e)&&(!n||"DRAG"!==e)&&("BACK"!==t||"ON_HOVER"!==e&&"ON_PRESS"!==e))return e;return"ON_KEY_DOWN"}function eU(e,t,n){let o=t.format(e.interactionType??"NONE");if("ON_KEY_DOWN"===e.interactionType&&e.keyTrigger&&e.keyTrigger.keyCodes){let t=(0,Q._i)(e.keyTrigger.keyCodes),a=(0,Q.E8)(e.keyTrigger,!0);if("KEYBOARD"===e.keyTrigger.triggerDevice&&t)return n?(0,Q.U8)(t):o+" ("+(0,Q.U8)(t)+")";if(a)return n?a:o+" ("+a+")"}return o}function eK(e,t,n,o){let a=new w.js(n,o);if(!e)return a.format("NONE");let r=(0,w.mj)(e);switch(r){case"NONE":case"GO_BACK":case"CLOSE_OVERLAY":case"SET_VARIABLE":case"SET_VARIABLE_MODE":case"CONDITIONAL":return a.format(r);case"OPEN_URL":if(null!=e.connectionURL){if((0,M.gl)(e.connectionURL))return(0,C.t)("fullscreen.mixed");return e.connectionURL.replace(/https?:\/\//,"")}return a.format("NONE");case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":case"UPDATE_MEDIA_SKIP_TO":return eP.format(e)}return e.transitionNodeID?(0,M.gl)(e.transitionNodeID)?(0,C.t)("fullscreen.mixed"):t(u.dI(e.transitionNodeID)):a.format("NONE")}function eV(e){return e.interactions.filter(e=>e.id&&e.sourceNodeID).map(e=>I.d({nodeID:e.sourceNodeID,interactionID:e.id}))}function eB(e){let t=[];for(let n of e){let{sourceNodeID:e,id:o}=n;e&&o&&t.push(I.d({nodeID:e,interactionID:o}))}return t}function eF(e){R.Y5.triggerAction("show-prototype-interaction-edit-modal",{args:{source:p.yxn.PROPERTIES_PANEL,x:e.x,y:e.y}})}},672595:(e,t,n)=>{n.d(t,{h:()=>N,t:()=>T});var o=n(848318),a=n(301168),r=n(990140),l=n(536384),i=n.n(l),c=n(781239),s=n(401970),d=n(178806),p=n(967688),m=n(754210),u=n(696786),_=n(246411),E=n(511067),g=n(456977),y=n(442022),h=n(596224),v=n(425155),f=n(934363),I=n(954184);let N=e=>`interaction-panel-create-action-${e}`;function T(e){let t=N(e.recordingKey);var{showing:n,toggle:l,hide:T}=(0,E.BK)(t);let b=(0,o.useRef)(null),{recordingKey:A,addButtonPressed:P,presetInteractions:S,isLayoutNodeSelected:C}=e,{shouldShowAdvancedPrototypingPaywall:O,showAdvancedPrototypinglMultipleActionsModal:x}=(0,v.zt)(),w=(0,o.useCallback)(()=>{!e.skipPaywall&&O?x():l()},[e.skipPaywall,O,x,l]),D=(0,v.YT)()===v.Oz.TWO_COL,k=(0,v.hP)(),R=(0,u.GS)(),M=(0,h.cJ)(),L=(0,v.He)({showVideoActions:k,isNestedInConditional:e.isNestedInConditional,isSites:M,isUI3:R,showPresetActions:!!e.presetInteractions,isLayoutNodeSelected:C}),U=(0,a.wA)(),K=(0,o.useCallback)(e=>{P((0,v.Bs)(e)),T()},[P,T]),V=i()({[f.x1]:e.renderButton,[f.xm]:!e.renderButton&&!D,[f.U3]:!e.renderButton&&D}),B=[];L.forEach(e=>{(0,v.vc)(e)?B.push(g.w):e===v.Xk&&S?.length?B.push(...S,g.w):B.push(function({actionType:e,clickCb:t,recordingKey:n,isUI3:a}){let r=(0,_.Yb)(e),l=(0,_.av)(e),i=new m.Z6(a),d=e?i.format(e):"Undefined";return{type:e,className:f.BP,callback:()=>t(e),icon:o.createElement(s.U,{className:f.QE,svg:r},l),displayText:d,recordingKey:c.Pt(n,"createActionOption",e),"data-onboarding-key":`create-action-${e}`}}({clickCb:K,recordingKey:A,actionType:e,isUI3:R}))});let F=e.isNestedInConditional?(0,p.t)("proto.prototype_panel.add_nested_action"):M?(0,p.t)("sites.panel.add_interaction"):(0,p.t)("proto.prototype_panel.add");return o.createElement(o.Fragment,null,o.createElement(d.e6,{ref:b,recordingKey:c.Pt(A,"createActionDropdown"),className:V,onClick:w,"aria-label":(0,p.t)("proto.prototype_panel.create_action_button"),htmlAttributes:{"data-tooltip":F,"data-tooltip-type":"text"}},e.renderButton?o.createElement(s.U,{svg:I.A},o.createElement(r.e,null)):(0,p.tx)("fullscreen.properties_panel.click_plus_to_add_new_action")),n&&b.current&&o.createElement(y.j,{dataTestId:e.dataTestId,dispatch:U,hidePointWhenContentOffScreen:!0,items:B,lean:"center",minWidth:130,onSelectItem:e=>e.callback?.(),parentRect:b.current.getBoundingClientRect(),recordingKey:"actionDropdown",showPoint:!0}))}},612499:(e,t,n)=>{n.d(t,{Z0:()=>tn});var o=n(848318),a=n(301168),r=n(660376),l=n(585886),i=n(553547),c=n(781239),s=n(156137),d=n(967688),p=n(957872),m=n(863270),u=n(696786),_=n(361323),E=n(303397),g=n(959750),y=n(702038),h=n(489082),v=n(963307),f=n(313405),I=n(991675),N=n(247852),T=n(322638),b=n(998390),A=n(454805),P=n(244534),S=n(142896),C=n(632727),O=n(52463),x=n(434328),w=n(190561),D=n(753644),k=n(483157),R=n(614892),M=n(847526);class L extends c.o6{render(){return o.createElement(R.Zk,null,o.createElement(R.fI,null,o.createElement(k.Q,null,(0,d.tx)("proto.menu.background"))),o.createElement(U,{...this.props}))}}function U(e){let t=o.useRef(null),n=o.useRef(null),a=(0,u.GS)(),{dispatch:r,pickerShown:l,prototypeBackgroundColor:i}=e,s=o.useCallback(()=>{let e=a?n.current:t.current;if(l&&l.id===S.$T)r(P.XE());else if(e&&e instanceof HTMLElement){let t=(0,O.cn)(e);r(P.u1({id:S.$T,initialX:t.x,initialY:t.y}))}},[r,l,a]),d=o.useCallback((e,t)=>{r((0,f._P)({name:"Prototype Background Modified"})),E.Y5.updateSelectionProperties({prototypeBackgroundColor:e},{shouldCommit:t})},[r]),p=(0,h._W)(i,{r:0,g:0,b:0,a:1}),m=o.createElement("div",{className:"prototype_background_panel--colorValueContainer--CEbzl paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},o.createElement(x.J,{onClick:s,color:p,opacity:p.a,recordingKey:c.Pt(e,"chit"),className:"prototype_background_panel--chit--F--d0 paint_panels--chit--twQEy"}),o.createElement(D.AN,{className:"prototype_background_panel--color--e5Pc8 paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:C.TI,property:p,onChange:d,recordingKey:c.Pt(e,"colorInput"),noBorderOnFocus:!0}));return o.createElement(o.Fragment,null,a?o.createElement(M.TN,{ref:n},m):o.createElement(R.fI,{ref:t,className:"prototype_background_panel--colorRow--MtNeY"},m),l&&l.id===S.$T&&o.createElement(w.h,{disabledVariableIds:new Set,initialPosition:new A.Mi(l.initialX??0,l.initialY??0),color:p,boundVariable:null,onChange:d,recordingKey:c.Pt(e,"colorPicker")}))}L.displayName="PrototypeBackgroundPanel";var K=n(779492),V=n(250838),B=n(23207),F=n(544405),G=n(751304),z=n(176143),W=n(382902),Y=n(401970),H=n(899386),j=n(17753),$=n(232958),J=n(434124),X=n(483189);let q="prototype_device_panel--deviceOption--rvW-q",Z="prototype_device_panel--inactiveLabel--UEKyk raw_components--iconInsideBorderFocusWithin--2g7fO",Q="prototype_device_panel--labelInactive--pv4Sf";var ee=n(375572),et=n(988712);class en extends o.PureComponent{constructor(){super(...arguments),this.deviceInfo=()=>H.hY[this.props.prototypeDevice.presetIdentifier],this.shouldShowModelDropdown=()=>{let e=this.deviceInfo();return H.yr[e?.deviceName||""].length>1},this.onModelChange=e=>{if(!this.deviceInfo())return;let t=H.hY[e];if(!t)return;let n=this.props.prototypeDevice.rotation;E.Y5.updateSelectionProperties({prototypeDevice:{type:"PRESET",size:t.framePresetSize,presetIdentifier:e,rotation:n}})},this.renderModelDropdown=(e,t,n)=>{if(!e)return;let a=o.createElement(er,{presetIdentifier:this.deviceInfo().presetIdentifier,onChange:this.onModelChange,recordingKey:c.Pt(this.props,"modelDropdown")}),r=t?o.createElement(M.dx,{left:a,right:n}):o.createElement(M.TN,null,a);return o.createElement("div",null,!this.props.isUI3&&o.createElement(R.hl,null,o.createElement(R.nV,{className:Q},(0,d.tx)("presets.device_panel.model"))),this.props.isUI3?r:o.createElement(R.fI,null,a))},this.cssForCurrentDeviceRotation=()=>{if("NONE"===this.props.prototypeDevice.type)return;let e="";switch("MICROSOFT_SURFACE_PRO_4"===this.props.prototypeDevice.presetIdentifier&&(e="scale(0.65)"),this.props.prototypeDevice.rotation){case"NONE":default:return;case"CCW_90":return`rotate(-90deg) ${e}`}},this.renderDevicePreview=()=>{let e=this.deviceInfo();if(!e)return;let t=(0,h._W)(this.props.prototypeBackgroundColor,{r:0,g:0,b:0,a:0}),n=C.z5.format(t),a=t.r>.9&&t.g>.9&&t.b>.9,r=`1px solid ${a?"#EFEFEF":"transparent"}`,l=o.createElement("div",{className:"prototype_device_panel--devicePreview--T2Tzn",style:{backgroundColor:n,border:r}},o.createElement("img",{className:"prototype_device_panel--deviceImage--Wpr8Y",src:e.thumbnailUrl,style:{transform:this.cssForCurrentDeviceRotation()},alt:`${e.getI18nDeviceName()}`}));return o.createElement("div",null,!this.props.isUI3&&o.createElement(R.hl,null,o.createElement(R.nV,{className:Q},(0,d.tx)("presets.device_panel.preview"))),this.props.isUI3?o.createElement(M.TN,{appendedClassName:X.Rk},l):o.createElement("div",{className:"prototype_device_panel--devicePreviewContainer--pC-H4"},l))},this.onChangeOrientation=e=>{let t=this.props.prototypeDevice;if("NONE"===t.type)return;let n=t.size.y>t.size.x,o=t.rotation;o=n?"PORTRAIT"===e?"NONE":"CCW_90":"PORTRAIT"===e?"CCW_90":"NONE",E.Y5.updateSelectionProperties({prototypeDevice:{...t,rotation:o}})},this.currentDeviceOrientation=()=>{let e=this.props.prototypeDevice;return"NONE"===e.type?"PORTRAIT":e.size.y>e.size.x?"NONE"===e.rotation?"PORTRAIT":"LANDSCAPE":"NONE"===e.rotation?"LANDSCAPE":"PORTRAIT"}}render(){let e=this.props.prototypeDevice,t=o.createElement(ea,{dispatch:this.props.dispatch,prototypeDevice:this.props.prototypeDevice,isUI3:this.props.isUI3,recordingKey:c.Pt(this.props,"deviceDropdown")}),n=o.createElement(K.bL,{onChange:this.onChangeOrientation,recordingKey:c.Pt(this.props,"orientationControl"),value:this.currentDeviceOrientation(),legend:o.createElement(V.q,null,(0,d.t)("presets.device_panel.rotation"))},o.createElement(K.c$,{"aria-label":(0,d.t)("presets.device_panel.rotation.portrait"),value:"PORTRAIT",icon:o.createElement(Y.U,{svg:et.A},o.createElement(G.l,null))}),o.createElement(K.c$,{"aria-label":(0,d.t)("presets.device_panel.rotation.landscape"),value:"LANDSCAPE",icon:o.createElement(Y.U,{svg:ee.A},o.createElement(z.J,null))})),a=(0,H.$X)(e.type||"NONE",e.presetIdentifier),r=o.createElement(R.fI,null,t,a&&n),l=this.deviceInfo()&&this.shouldShowModelDropdown(),i=a&&!l?o.createElement(M.dx,{left:t,right:n}):o.createElement(M.TN,null,t),s=o.createElement(eo,{prototypeDevice:this.props.prototypeDevice,dispatch:this.props.dispatch,smallNudgeAmount:this.props.smallNudgeAmount,bigNudgeAmount:this.props.bigNudgeAmount,recordingKey:c.Pt(this.props,"deviceSizeInputs")});return o.createElement(R.Zk,null,o.createElement(R.fI,{className:"prototype_device_panel--panelTitleRowOuter--wkKKy collapsible_property_panel--panelTitleRowOuter--i5K0R"},o.createElement(k.Q,{innerRef:this.props.titleRef,extended:this.props.isUI3,doNotReserveSpaceForChevron:!0,forceNoChevron:!0},this.props.isUI3?(0,d.tx)("presets.device_panel.prototype_settings"):(0,d.tx)("presets.device_panel.device"))),this.props.isUI3?i:r,this.renderModelDropdown(!!l,a,n),this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s,this.props.isUI3&&o.createElement(U,{pickerShown:this.props.pickerShown,dispatch:this.props.dispatch,prototypeBackgroundColor:this.props.prototypeBackgroundColor,recordingKey:c.Pt(this.props,"backgroundPanel")}),this.renderDevicePreview(),!this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s)}}function eo(e){let t=o.useCallback(t=>{E.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:t,y:e.prototypeDevice.size.y},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.y,e.prototypeDevice.rotation]),n=o.useCallback(t=>{E.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:e.prototypeDevice.size.x,y:t},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.x,e.prototypeDevice.rotation]),a=o.createElement($.$j,{bigNudgeAmount:e.bigNudgeAmount,className:"prototype_device_panel--scrubbableInputLeftCol--P2T66 prototype_device_panel--scrubbableInput--0TFVb","data-tooltip":(0,d.t)("presets.device_panel.device_width_tooltip"),"data-tooltip-type":j.Ib.TEXT,dispatch:e.dispatch,inputClassName:"prototype_device_panel--leftColInput--pAJSy prototype_device_panel--input--vNirJ",onValueChange:t,recordingKey:c.Pt(e,"deviceWidth"),smallNudgeAmount:e.smallNudgeAmount,tooltipForScreenReadersOnly:!0,value:e.prototypeDevice.size.x},o.createElement("span",{className:Z},(0,d.tx)("proto.device_panel.width"))),r=o.createElement($.$j,{bigNudgeAmount:e.bigNudgeAmount,className:"prototype_device_panel--scrubbableInput--0TFVb","data-tooltip":(0,d.t)("presets.device_panel.device_height_tooltip"),"data-tooltip-type":j.Ib.TEXT,dispatch:e.dispatch,inputClassName:"prototype_device_panel--input--vNirJ",onValueChange:n,recordingKey:c.Pt(e,"deviceHeight"),smallNudgeAmount:e.smallNudgeAmount,tooltipForScreenReadersOnly:!0,value:e.prototypeDevice.size.y},o.createElement("span",{className:Z},(0,d.tx)("proto.device_panel.height")));return(0,u.GS)()?o.createElement(M.dx,{left:a,right:r}):o.createElement(R.fI,null,a,r)}en.displayName="PrototypeDevicePanel";class ea extends c.o6{constructor(){super(...arguments),this.formatter={format:e=>"NONE"===e?this.props.isUI3?(0,d.t)("proto.frame_preset_panel.no_device"):(0,d.t)("proto.frame_preset_panel.none"):"CUSTOM"===e?(0,d.t)("proto.frame_preset_panel.custom_size"):"PRESENTATION"===e?(0,d.t)("proto.frame_preset_panel.presentation"):e.getI18nDeviceName(),isEqual:(e,t)=>"NONE"===e||"CUSTOM"===e||"PRESENTATION"===e||"NONE"===t||"CUSTOM"===t||"PRESENTATION"===t?e===t:e.presetIdentifier===t.presetIdentifier},this.onChange=e=>{(0,f.$J)(e,this.props.prototypeDevice);let t=this.props.prototypeDevice.type,n=t;n="NONE"===e?"NONE":"PRESENTATION"===e?"PRESENTATION":"CUSTOM"===e?"CUSTOM":"PRESET",this.props.dispatch((0,f._P)({name:"Prototype Device Type Changed",params:{oldType:this.props.prototypeDevice.presetIdentifier||t,newType:e.presetIdentifier||n,isInlinePreviewOpened:W.zl.get(J.hg).modalStatus===J.bi.OPEN}}))},this.renderPresetOption=(e,t)=>{let n=(0,H.Fh)(e,this.props.prototypeDevice);if(null===n)return null;let a=n.framePresetSize;return o.createElement(B.c$,{value:n.presetIdentifier,key:t},o.createElement("div",{className:q},o.createElement("span",null,n.getI18nDeviceName()),o.createElement("span",null,a.x,"\u200A\xd7\u200A",a.y)," "))}}render(){let e;let t="string"==typeof(e="NONE"===this.props.prototypeDevice.type?"NONE":"PRESENTATION"===this.props.prototypeDevice.type?"PRESENTATION":"CUSTOM"===this.props.prototypeDevice.type?"CUSTOM":H.hY[this.props.prototypeDevice.presetIdentifier]||"NONE")?e:e.presetIdentifier;return o.createElement(B.bL,{onChange:e=>{"NONE"===e||"PRESENTATION"===e||"CUSTOM"===e?this.onChange(e):this.onChange((0,H.Fh)(e,this.props.prototypeDevice))},recordingKey:c.Pt(this.props,"select"),value:t},o.createElement(B.l9,{label:o.createElement(F.h,null,(0,d.tx)("proto.frame_preset_panel.device")),width:"fill"},this.formatter.format(e)),o.createElement(B.mc,null,o.createElement(B.c$,{value:"NONE"},(0,d.tx)("proto.frame_preset_panel.no_device")),o.createElement(B.wv,null),H.r6.map(this.renderPresetOption),o.createElement(B.wv,null),H.J_.map(this.renderPresetOption),o.createElement(B.wv,null),H.AG.map(this.renderPresetOption),o.createElement(B.wv,null),H.$w.map(this.renderPresetOption),o.createElement(B.wv,null),o.createElement(B.c$,{value:"CUSTOM"},o.createElement("div",{className:q},o.createElement("span",null,(0,d.tx)("proto.frame_preset_panel.custom_size")),o.createElement("span",null,(0,d.tx)("proto.frame_preset_panel.fit")))),o.createElement(B.c$,{value:"PRESENTATION"},o.createElement("div",{className:q},o.createElement("span",null,(0,d.tx)("proto.frame_preset_panel.presentation")),o.createElement("span",null,(0,d.tx)("proto.frame_preset_panel.fill")))),o.createElement(B.wv,null),H.dr.map(this.renderPresetOption)))}}ea.displayName="DeviceDropdown";class er extends c.o6{constructor(){super(...arguments),this.formatter={format:e=>{let t=H.hY[e];return t?t.getI18nStyleName():(0,d.t)("proto.frame_preset_panel.missing")},isEqual:(e,t)=>e===t},this.renderStyleOption=(e,t)=>{let n=e.presetIdentifier;return o.createElement(B.c$,{value:n,key:t},H.hY[n].getI18nStyleName())}}render(){let e=H.hY[this.props.presetIdentifier];if(!e)return null;let t=H.yr[e.deviceName],n=this.props.presetIdentifier;return o.createElement(B.bL,{onChange:this.props.onChange,recordingKey:c.Pt(this.props,"select"),value:n},o.createElement(B.l9,{label:o.createElement(F.h,null,(0,d.tx)("proto.frame_preset_panel.device.model")),width:"fill"},this.formatter.format(n)),o.createElement(B.mc,null,t.map(this.renderStyleOption)))}}er.displayName="ModelDropdown";var el=n(340427),ei=n(85028),ec=n(83677),es=n(271020),ed=n(323209),ep=n(749214);let em=(0,o.memo)(function(e){return(0,ep.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,ep.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M9.146 6.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 9H9a3 3 0 1 0 0 6h.5a.5.5 0 0 1 0 1H9a4 4 0 0 1 0-8h1.293L9.146 6.854a.5.5 0 0 1 0-.708M14 8.5a.5.5 0 0 1 .5-.5h.5a4 4 0 0 1 0 8h-1.293l1.147 1.146a.5.5 0 0 1-.708.708l-2-2a.5.5 0 0 1 0-.708l2-2a.5.5 0 0 1 .708.708L13.707 15H15a3 3 0 1 0 0-6h-.5a.5.5 0 0 1-.5-.5",clipRule:"evenodd"})})}),eu=(0,o.memo)(function(e){return(0,ep.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,ep.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17.854 6.854a.5.5 0 0 0-.708-.708l-11 11a.5.5 0 0 0 .708.708zm-8.708-.708a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 9H9a3 3 0 0 0-2.143 5.1.5.5 0 0 1-.714.7A4 4 0 0 1 9 8h1.293L9.146 6.854a.5.5 0 0 1 0-.708m8.004 3.047a.5.5 0 0 1 .707.008A4 4 0 0 1 15 16h-1.293l1.147 1.145a.5.5 0 0 1-.708.708l-2-2a.5.5 0 0 1 0-.708l2-2a.5.5 0 0 1 .708.708L13.707 15H15a3 3 0 0 0 2.143-5.1.5.5 0 0 1 .007-.707",clipRule:"evenodd"})})});var e_=n(717865);let eE=(0,o.memo)(function(e){return(0,ep.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,ep.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M14 7.879v-1.88a1 1 0 0 0-1.707-.706L9.586 8H7.5A1.5 1.5 0 0 0 6 9.5v5c0 .383.144.733.38.998l.711-.71A.5.5 0 0 1 7 14.5v-5a.5.5 0 0 1 .5-.5H10l2-2 1-1v2.879zm0 4.242-1 1V18l-1-1-1.44-1.44-.706.708 2.439 2.439A1 1 0 0 0 14 18v-5.88m2.069-2.068.71-.71a3.501 3.501 0 0 1-1.217 5.993c-.29.092-.562-.144-.562-.448v-.03c0-.237.17-.437.392-.522a2.5 2.5 0 0 0 .677-4.283m-1.013 1.013.172-.172c.113-.056.248-.044.36.073.255.269.412.632.412 1.033s-.157.764-.412 1.033c-.238.25-.588.02-.588-.326v-1.415a.5.5 0 0 1 .056-.226m2.798-4.92a.5.5 0 0 1 0 .708l-11 11a.5.5 0 1 1-.708-.707l11-11a.5.5 0 0 1 .708 0",clipRule:"evenodd"})})});var eg=n(720522),ey=n(767449),eh=n(699848),ev=n(210983),ef=n(983040),eI=n(821909),eN=n(621897),eT=n(235558);function eb({videoPlayback:{mediaLoop:e,muted:t}}){let n=null;return(0,h.gl)(e)&&(0,h.gl)(t)?n=(0,d.tx)("proto.prototype_panel.replace_mixed_muted_and_loop_video_playback",{loopSvg:o.createElement(eg.B,{svg:ef.A,className:ev.eT}),speakerSvg:o.createElement(eg.B,{svg:eN.A,className:ev.To})}):(0,h.gl)(e)?n=(0,d.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:o.createElement(eg.B,{svg:ef.A,className:ev.eT})}):(0,h.gl)(t)&&(n=(0,d.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:o.createElement(eg.B,{svg:eN.A,className:ev.To})})),n?o.createElement(R.fI,null,o.createElement(R.nV,{className:ev.pc},n)):null}let eA=e=>(0,h.gl)(e)?"mixed":e,eP=e=>!0===e,eS=function(e){let t=()=>{let t=!eP(e.videoPlayback.mediaLoop);e.updateSelectionProperties({videoMediaLoop:t}),e.dispatch((0,f._P)({name:"Node video loop changed",params:{newLoop:t,oldLoop:eA(e.videoPlayback.mediaLoop),numVideosSelected:e.videoPlayback.numVideosSelected}}))},n=()=>{let t=!e.videoPlayback.muted;e.updateSelectionProperties({videoMuted:t}),e.dispatch((0,f._P)({name:"Node video muted changed",params:{newMuteValue:t,oldMuteValue:eA(e.videoPlayback.muted),numVideosSelected:e.videoPlayback.numVideosSelected}}))},a=o.createElement("span",{className:(0,u.GS)()?void 0:ev.hW},o.createElement(es.S,{label:o.createElement(F.J,{htmlAttributes:{"data-tooltip":(0,d.t)("proto.prototype_panel.default_video_playback_state"),"data-tooltip-type":j.Ib.TEXT}},(0,d.tx)("proto.prototype_panel.autoplay")),onChange:t=>{e.updateSelectionProperties({videoAutoplay:t}),e.dispatch((0,f._P)({name:"Node video autoplay Changed",params:{newAutoplay:t,oldAutoplay:eA(e.videoPlayback.autoplay),numVideosSelected:e.videoPlayback.numVideosSelected}}))},checked:eP(e.videoPlayback.autoplay),mixed:(0,h.gl)(e.videoPlayback.autoplay),recordingKey:c.Pt(e,"autoPlayToggle")})),r=(0,u.GS)()?o.createElement(ed.f,{checked:eP(e.videoPlayback.mediaLoop),mixed:(0,h.gl)(e.videoPlayback.mediaLoop),onIcon:o.createElement(Y.U,{svg:ef.A},o.createElement(em,null)),offIcon:o.createElement(Y.U,{svg:eI.A},o.createElement(eu,null)),onChange:t,"data-testid":"videoLoopToggle",recordingKey:c.Pt(e,"videoLoopToggle"),"aria-label":(0,d.t)("proto.prototype_panel.loop"),htmlAttributes:{"data-tooltip":(0,d.t)("proto.prototype_panel.loop"),"data-tooltip-type":j.Ib.TEXT}}):o.createElement(ey.m,{toggled:eP(e.videoPlayback.mediaLoop),svg:e.videoPlayback.mediaLoop?ef.A:eI.A,fallbackSvg:e.videoPlayback.mediaLoop?ef.A:eI.A,onMouseDown:t,recordingKey:c.Pt(e,"videoLoopToggle"),"data-tooltip-type":j.Ib.TEXT,"data-tooltip":(0,d.t)("proto.prototype_panel.loop"),dataTestId:"videoLoopToggle",className:ev.BM}),l=(0,u.GS)()?o.createElement(ed.f,{checked:eP(!e.videoPlayback.muted),mixed:(0,h.gl)(e.videoPlayback.muted),onIcon:o.createElement(Y.U,{svg:eN.A},o.createElement(e_.L,null)),offIcon:o.createElement(Y.U,{svg:eT.A},o.createElement(eE,null)),onChange:n,"data-testid":"videoSoundToggle",recordingKey:c.Pt(e,"videoSoundToggle"),"aria-label":(0,d.t)("proto.prototype_panel.sound"),htmlAttributes:{"data-tooltip":(0,d.t)("proto.prototype_panel.sound"),"data-tooltip-type":j.Ib.TEXT}}):o.createElement(ey.m,{toggled:!e.videoPlayback.muted,svg:eP(e.videoPlayback.muted)?eT.A:eN.A,fallbackSvg:eP(e.videoPlayback.muted)?eT.A:eN.A,onMouseDown:n,recordingKey:c.Pt(e,"videoSoundToggle"),"data-tooltip-type":j.Ib.TEXT,"data-tooltip":(0,d.t)("proto.prototype_panel.sound"),dataTestId:"videoSoundToggle",className:ev.BM}),i=(0,u.GS)()?o.createElement(eh.pG,{input:a,leftIcon:r,rightIcon:l,label:null}):o.createElement(R.fI,{className:ev.kh},a,o.createElement("div",{className:ev.zc},r,l));return o.createElement(R.Zk,null,o.createElement(R.fI,null,o.createElement(k.Q,{extended:!0},(0,d.tx)("proto.prototype_panel.video"))),i,o.createElement(eb,{videoPlayback:e.videoPlayback}))};var eC=n(345204),eO=n(871043),ex=n(536070),ew=n(186606),eD=n(320953),ek=n(813009),eR=n(754210),eM=n(554326),eL=n(120846),eU=n(494604),eK=n(297638),eV=n(244052),eB=n(94747),eF=n(330785);function eG(e){let{type:t}=e;return o.createElement("div",{className:eK.s.flex.justifyCenter.itemsCenter.$},o.createElement(eg.B,{className:eK.s.flexGrow1.mx12.$,useOriginalSrcFills_DEPRECATED:!0,svg:"horizontal"===t?eB.A:eF.A}),o.createElement("span",{className:eK.s.flexGrow1.m6.$,style:{maxWidth:144}},(0,d.tx)("proto.prototype_panel.content_needs_to_be_bigger_than_the_frame_tooltip")))}let ez=(0,eV.ex)("prototype_scroll_horizontal_info",eG,()=>({type:"horizontal",unconstrainWidth:!0})),eW=(0,eV.ex)("prototype_scroll_vertical_info",eG,()=>({type:"vertical",unconstrainWidth:!0})),eY=(0,eV.ex)("prototype_scroll_marquee_info",function(){return o.createElement("div",{className:eK.s.flex.justifyCenter.itemsCenter.$},o.createElement("span",{className:eK.s.flexGrow1.m6.$,style:{maxWidth:144}},(0,d.tx)("proto.prototype_panel.overflow_scrolling_not_available_for_frames_with_marquee")))},()=>({}));var eH=n(596224);let ej="scroll_behavior_panel--inactiveLabel--IexW8",e$="scroll_behavior_panel--inactiveLabelContainer--lQjAi";function eJ(e){let{disableOverflowBehaviorItem:t,disableScrollBehaviorItem:n,dropdownShown:r,updateSelectionProperties:l}=e,i=(0,a.wA)(),[p,m]=function(){let e=(0,eM.J2)(ew.Ez5.propertiesPanelState().shownPropertiesPanels)[ew.ibQ.OVERFLOW_ITEM],t=(0,eH.cJ)(),n=(0,v.kl)("isSection"),o=(0,v.kl)("anyTopLevelFramesInSelection");return[e,!t&&!n&&!o]}(),[_]=(0,v.lJ)("showWontScrollWarning"),[E]=(0,v.lJ)("scrollDirection"),g=e1(),y=o.useId(),I=(0,u.GS)()?o.createElement(eU.iE,{titleTx:(0,d.tx)("proto.scroll_panel.scroll_behavior_title")}):o.createElement(R.fI,null,o.createElement(k.Q,{className:"scroll_behavior_panel--panelTitle--kN-Nl"},(0,d.tx)("proto.scroll_panel.scroll_behavior_title")));return p||m?o.createElement(s.k,{name:"scroll_behavior_panel"},o.createElement(R.Zk,null,I,m&&o.createElement(R.fI,null,o.createElement("div",{className:e$},o.createElement("span",{id:y,className:ej},(0,d.tx)("proto.scroll_panel.position_dropdown.position"))),o.createElement(e0,{ariaLabelledBy:y,recordingKey:c.Pt(e,"scrollBehavior"),dropdownShown:r,disabled:n})),p&&o.createElement(R.fI,null,o.createElement("div",{className:e$},o.createElement("span",{className:ej},(0,d.tx)("proto.scroll_panel.overflow_dropdown.overflow"))),_&&o.createElement("div",{className:"scroll_behavior_panel--infoIcon--FeXbf","data-tooltip-type":j.Ib.SPECIAL,"data-tooltip":g?eY:"HORIZONTAL"===E?ez:eW,"data-tooltip-show-immediately":!0},o.createElement(ex.r,null)),o.createElement(eq,{className:_?"scroll_behavior_panel--scrollDirectionShort--w6iSo":"scroll_behavior_panel--scrollDirection--XSmzK",property:E,onChange:e=>{i((0,f._P)({name:"Overflow Behavior changed",params:{newDirection:e,oldDirection:(0,h._W)(E,"MIXED")}})),l({scrollDirection:e})},disabled:t||g,recordingKey:c.Pt(e,"scrollDirection")})))):null}let eX=["NONE","HORIZONTAL","VERTICAL","BOTH"];class eq extends o.PureComponent{render(){return o.createElement("div",{className:this.props.className},o.createElement(B.bL,{onChange:this.props.onChange,value:this.props.property||"NONE",recordingKey:this.props.recordingKey},o.createElement(B.l9,{"data-testid":"scroll-direction-dropdown",disabled:this.props.disabled,label:o.createElement(F.h,null,(0,d.tx)("proto.scroll_panel.overflow_dropdown.overflow")),width:"fill"}),o.createElement(B.mc,null,eX.map(e=>o.createElement(B.c$,{key:e,value:e},eR.Rk.format(e))))))}}eq.displayName="ScrollDirectionDropdown";let eZ=eL.l6,eQ=eL.c$;function e0(e){let t=(0,a.wA)(),n=(0,v.kl)("scrollBehavior"),{fixedScrollingDisabled:r}=(0,ek.R)(e=>{let t=e.mirror.selectionProperties;return{fixedScrollingDisabled:!t.nodesAreAllNotInStacksOrAbsolutePositioned||!t.allHaveScrollableFrameAsParent}}),l="scroll-behavior-select",i=e.dropdownShown&&e.dropdownShown.type===l?eR.Ge:eR.wi;return o.createElement(eZ,{ariaLabelledBy:e.ariaLabelledBy,className:"scroll_behavior_panel--scrollPosition--YAyUM",dataTestId:"scroll-behavior-dropdown",disabled:e.disabled,dispatch:t,dropdownClassName:"scroll_behavior_panel--fullWidth--reSmx",dropdownShown:e.dropdownShown,formatter:i,id:l,onChange:e=>{t((0,f._P)({name:"Node Scroll Behavior Changed",params:{newValue:e}}));let n="FIXED_WHEN_CHILD_OF_SCROLLING_FRAME"===e?ew.KjJ.FIXED:"STICKY_SCROLLS"===e?ew.KjJ.STICKY_SCROLLS:ew.KjJ.SCROLLS;eD.l7.user("set-scroll-behavior",()=>ew.X3B.aggressivelySetScrollBehaviorOfSelection(n)),E.Y5.commit()},property:n||"SCROLLS",recordingKey:e.recordingKey},o.createElement(eQ,{value:"SCROLLS"}),o.createElement(eQ,{value:"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME",disabled:r}),o.createElement(eQ,{value:"STICKY_SCROLLS"}))}let e1=()=>{let[e]=(0,v.lJ)("marquee");return!!(0,eO.EA)(e)};var e5=n(386160),e3=n(328437),e2=n(201898),e4=n(903582),e8=n(380641),e6=n(691234);function e7(){return o.createElement(T.u,{idForTests:"create-connection-hint",title:(0,d.t)("proto.onboarding.creating_a_connection"),userFlag:"dismissed_create_connection_hint",icon_DEPRECATED:e4.A,iconFallback:e8.A,hintText:(0,d.t)("proto.onboarding.select_a_frame_or_object_hint")})}function e9(){return o.createElement(T.u,{idForTests:"delete-connection-hint",title:(0,d.t)("proto.onboarding.removing_a_connection"),userFlag:"dismissed_delete_connection_hint",icon_DEPRECATED:e3.A,iconFallback:e2.A,hintText:(0,d.t)("proto.onboarding.to_delete_a_connection_click_and_drag_on_either_end")})}function te(){return o.createElement(T.u,{idForTests:"play-button-hint",title:(0,d.t)("proto.onboarding.running_your_prototype"),userFlag:"dismissed_play_button_hint",icon_DEPRECATED:e6.A,hintText:(0,d.t)("proto.onboarding.use_the_play_button_hint")})}function tt({dismissedCreateConnectionHint:e,dismissedDeleteConnectionHint:t,dismissedPlayButtonHint:n,numTransitionsOnCurrentPage:a}){let r=0===a&&!e,l=0!==a&&!t,i=!n,c=o.useMemo(()=>r?p.c.CREATING_A_CONNECTION:l?p.c.REMOVING_A_CONNECTION:i?p.c.RUNNING_YOUR_PROTOTYPE:null,[r,l,i]);return c?o.createElement(m.fu,{name:"Prototype Onboarding Hint Panel V1",properties:{trackingDescriptor:c}},o.createElement(R.Zk,null,o.createElement("div",null,r&&o.createElement(e7,null),l&&o.createElement(e9,null),i&&o.createElement(te,null)))):null}let tn=(0,m.kp)(function(e){let{dropdownShown:t,pickerShown:n,shouldUseSelectedStyleProperties:p,userFlags:m}=e,{isInstanceSelected:I,isInstanceSublayerSelected:T,isCodeInstanceSelected:A,isSectionSelected:P,isTopLevelFrameAndValidPrototypeSourceSelected:S,isValidPrototypingSourceSelected:C,numSelected:O,numTransitionsOnCurrentPage:x,numVideosSelected:w,prototypeBackgroundColor:D,prototypeDevice:k,prototypeStartingPointsInfo:M,transitionNodeID:U}=function(e){let t=e?v.pw:v.zj,n=e?v.DQ:v.fC;return{...t("prototypeDevice","prototypeBackgroundColor","numSelected","numVideosSelected","transitionNodeID","isInstanceSublayerSelected","isInstanceSelected","isCodeInstanceSelected","isValidPrototypingSourceSelected","isTopLevelFrameAndValidPrototypeSourceSelected"),...n("isSectionSelected","numTransitionsOnCurrentPage","prototypeStartingPointsInfo")}}(p),K=(0,u.GS)(),V=(0,eH.cJ)(),{bigNudgeAmount:B,smallNudgeAmount:F}=(0,g.sT)(),G=function(e){let t=(0,v.Gt)("videoMediaLoop"),n=(0,v.Gt)("videoAutoplay"),o=(0,v.Gt)("videoMuted"),a=(0,v.Gt)("numVideosSelected");if(e)return(0,r.B1)(t),(0,r.B1)(n),(0,r.B1)(o),(0,r.B1)(a),{autoplay:n,muted:o,mediaLoop:t,numVideosSelected:a}}(!!w),z=(0,h.E7)(O),W=null!==z&&z>0,Y=(0,a.wA)(),H=o.useCallback(()=>{Y((0,f._P)({name:"Show Prototype Settings Clicked"})),y.wr()},[Y]),j=o.useRef(!1),$=o.useRef(!1),J=o.useCallback(()=>{$.current=!0},[]),X=o.useCallback(()=>{$.current=!1},[]),q=o.useRef(null),Z=o.useRef(null);o.useEffect(()=>{if(!$.current)return;if(j.current&&q.current){q.current.focus();return}let e=(0,_.xv)(Z.current);e&&e.focus()},[W]);let Q=!(0,h.hS)(U)||i.fn((0,h.E7)(U)),ee=!V&&!!w,et=!V&&M&&M.length>0,eo=V||Q?null:o.createElement(tt,{dismissedCreateConnectionHint:!!m.dismissed_create_connection_hint,dismissedDeleteConnectionHint:!!m.dismissed_delete_connection_hint,dismissedPlayButtonHint:!!m.dismissed_play_button_hint,numTransitionsOnCurrentPage:x}),ea=!V&&((C??!0)||P&&(0,b.YR)());return(0,r.KF)(W||V||(0,h.hS)(k),"should not have mixed device selection"),o.createElement("div",{ref:Z,onBlur:X,onFocus:J,onPointerDown:e=>{j.current=(0,l.n4)(e.nativeEvent)}},W?o.createElement(o.Fragment,null,!V&&S&&o.createElement(ec.A,{recordingKey:c.Pt(e,"startingPointPanel")}),ea&&o.createElement(ei.y7,null),!A&&o.createElement(eJ,{dropdownShown:t,disableOverflowBehaviorItem:!!(I||T),disableScrollBehaviorItem:!!T,recordingKey:c.Pt(e,"scrollBehaviorPanel"),updateSelectionProperties:E.Y5.updateSelectionProperties}),ee&&o.createElement(eS,{updateSelectionProperties:E.Y5.updateSelectionProperties,dispatch:Y,videoPlayback:G,recordingKey:c.Pt(e,"prototypeVideoPlaybackPanel")}),!V&&o.createElement(s.k,{name:"show_prototype_settings_panel"},o.createElement(R.Zk,{className:K?e5.rq:void 0},o.createElement(eC.z,{onClick:H,recordingKey:c.Pt(e,"prototypeSettingsButton")},(0,d.tx)("proto.menu.show_prototype_settings"))))):o.createElement(o.Fragment,null,!V&&o.createElement(en,{key:"device-panel",bigNudgeAmount:B,dispatch:Y,isUI3:K,pickerShown:n,prototypeBackgroundColor:D,prototypeDevice:(0,f.Qx)(k),recordingKey:"devicePanel",smallNudgeAmount:F,titleRef:q}),!K&&o.createElement(L,{recordingKey:c.Pt(e,"backgroundPanel"),prototypeBackgroundColor:D,pickerShown:n,dispatch:Y}),et&&o.createElement(el.A,null)),eo,o.createElement(N.Mw,{panelName:N.ON.PROTOTYPE}),W&&o.createElement("div",null))},I.e0.PROTOTYPE_PANEL)},815934:(e,t,n)=>{n.d(t,{B:()=>f});var o=n(848318),a=n(301168),r=n(353317),l=n(361765),i=n(781239),c=n(41830),s=n(156137),d=n(401970),p=n(967688),m=n(788903),u=n(507621),_=n(17753),E=n(483157),g=n(614892),y=n(228871),h=n(821561);function v(e){return e.modalShown?.type===y.y.type||e.modalShown?.prevModal?.type===y.y.type}function f(){let e=(0,u.n)({type:y.y}),t=(0,o.useCallback)(()=>{e()},[e]),n=(0,a.d4)(v),f=0===(0,m.Rb)().length&&!n;return o.createElement(s.k,{name:"local_variables_panel"},o.createElement(g.Zk,null,o.createElement(g.fI,{className:f?"local_variables_panel--localVariablesPanelRowFaded--atToe local_variables_panel--localVariablesPanelRow--zR8nJ draggable_list--panelHeaderRowFaded--kETRR":"local_variables_panel--localVariablesPanelRow--zR8nJ"},o.createElement(E.x,{className:"local_variables_panel--titleText--7rdD7 draggable_list--panelTitleText--SwKez",onClick:t,"data-onboarding-key":"local-variables-panel-title"},(0,p.tx)("variables.local_variables_panel.local_variables_title")),o.createElement(c.E,{name:"variables_modal_button"},o.createElement(r.d,{onClick:t,recordingKey:(0,i.Pt)("localVariablesPanel","variablesModalButton"),"aria-expanded":n,"aria-label":(0,p.t)("variables.local_variables_panel.open_variables_button_tooltip"),htmlAttributes:{"data-tooltip":(0,p.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip-type":_.Ib.TEXT}},o.createElement(d.U,{svg:h.A},o.createElement(l.A,null)))))))}},770898:(e,t,n)=>{n.d(t,{S:()=>v});var o=n(848318),a=n(88706),r=n(422482),l=n(573556),i=n(637721),c=n(491383),s=n(186606),d=n(768618),p=n(82433),m=n(382902),u=n(334804),_=n(614092),E=n(124213),g=n(927148);let y={fileItemLabel:{display:"x78zum5",alignItems:"x6s0dn4",gap:"x1jnr06f",padding:"xehqz9p",borderRadius:"x12oqio5",backgroundColor:"x1yjdb4r",color:"x1akne3o","--color-icon":"xtlvio2",textAlign:"xdpxx8g",":hover_backgroundColor":"x12tve8b",whiteSpace:"xuxw1ft",overflowX:"x6ikm8r",textOverflow:"xlyipyv",width:"xh8yej3",$$css:!0},fileItemLabelActive:{backgroundColor:"xcr9a89",color:"x1akne3o",fontWeight:"x6xwguf","--color-icon":"xtlvio2",":hover_backgroundColor":"x14m9vh9",":hover_color":"x1c5oinq",":hover_--color-icon":"x1ydjwli",$$css:!0},folderItemLabel:{flex:"x98rzlu",display:"x78zum5",alignItems:"x6s0dn4",gap:"x195vfkc",borderRadius:"x12oqio5",":hover_backgroundColor":"x12tve8b",$$css:!0},disabled:{color:"xge78cn",backgroundColor:"x1yjdb4r",":hover_backgroundColor":"xtlwphu",":hover_color":"xl2twnd",$$css:!0}};function h(e){return[...e].sort((e,t)=>"file"===e.type&&"folder"===t.type?1:"folder"===e.type&&"file"===t.type?-1:e.name.localeCompare(t.name))}function v({selectedCodeFileNode:e,codeIsStreaming:t,rootPath:n}){let a=(0,m.md)(E.s0),r=(0,_.Fk)((e,t)=>(0,g.Ns)(e,t),n),l=o.useCallback(()=>{let e=r.children.find(e=>"file"===e.type&&"App.tsx"===e.name)?.guid;if(e||(e=r.children.find(e=>"file"===e.type)?.guid),e){let t=(0,d.UN)().get(e);t&&T(t,a)}},[r,a]);(0,o.useEffect)(()=>{(0,g.kv)(e)||l()},[e,r,l]);let i=o.useMemo(()=>h([...r.children]),[r.children]);return o.createElement("div",{className:"xysyzu8 x6ikm8r x1n2onr6 x5yr21d x2lah0s"},o.createElement("div",{className:"xdqdrvq x78zum5 xdt5ytf xlqzeqv x1qjc9v5 x1jnr06f"},i.map(n=>"file"===n.type?o.createElement(I,{key:n.guid,node:e,file:n,indentLevel:0,codeIsStreaming:t}):o.createElement(f,{key:n.name,node:e,folder:n,indentLevel:0,codeIsStreaming:t}))))}function f({node:e,folder:t,indentLevel:n,codeIsStreaming:i}){let[c,s]=o.useState(!1),d=o.useMemo(()=>h([...t.children]),[t.children]);return o.createElement("div",{className:"x78zum5 xdt5ytf x195vfkc xkh2ocl"},o.createElement("div",{className:"x10w6t97 x78zum5 x6s0dn4"},o.createElement("button",{onClick:()=>s(!c),...p.Ay.props(y.folderItemLabel,i?y.disabled:void 0),disabled:i},o.createElement("div",{style:{paddingLeft:16*n,display:"flex",alignItems:"center",...N(i)}},o.createElement("span",{style:{flexShrink:0}},c?o.createElement(a.r,null):o.createElement(r.R,null)),o.createElement("span",{style:{flexShrink:0}},o.createElement(l.e,null))),o.createElement(u.G,{text:t.name}))),c?d.map(t=>"file"===t.type?o.createElement(I,{key:t.guid,node:e,file:t,indentLevel:n+1,codeIsStreaming:i}):o.createElement(f,{key:t.name,node:e,folder:t,indentLevel:n+1,codeIsStreaming:i})):null)}function I({node:e,file:t,indentLevel:n,codeIsStreaming:a}){let r=(0,m.md)(E.s0);return o.createElement("button",{key:t.guid,onClick:()=>{let e=(0,d.UN)().get(t.guid);e&&T(e,r)},className:"x10w6t97 x78zum5 x6s0dn4",disabled:a},o.createElement("div",{...p.Ay.props(y.fileItemLabel,e?.guid===t.guid?y.fileItemLabelActive:void 0,a?y.disabled:void 0),style:{paddingLeft:8+16*n}},o.createElement("span",{style:{flexShrink:0,...N(a)}},o.createElement(i.i,null)),o.createElement(u.G,{text:t.name})))}function N(e){return{"--color-icon":e?c.Tj.textDisabled:void 0}}function T(e,t){t===s.Nfd.CODE?s.Ez5?.codeSelection().fullscreenCodeFileNodeId.set(e.guid):s.Ez5?.codeSelection().selectedCodeFileNodeId.set(e.guid)}},813146:(e,t,n)=>{n.d(t,{t:()=>c});var o=n(848318),a=n(773511),r=n(782073),l=n(82433);let i={suggestion:{...r.g.textBodyMedium,padding:"xdqdrvq",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,borderRadius:"x9h44rk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,border:"x1bamp8i",borderWidth:null,borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:null,borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:null,borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,color:"x1n0bwc9",cursor:"x1ypdohk",transition:"xuk1p4z",transitionBehavior:null,transitionDelay:null,transitionDuration:null,transitionProperty:null,transitionTimingFunction:null,$$css:!0},disabled:{color:"xge78cn",cursor:"x1h6gzvc",$$css:!0},enabled:{":hover_transform":"xp695gr",":hover_backgroundColor":"xv2f06h",$$css:!0}};function c({label:e,onClick:t,disabled:n}){return o.createElement(a.E,{...l.Ay.props(i.suggestion,n?i.disabled:i.enabled),onClick:t,disabled:n},e)}},320453:(e,t,n)=>{n.d(t,{u:()=>v});var o=n(848318),a=n(909678),r=n(186606),l=n(382902),i=n(648736),c=n(730143),s=n(125761),d=n(597803),p=n(255130),m=n(264530),u=n(897659),_=n(906329),E=n(162293),g=n(267266),y=n(494407),h=n(668940);function v({chatMessagesNode:e,disabled:t=!1,featureType:n}){let[v,f]=o.useState(!1),{exchange:I}=(0,p.$W)(e?.guid||"");o.useEffect(()=>{I&&!v&&f(!0)},[I,v]);let[N,T]=(0,l.fp)((0,m.o0)(e?.guid||"")),b=(0,l.md)((0,m.Nm)(e?.guid||"")),A=(0,h.E)(e),P=(0,l.md)(_.Xl),S=(0,l.md)(_.p7),C=(0,s.iZ)(),O=(0,c.tS)(),x=o.useMemo(()=>A?(0,E.EY)(A):null,[A]),[w,D]=o.useState(new Map),k=o.useMemo(()=>{if(A&&A.length>0){let e=A[A.length-1];if(e?.type===r.K$p.TOOL_MESSAGE&&e?.toolCalls.some(e=>a.AD.includes(e.toolName)))return!0}if(I?.messages&&I?.messages.length>0){let e=I.messages[I.messages.length-1];if(e?.type===r.K$p.TOOL_MESSAGE&&e?.toolCalls.some(e=>a.AD.includes(e.toolName)))return!0}return!1},[A,I]),R=n===u.lV.FIGMAKE?(0,g.P)():void 0,M=(0,d.Xu)();return{triggerSelfHeal:o.useCallback(async(e,o,a)=>{let r=await (0,i.ly)("auto-error-fix");if(r)try{if(N||t||!v||!a||M&&(P||S===_.Ut.DEPLOYING||k)||0===o.length||!x||!b||"user"===b||Date.now()-a>2e3||(w.get(x)||0)>=2)return;let r=Array.from(new Set(o));T(!0),D(e=>(e.set(x,(e.get(x)||0)+1),e)),(0,y.Oz)({userMessageContent:{plainText:"",hidden:!0,errors:r},user:C,chatMessagesNode:e,rawUserChatDetails:void 0,featureType:n,setInput:()=>{},fileKey:O,autoFixingUserMessageId:x,onFinish:()=>{T(!1)},canUseSupabase:M,changedFiles:[],model:R})}finally{await r.release()}},[N,t,v,x,b,w,T,C,n,O,R,P,S,k,M])}}},327510:(e,t,n)=>{n.d(t,{B:()=>i});var o=n(848318),a=n(128080),r=n.n(a),l=n(255130);function i(e){let[t,n]=(0,o.useState)([]),{exchange:a}=(0,l.$W)(e?.guid),i=(0,o.useRef)([]);return o.useEffect(()=>{let e=a?.messages||[];r()(e,i.current)||(i.current=e,n(e))},[a?.messages]),t}},58136:(e,t,n)=>{n.d(t,{eT:()=>eI,OX:()=>eb,Lh:()=>eT,Ld:()=>ef,D6:()=>eN});var o=n(848318),a=n(301168),r=n(135613),l=n(354427),i=n(376852),c=n(779492),s=n(250838),d=n(262989),p=n(622518),m=n(93275),u=n(309876),_=n(353317),E=n(749214);let g=(0,o.memo)(function(e){return(0,E.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,E.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.694 12c.316 0 .538.31.466.618a.49.49 0 0 1-.464.382h-.514c-.635 0-.953 0-1.206-.095a1.5 1.5 0 0 1-.881-.88C5 11.77 5 11.452 5 10.817V9a4 4 0 0 1 7.764-1.356c.088.244-.082.495-.333.563-.268.073-.548-.086-.654-.343A3 3 0 0 0 6 9v1.818c0 .33 0 .532.01.684.009.145.023.177.022.173a.5.5 0 0 0 .293.293 1 1 0 0 0 .173.022c.152.01.354.01.684.01zM14 18h2.692c.392 0 .631 0 .811-.014a1.3 1.3 0 0 0 .196-.028l.005-.002h.001a.5.5 0 0 0 .25-.25l.002-.002.001-.005.008-.03a1 1 0 0 0 .02-.166c.013-.18.014-.42.014-.81V14a4 4 0 1 0-4 4m5-4a5 5 0 1 0-5 5h2.692c.753 0 1.13 0 1.424-.132a1.5 1.5 0 0 0 .752-.752c.132-.294.132-.67.132-1.424z",clipRule:"evenodd"})})}),y=(0,o.memo)(function(e){return(0,E.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,E.jsx)("path",{fill:"var(--color-icon)",d:"M18 16.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 6 16.5v-9A1.5 1.5 0 0 1 7.5 6h9A1.5 1.5 0 0 1 18 7.5zM7.5 7a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h2V7zm6 0h-3v10h3zm3.5.5a.5.5 0 0 0-.5-.5h-2v10h2a.5.5 0 0 0 .5-.5z"})})});var h=n(618803),v=n(408193),f=n(782073),I=n(186606),N=n(768618),T=n(82433),b=n(19180),A=n(382902),P=n(813321),S=n(63163),C=n(10855),O=n(781239),x=n(396872),w=n(454805),D=n(706370),k=n(967688),R=n(303397),M=n(511067),L=n(730143),U=n(614092),K=n(442022),V=n(770898),B=n(745374),F=n(595112),G=n(764670),z=n(551011),W=n(897659),Y=n(320453),H=n(863113),j=n(909678),$=n(714713),J=n(672154),X=n(125761),q=n(495243),Z=n(255130),Q=n(766647),ee=n(813146),et=n(668940),en=n(901262),eo=n(327510),ea=n(579556),er=n(162293),el=n(481694),ei=n(494407);let ec={emptyStateContainer:{...f.g.textBodyLarge,width:"x1h93xvk",display:"x78zum5",flexDirection:"xdt5ytf",alignItems:"x6s0dn4",gap:"x1v2ro7d",rowGap:null,columnGap:null,textAlign:"x2b8uid",padding:"x1rmx8ao",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,$$css:!0}};function es({isDefaultCode:e,onClickSuggestion:t}){let n=(0,q.ry)(),a=["Make a component that displays a numeric stat. It should have a single large number (that can be set via a property) and a description underneath (that can also be set via a property). When the component is visible on the viewport, the stat should smoothly count up from 0 to the number. Make sure the text is immediately visible.","Make a background component that shows a subtle gradient animation. It should use pastel colors. Make the animation speed configurable via a property.","Create a digital clock showing the time in San Francisco. Modern, minimalist design with smooth animations when digits change. Include subtle grid lines in the background. Implement a 'frosted glass' backdrop filter effect. Add a micro hover effect. Make sure the text is immediately visible.",`Make a component that implements Conway's Game of Life:
* When a user clicks on the component, spawn a group of "living" cells at the position of the mouse click.
* Each time the user clicks, the cells should be a different random color.
* When the newest cells reach other cells, those cells should match the newest cells' color.
* The cells should be relatively small so that the component works even at small sizes.`];return o.createElement("div",{...T.xk(ec.emptyStateContainer)},o.createElement("div",{className:"x16rqkct x1v8gsql xe8ttls"},o.createElement($.C,null)),e?(0,k.t)("living_designs.chat.empty_state.from_scratch"):(0,k.t)("living_designs.chat.empty_state.from_design"),e&&o.createElement("div",{className:"xh8yej3 x78zum5 x1q0g3np x1a02dak x167g77z xl56j7k"},["Stat counter","Gradient background","Digital clock","Small game"].map((e,r)=>o.createElement(ee.t,{label:e,onClick:()=>t(a[r]),disabled:n,key:r}))))}function ed({codeFile:e,isResizingPanel:t,showCodeStreaming:n}){let[a,r]=(0,A.fp)((0,Z.mC)(e?.guid??"")),l=(0,b.k)().living_designs_image_attachments,i=(0,X.iZ)(),c=(0,L.tS)(),{changedFiles:s}=(0,en.E)(e,W.lV.CODE_IN_SITES);async function d(t,n){let o={...t,plainText:t.plainText??a};return r(""),await (0,ei.Oz)({featureType:W.lV.CODE_IN_SITES,userMessageContent:o,rawUserChatDetails:n,user:i,chatMessagesNode:e,setInput:r,fileKey:c,autoFixingUserMessageId:null,canUseSupabase:!1,changedFiles:s})}let p=(0,et.H)(e),m=(0,et.E)(e),u=(0,eo.B)(e),_=e?J.Tq.fromLocalNodeIdStr(e.guid):void 0,E=_&&e?(0,el.nt)(e,_).name:void 0,g=(0,en.E)(e,W.lV.CODE_IN_SITES),y=o.useMemo(()=>{if(!m)return null;for(let e=m.length-1;e>=0;e--){let t=m[e];if(t?.type===I.K$p.USER_MESSAGE)return t}return null},[m]),h=o.useMemo(()=>!!y&&y.type===I.K$p.USER_MESSAGE&&(0,er.gG)((0,j.MK)(y.textContent)),[y]),v=(0,o.useMemo)(()=>m??[],[m]),f=(0,o.useMemo)(()=>{let e=new Set,t=[],n=e=>`${e.id}-${e.sentAt}`;for(let o of v)t.push(o),e.add(n(o));for(let o of u){let a=n(o);e.has(a)||t.push(o)}return t},[v,u]),N=(0,o.useMemo)(()=>f.map(e=>e.userId)||[],[f]),T=(0,Q.gC)(N),P=(0,ea.t)(f,T),S=(0,Q.Cb)(f,c,e?.guid??"");return o.createElement(Q.U0,{chatMessagesForDisplay:p,chatMessagesNodeGuid:e?.guid??"",clientLifecycleIdMap:S,codeFileChanges:g,emptyState:o.createElement(es,{isDefaultCode:!!e?.sourceCode&&e?.sourceCode===I.z6l.getDefaultCode(),onClickSuggestion:r}),enableImageAttachment:l,exchangeMessages:u,featureType:W.lV.CODE_IN_SITES,isLastUserMessageAutoErrorFix:h,isResizingPanel:t,layerDisplayName:E,messagesForRendering:P,sendMessage:d,setInput:r,showChatHeader:!0,showCodeStreaming:n})}var ep=n(444747),em=n(198629),eu=n(233229),e_=n(947943),eE=n(334301),eg=n(107242),ey=n(182656),eh=n(253945);let ev={windowTitle:{flex:"x98rzlu",flexShrink:null,maxWidth:"x1y8h3ww",overflow:"xb3r6kr",overflowX:null,overflowY:null,textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",flexGrow:"x1iyjqo2",flexBasis:"x1r8uery",alignSelf:"xamitd3",marginLeft:"xshs1va",marginInlineStart:null,marginInlineEnd:null,userSelect:"x87ps6o",...f.g.textBodyMediumStrong,$$css:!0}},ef=200;function eI(){let e=(0,A.md)(e_.wh),t=(0,U.Fk)((e,t)=>t.flatMap(t=>e.get(t)?.guid??[]),e),n=(0,o.useMemo)(()=>{if(!(0,b.k)().sts_code_authoring&&!(0,b.k)().sts_code_authoring_by_plan)return new Map;let e=(0,N.UN)();return new Map(t.map(t=>[t,e.get(t)]).filter(e=>null!=e[1]))},[t]);if(!e_.LS){let e=Array.from(n.values())[0];return e?o.createElement(eP,{node:e}):null}return o.createElement(o.Fragment,null,Array.from(n.values()).map(e=>o.createElement(eP,{key:e.guid,node:e})))}function eN(e,t){switch(e){case"chat":return[{id:"chat",defaultSize:25},{id:"preview",defaultSize:75}];case"split":return[{id:"chat",defaultSize:25},{id:"code",defaultSize:37.5},{id:"preview",defaultSize:37.5}];case"code":let n=[{id:"code",defaultSize:25},{id:"preview",defaultSize:70}];return t&&n.unshift({id:"file",defaultSize:5}),n;case"preview":return[{id:"preview",defaultSize:100}]}}function eT({enabled:e,panelConfiguration:t,handleSegmentChange:n}){return e?o.createElement("div",{className:"x78zum5 x6s0dn4 xl56j7k x1iyjqo2 x1excjyp"},o.createElement(c.bL,{value:t,onChange:n,legend:o.createElement(s.q,null,(0,k.t)("sites.panel.code_window_display_picker.hidden_legend")),recordingKey:O.Pt("codeWindow","panelConfiguration")},o.createElement(eh.A,{selectedValue:t,value:"chat",IconComponent:g,text:(0,k.t)("sites.panel.code_window_display_picker.chat")}),o.createElement(eh.A,{selectedValue:t,value:"split",IconComponent:y,text:(0,k.t)("sites.panel.code_window_display_picker.split")}),o.createElement(eh.A,{selectedValue:t,value:"code",IconComponent:h.X,text:(0,k.t)("sites.panel.code_window_display_picker.code")}))):null}function eb({node:e,panels:t,onAddToCanvas:n,windowRef:a,isFullscreen:l,autoSaveId:i,minPanelSize:c=10}){let[s,d]=(0,o.useState)(!1),p=(0,ey.f6)(e),m=p?.guid,u=(0,N.UN)(),_=(0,A.md)(e_.zl),E=(0,A.md)(e_.hi),g=l?_:E,y=(0,ey.J_)(e)[0],h=y?u.get(y):null,v=o.useCallback(e=>{if(!m)return;let t=ep.O.get(m);t&&(e===H.d.ERROR?t.hasErrors=!0:e===H.d.LOADED&&(t.hasErrors=!1))},[m]),f=(0,L.tS)();(0,o.useEffect)(()=>{if(!m)return;let e=ep.O.start(f,m);return()=>e.end()},[m,f]);let{triggerSelfHeal:T}=(0,Y.u)({chatMessagesNode:p,disabled:!(0,b.k)().bake_auto_error_fix,featureType:W.lV.CODE_IN_SITES}),P=o.useCallback((e,t,n,o)=>{p&&T(p,n,o)},[T,p]),S=(0,A.md)(e_.Jl),C=(0,N.UN)().get(S),O=(0,A.md)(e_.T_),x=(0,N.UN)().get(O),w=((0,A.md)(F.s0)===I.Nfd.CODE?x:C)??p,D=o.useMemo(()=>{let e=p?.codeFilePath||void 0;return o.createElement(V.S,{selectedCodeFileNode:w,codeIsStreaming:!1,rootPath:e})},[p,w]),k=o.useMemo(()=>o.createElement(ed,{codeFile:p,isResizingPanel:s,showCodeStreaming:"chat"===g}),[p,s,g]),R=o.useMemo(()=>o.createElement(em.R,{codeFile:w,fullHeight:!0}),[w]),M=o.useMemo(()=>o.createElement(eE.m,{chatNodeId:p?.guid??null,codeInstanceNodeToRender:h,disablePointerEvents:s,isFullscreen:l,isVisible:!0,jsxDev:(0,b.k)().code_layers_click_to_inspect,onAddToCanvas:n,onError:P,onPreviewStateChange:v,showViewOptions:!0,windowRef:a}),[h,a,p?.guid,v,n,l,s,P]),U=o.useMemo(()=>t.map((e,n)=>{let a=n===t.length-1,l=e.id;return o.createElement(o.Fragment,{key:l},o.createElement(r.Zk,{collapsible:!1,...e,order:n,minSize:c},"file"===l&&D,"chat"===l&&k,"code"===l&&R,"preview"===l&&M),!a&&o.createElement(r.TW,{onDragging:e=>{d(e)},className:"x1i1rx1s xbpqucl"}))}),[t,c,D,k,R,M]);return o.createElement(o.Fragment,null,o.createElement("div",{className:"xh8yej3 x1n2onr6",style:{height:l?"calc(100% - 48px)":"100%"}},o.createElement(r.YZ,{direction:"horizontal",autoSaveId:i,className:"x10l6tqk x10a8y8t"},U)))}let eA=({node:e})=>{let t=[],n=(0,A.md)(e_.hi),[,a]=(0,A.fp)(e_.zl),[,r]=(0,A.fp)(F.s0),{readOnlyUser:l}=(0,B.Sn)(),i=(0,A.md)(e_.Xq),c=i.length>0&&i[0],s=(0,U.Fk)(e=>!!c&&!!e.get(c)?.canBeRestoredToDesignNode(),c),d=o.useCallback(()=>{(0,eu.Pu)(e,n,a,r)},[a,n,e,r]),p=o.useCallback(()=>{R.Y5.triggerActionEnumInUserEditScope(I.rcl.RESTORE_DESIGN_IN_PLACE_FROM_CODE,{targetCodeSelection:!0})},[]),m=o.useCallback(()=>{R.Y5.triggerActionEnumInUserEditScope(I.rcl.COPY_OUT_DESIGN_FROM_CODE,{targetCodeSelection:!0})},[]),u={displayText:(0,k.t)("sites.panel.code_window_open_in_code_view"),callback:d},_={displayText:(0,k.t)("fullscreen_actions.restore-design-in-place-from-code"),callback:p},E={displayText:(0,k.t)("fullscreen_actions.copy-out-design-from-code"),callback:m};return!l&&(t.push(u),s&&(t.push(_),t.push(E))),t};function eP({node:e,onClose:t}){let{Sprig:n}=(0,x.A)(),r=(0,A.md)(G.f),c=(0,a.wA)(),s=o.useCallback(e=>{"outside"!==e.source&&((0,e_.UM)(),t?.(),(0,b.k)().sts_sprig_targeted_feedback&&r&&n("track","sites_code_layer_edit"))},[t,r,n]),E=function(){let e;let[{windowInnerWidth:t,windowInnerHeight:n}]=(0,P.A)((0,C.l)(),300,{equalityFn:l.c2}),[a,r]=(0,A.fp)(e_.yq);if(a){let o=(0,i.qE)(a.x,0,t-a.width),r=(0,i.qE)(a.y,0,n-a.height),l=(0,i.qE)(a.width,640,t-o),c=(0,i.qE)(a.height,480,n-r);e={x:o,y:r,width:l,height:c}}else{let o=(0,i.qE)(t*eC.targetPercentWidth,eC.minWidth,eC.maxWidth-2*eC.margin),a=(0,i.qE)(Math.min(o/eC.aspectRatio,n-2*eC.margin),eC.minHeight,eC.maxHeight);e={x:(t-o)/2,y:(n-a)/2,width:o,height:a}}let c=o.useMemo(()=>new w.Mi(e.x,e.y),[e.x,e.y]),s=o.useCallback(({x:e,y:t,width:n,height:o})=>{a&&e===a.x&&t===a.y&&n===a.width&&o===a.height||r({x:e,y:t,width:n,height:o})},[a,r]),d=o.useCallback(t=>{let n=t.size?.x??e.width,o=t.size?.y??e.height;s({x:t.position?.x??e.x,y:t.position?.y??e.y,width:n,height:o})},[s,e.width,e.height,e.x,e.y]);return{initialPosition:c,initialHeight:e.height,initialWidth:e.width,handleTransform:d,constraints:eS}}(),[g,y]=o.useState(E.initialWidth),h=(0,N.UN)(),f=(0,A.md)(e_.Xq),I=f[0]?h.get(f[0]):null,O=(0,ey.wE)(I),R=(0,A.md)(e_.ZY),L=(0,D.Mq)(),[U,V]=(0,A.fp)(e_.hi),B=eN(O&&!R?"preview":L?U:"code",void 0!==e.codeFilePath&&!!(0,b.k)().multi_file_code_layers),F=(0,o.useCallback)(()=>{V(e=>"code"===e||"split"===e?e:"split")},[V]);(0,eg.sl)(F);let W=o.useRef(null),Y=o.useRef(null),H=(0,M.BK)("OPEN_IN_CODE_VIEW_DROPDOWN"),j=(0,A.md)(e_.DW),$=(0,A.Xr)(z.YD);(0,S.h)(()=>{$(!1)});let J=eA({node:e}),X=(0,o.useRef)(null),q=(0,d.R)(X);return e&&e.isAlive?o.createElement(p._L,{defaultWidth:E.initialWidth,defaultHeight:E.initialHeight,onClose:s,defaultPosition:E.initialPosition,onTransform:e=>{E.handleTransform(e),e.size&&y(e.size.x)},ref:W,recordingKey:"sites-code-window",draggable:"header",constraints:E.constraints},o.createElement(m.vo,null,o.createElement(m.Y9,null,o.createElement(u.J,{ref:X,...T.Ay.props(ev.windowTitle),htmlAttributes:{"data-tooltip":q?j:void 0,"data-tooltip-type":"text"}},R?e?.name:j),o.createElement(eT,{enabled:L&&(!O||R),panelConfiguration:U,handleSegmentChange:V}),o.createElement("div",{className:"x98rzlu x78zum5 x13a6bvl"},J.length>0&&o.createElement("div",{className:"x1mh6rdz"},o.createElement(_.d,{ref:Y,"aria-label":(0,k.t)("sites.panel.code_window_more_options"),"aria-expanded":H.showing,onClick:()=>{H.toggle()}},o.createElement(v.J,null))),J.length>0&&H.showing&&Y.current&&o.createElement(K.j,{items:J,parentRect:Y.current.getBoundingClientRect(),dispatch:c,showPoint:!0,onSelectItem:e=>{e.callback&&e.callback("",null,c)}}))),o.createElement(m.nB,{padding:0,scrolling:"none"},o.createElement(eb,{node:e,windowRef:W,panels:B,minPanelSize:ef/g*100,autoSaveId:"CODE_WINDOW_AUTOSAVE_ID"})))):null}let eS={minWidth:640,minHeight:480,maxWidth:"100vw",maxHeight:"100vh"},eC={minWidth:750,minHeight:500,maxWidth:1200,maxHeight:800,margin:16,targetPercentWidth:.6,aspectRatio:1.5}},848386:(e,t,n)=>{n.d(t,{_:()=>S});var o=n(848318),a=n(658029),r=n(879169),l=n(947078),i=n(54728),c=n(523152);n(82433);var s=n(382902),d=n(225859),p=n(536384),m=n.n(p),u=n(547481),_=n(755534),E=n(967688),g=n(42725),y=n(145951),h=n(304738),v=n(276630),f=n(551011),I=n(194438),N=n(182656);let T="devtools_code_console--tabPanelScrollContainer--BVJaw";function b(){let[e]=(0,N.jT)(),[t]=(0,v.PM)(),n=(0,s.md)(f.Cb),a=(0,o.useMemo)(()=>(e??[]).concat(t.map(e=>{let t=parseInt(e.timestamp);return{type:"error",phase:N.S4.RUNTIME,message:`[Supabase] ${e.event_message}`,timestamp:isNaN(t)?0:t}})).filter(e=>e.message.includes(n)).sort((e,t)=>e.timestamp-t.timestamp),[e,n,t]),[r,l]=(0,o.useState)(a),i=(0,o.useMemo)(()=>(0,u.n)(20,e=>{l(e)}),[]);return((0,o.useEffect)(()=>{i(a)},[i,a]),r)?o.createElement("div",{tabIndex:-1},r.map((e,t)=>o.createElement("div",{key:t},0!==t&&o.createElement(C,null),o.createElement(O,{consoleMessage:e})))):null}function A({value:e,onChange:t}){let n=o.useRef(null);return o.createElement("label",{className:"devtools_code_console--filter--Txqal"},o.createElement(l.S,{className:"devtools_code_console--filterIcon--X3LB-"}),o.createElement("input",{className:"devtools_code_console--filterInput--FzveZ",type:"text",value:e,onChange:e=>t(e.target.value),ref:n,placeholder:(0,E.t)("sites.code_component.console.filter")}))}function P(){let[e,t]=(0,N.jT)(),[n,r]=(0,s.fp)(f.Cb);return o.createElement(o.Fragment,null,o.createElement(A,{value:n,onChange:r}),o.createElement("div",null),o.createElement(a.K,{"aria-label":(0,E.t)("sites.code_component.console.clear"),htmlAttributes:{"data-tooltip":(0,E.t)("sites.code_component.console.clear"),"data-tooltip-type":"text"},onClick:()=>{t([]),(0,v.ZO)()}},o.createElement(i.i,null)))}function S({node:e,windowRef:t,showPropertiesTab:n=!0}){let[l,i]=(0,s.fp)(f.Vo),[p,u]=(0,s.fp)(f.rO),[v,A]=(0,o.useState)(void 0);o.useEffect(()=>{let e=()=>{t?.current&&A(.4*t.current.clientHeight)};e();let n=new ResizeObserver(e);return t?.current&&n.observe(t.current),()=>{n.disconnect()}},[t]);let[S,C,O]=r.t.useManagedTabs({properties:n,console:!0},l,e=>i(e)),{figmakeInFullscreen:x}=(0,h.Ve)(),w=n?(0,E.t)("sites.code_component.drawer.hide"):(0,E.t)("sites.code_component.drawer.hide_console_only"),[D,k]=(0,s.fp)(f.YD),R=(0,N.J_)(e),{assignmentValuesByDefId:M}=(0,y.an)(R,g.OE.ASSIGNMENT,!0);return o.createElement(o.Fragment,null,D&&!x&&o.createElement(d.G,{className:m()("devtools_code_console--panel--yn97N"),side:"top",maxSize:v,onDragEnd:e=>{u(e)},minSize:80,defaultSize:p},o.createElement("div",{className:"devtools_code_console--headerRow--2O6aI"},o.createElement("div",{className:"devtools_code_console--headerRowTabs--Qo6UD"},o.createElement(r.t.TabStrip,{manager:O},o.createElement(r.t.Tab,{...S.properties},(0,E.tx)("sites.code_component.properties")),o.createElement(r.t.Tab,{...S.console},(0,E.tx)("sites.code_component.console")))),o.createElement("div",{className:"devtools_code_console--headerRowIcons--fc3Yi"},"console"===O.activeTab&&o.createElement(P,null),o.createElement(a.K,{"aria-label":w,htmlAttributes:{"data-tooltip":w,"data-tooltip-type":"text"},onClick:()=>{k(!1)}},o.createElement(c.L,null)))),o.createElement("div",{className:"devtools_code_console--tabPanelContainer--w2g7B"},0===Object.keys(M).length?o.createElement(r.t.TabPanel,{...C.properties,height:"fill"},o.createElement(I.F,null)):o.createElement(r.t.TabPanel,{...C.properties,height:"fill"},o.createElement(_.P,{className:T,useBottomPinning:!0},o.createElement(I.D,{guids:R,recordingKey:"codeWindowPropertiesPanel",entrypoint:"code-editor",windowRef:t}))),o.createElement(r.t.TabPanel,{...C.console,height:"fill"},o.createElement(_.P,{className:T,useBottomPinning:!0},o.createElement(b,null))))))}function C(){return o.createElement("div",{className:"xjm9jq1 xhv1u6h x176lpz5"})}function O({consoleMessage:e}){let t=e.message;return"error"===e.type?t=`\u274C ${t}`:"warn"===e.type&&(t=`\u26A0\uFE0F ${t}`),o.createElement("div",{className:m()("devtools_code_console--consoleMessage--I8RCD",{"devtools_code_console--error--5Un3V":"error"===e.type,"devtools_code_console--warn--LVB3K":"warn"===e.type}),"data-testid":"console-message"},t)}},334301:(e,t,n)=>{n.d(t,{m:()=>v});var o=n(848318),a=n(143823);n(82433);var r=n(791455),l=n(863113),i=n(947943),c=n(856925),s=n(848386),d=n(749214);let p=(0,o.memo)(function(e){return(0,d.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,d.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M16.5 7h-9a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5m-9-1A1.5 1.5 0 0 0 6 7.5v9A1.5 1.5 0 0 0 7.5 18h9a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 16.5 6zm1.646 4.146a.5.5 0 0 0 0 .708L10.293 12l-1.147 1.146a.5.5 0 0 0 .708.708l1.5-1.5a.5.5 0 0 0 0-.708l-1.5-1.5a.5.5 0 0 0-.708 0M12.5 13a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1z",clipRule:"evenodd"})})});var m=n(696483),u=n(382902),_=n(967688),E=n(551011),g=n(182656);function y(){let[e]=(0,g.jT)(),t=e?.filter(e=>"error"===e.type),[n,a]=(0,u.fp)(E.YD),r=(0,u.Xr)(E.Vo),[l,i]=o.useState(!1);return n||!t||0===t.length||l?null:o.createElement("button",{className:"x10l6tqk x191j7n5 x1nrll8i xuuh30 x78zum5 xl56j7k x6s0dn4 x1jnr06f x1ihmbg5 xxvmw7z x1sxf85j xehqz9p x3brusf",onClick:()=>{r("console"),a(!0)}},o.createElement(p,null),o.createElement("div",null,(0,_.t)("living_designs.chat.errors.error_count",{count:t.length})),o.createElement("button",{className:"x1ljf5od xjbqb8w",onClick:e=>{e.stopPropagation(),i(!0)}},o.createElement(m.f,null)))}function h(){return o.createElement("div",{className:"x10l6tqk x10a8y8t x1vjfegm x78zum5 xl56j7k x6s0dn4 x47corl"},o.createElement(a.k,null))}function v({codeInstanceNodeToRender:e,chatNodeId:t,jsxDev:n=!1,onPreviewStateChange:a,showViewOptions:d=!1,windowRef:p,showToolbar:m=!0,onAddToCanvas:u,isFullscreen:_,isVisible:E,onError:v,onBuild:f,disablePointerEvents:I=!1}){let{componentPreviewState:N,setComponentPreviewState:T}=(0,l.k)(),[b,A]=(0,o.useState)(!1),P=e?.isCodeComponent?e:e?.backingCodeComponent,S=e?.isCodeFile?e:P?.exportedFromCodeFile,C=(0,i.Wn)(S?.guid??""),O=(0,o.useCallback)(e=>{T(e),a?.(e),e!==l.d.LOADED||C||A(!0)},[a,T,A,C]);(0,g.pO)();let x=(0,g.GW)(e),w=(0,r.Oc)(),D=u?()=>{u(e)}:void 0,k=(0,g.cH)(e),R=(0,o.useMemo)(()=>{let e=[];for(let t of Object.values(x))"object"==typeof t&&"image"in t&&void 0!==t.image&&(e.push(t.image),void 0!==t.animatedImage&&e.push(t.animatedImage));return e},[x]),M=(0,o.useRef)(null);(0,g.jS)(e);let L=N===l.d.INITIAL||N===l.d.BUILDING||!b;if(!e)return null;let U=e.isCodeInstance?e.backingCodeComponent?.codeExportName||"default":e.codeExportName||"default";return o.createElement("div",{className:"x78zum5 xdt5ytf x5yr21d xh8yej3 x1n2onr6",ref:M},o.createElement(c.e,{chatNodeId:t,codeExportName:U,codeInstanceNodeToRender:e,disablePointerEvents:I,imagePropAssetHashes:R,instanceSwapPropertyGuids:k,isFullscreen:_,isVisible:E,jsxDev:n,onAddToCanvas:D,onBuild:f,onChangePreviewState:O,onError:v,props:x,showToolbar:m,showViewOptions:d,state:N,withBaseStyles:!w}),!w&&o.createElement(o.Fragment,null,o.createElement(s._,{node:e,windowRef:p}),o.createElement(y,null)),L&&o.createElement(h,null))}},194438:(e,t,n)=>{n.d(t,{D:()=>_,F:()=>E});var o=n(848318),a=n(988402),r=n(768618);n(82433);var l=n(781239),i=n(454805),c=n(967688),s=n(42725),d=n(145951),p=n(353793),m=n(748662),u=n(495243);function _({guids:e,recordingKey:t,entrypoint:n="default",windowRef:c}){let _=(0,u._H)(),{typedPropDefsExcludingHidden:E,assignmentValuesByDefId:g}=(0,d.an)(e,s.OE.ASSIGNMENT,!0),[y,h]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{h(!0)},[]),y)?o.createElement("div",{className:"x87ps6o"},o.createElement(p.c,{assignmentValues:g,containerWidth:s.O2.RESIZABLE_SIDEBAR,entrypointForInstanceSwapPicker:m.S.InstancePickerEntrypoint.INSTANCE_SWAP_PROP_INSTANCE_PANEL,forBubbledProps:!1,getInstanceSwapPickerPosition:(e,t,n,o)=>{let a=c?.current?.getBoundingClientRect(),r=e.getBoundingClientRect();return new i.Mi(r.left-(a?.left??0),r.top-(a?.top??0)+r.height+8)},guids:e,hideIcon:!1,instanceSwapPickerIdPrefix:"code-editor"===n?"code-editor-instance-swap-prop-assignment-picker-":void 0,recordingKey:l.Pt(t,"propDefs",a.uN.TYPED),sceneGraph:(0,r.UN)(),typedPropDefs:E,viewOnly:_})):null}function E(){return o.createElement("div",{className:"xh8yej3 x5yr21d xl56j7k x78zum5 x6s0dn4 x1n0bwc9 x2b8uid"},(0,c.t)("sites.code_component.drawer.properties_empty_state"))}},253945:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(848318),a=n(779492),r=n(297638);function l({selectedValue:e,value:t,IconComponent:n,text:l}){let i=o.createElement("div",{className:r.s.flex.itemsCenter.justifyCenter.pr4.colorIconDisabled.$},o.createElement(n,{style:e===t?{}:{"--color-icon":"var(--color-icon-secondary)"}}),l);return o.createElement(a.RT,{value:t,label:i})}},714713:(e,t,n)=>{n.d(t,{C:()=>a});var o=n(749214);let a=(0,n(848318).memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fill:"var(--color-icon)",d:"M14.67 11.637c.186.02.33.176.33.363 0 2.381-.283 4.556-.753 6.151-.233.795-.521 1.474-.863 1.966-.332.477-.792.883-1.384.883s-1.052-.406-1.383-.883c-.343-.492-.63-1.171-.864-1.966a14 14 0 0 1-.28-1.137.488.488 0 0 1 .517-.581c.228.015.42.181.467.404q.116.555.255 1.032c.219.744.47 1.31.726 1.678.266.382.464.453.562.453s.297-.071.563-.453c.256-.368.507-.934.725-1.678.436-1.48.712-3.556.712-5.869 0-.228.19-.41.417-.389zM6.985 9.473a.49.49 0 0 1 .582.516.51.51 0 0 1-.404.467 13 13 0 0 0-1.032.256c-.743.219-1.31.47-1.678.726-.382.266-.453.464-.453.562s.07.296.453.563c.369.255.935.506 1.678.725 1.48.435 3.556.712 5.87.712.226 0 .408.189.386.415l-.026.259A.365.365 0 0 1 12 15c-2.382 0-4.557-.284-6.152-.753-.794-.233-1.474-.521-1.966-.863C3.406 13.052 3 12.592 3 12s.406-1.052.883-1.384c.492-.342 1.172-.63 1.966-.863q.528-.155 1.136-.28M12 9c2.381 0 4.556.284 6.152.753.794.234 1.473.521 1.965.863.478.332.883.792.883 1.384s-.405 1.052-.883 1.384c-.492.342-1.171.63-1.965.863q-.53.155-1.137.28a.49.49 0 0 1-.582-.517.51.51 0 0 1 .403-.467q.556-.115 1.033-.255c.744-.219 1.31-.47 1.678-.726.383-.265.453-.464.453-.562s-.07-.296-.453-.562c-.368-.257-.934-.507-1.678-.726C16.39 10.276 14.313 10 12 10a.384.384 0 0 1-.387-.417l.026-.257A.365.365 0 0 1 12 9m0-6c.592 0 1.052.406 1.384.883.342.492.63 1.171.863 1.966q.155.528.28 1.136a.488.488 0 0 1-.518.581.51.51 0 0 1-.467-.404q-.114-.554-.254-1.031c-.218-.744-.47-1.31-.725-1.678C12.297 4.071 12.099 4 12 4s-.296.071-.562.453c-.256.368-.507.934-.726 1.678C10.277 7.61 10 9.687 10 12c0 .227-.19.409-.416.388l-.257-.026A.366.366 0 0 1 9 12c0-2.381.284-4.556.753-6.151.234-.795.521-1.474.864-1.966C10.948 3.406 11.408 3 12 3"})})})},930229:(e,t,n)=>{n.d(t,{T:()=>a});var o=n(749214);let a=(0,n(848318).memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M10.003 7.375A5.5 5.5 0 0 1 16.61 9.5H14a.5.5 0 0 0 0 1h3.5a.5.5 0 0 0 .5-.5V6.5a.5.5 0 0 0-1 0v1.847a6.5 6.5 0 1 0-.128 8.456.5.5 0 1 0-.75-.662 5.5 5.5 0 1 1-6.119-8.766",clipRule:"evenodd"})})})}}]);

//# debugId=0d4bddb6-9b7d-5bb4-bc58-69e3e2c958e6

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/c806c444796268d576cc87e80c35e04d40e9a08e/3416-7fa15291c93742d7.min.js.map
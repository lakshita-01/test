"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="4e396ed3-47d5-596e-b04d-6efc6b21e985")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[2483],{258539:(e,t,n)=>{n.d(t,{W:()=>u});var i=n(848318),r=n(301168),a=n(410725),l=n(748008),o=n(182317),s=n(337752),d=n(55116);function u(e=!1){let t=(0,r.wA)(),n=i.useMemo(()=>(0,o.g)(),[]),c=(0,a.Rs)((0,d.gvX)({cacheNonce:n}));i.useEffect(()=>{if("loaded"!==c.status)return;let n=(0,l.oA)(c.data.currentUser.notificationExperimentInfo);n&&("exp_notification_catfile"===n.experimentName||"exp_notification_catfic"===n.experimentName)&&("prompt_to_opt_in"===n.type?t((e?s.hU:s.ZI)({userId:n.userId,fileKey:n.fileKey,experimentName:n.experimentName,toastType:"prompt_to_opt_in"})):t(s.EJ({userId:n.userId,fileKey:n.fileKey,preference:n.preference,experimentName:n.experimentName})))},[t,c,e])}},408742:(e,t,n)=>{n.d(t,{_:()=>u});var i=n(848318),r=n(186606),a=n(720522),l=n(218010),o=n(531288),s=n(601167),d=n(733644);let u=i.memo(function(e){let{nodeId:t}=e,n=i.useRef(null),a=i.useRef(null),l=(0,s._X)({subscribeToUpdates_expensive:!0});return i.useEffect(()=>{let e=(0,o.EE)(`loading-embed-${t}`,[t],e=>{if(!e.position){r.glU.removeLoadingEmbed(t);return}a.current=e.position,m(n,l,a)}),i=e.currentNodePosition[t]?.position;return i?(a.current=i,m(n,l,a)):r.glU.removeLoadingEmbed(t),()=>{(0,o.lB)(`loading-embed-${t}`)}},[t,l]),i.createElement("div",{ref:n},i.createElement(c,null))});function c(){return i.createElement("span",{className:"loading_embed_overlay--root--UKqJ8"},i.createElement(a.B,{svg:d.A,className:"loading_embed_overlay--spinner--bw3Cv",autosize:!0}))}function m(e,t,n){if(!e.current||!t||!n.current)return;let i=e.current,r=n.current,a=(0,s.Yb)(t,r),o=28*t.zoomScale;i.style.transform=`translate(${a.x+(a.width-o)/2+t.x}px, ${a.y+(a.height*l.Ao/l.RN-o)/2+t.y}px) rotate(${r.angle}deg) scale(${t.zoomScale})`,i.style.transformOrigin="top left",i.style.position="absolute"}},397157:(e,t,n)=>{n.d(t,{Pm:()=>i,aF:()=>a});var i=(e=>(e.Light="LIGHT",e.Dark="DARK",e.Translucent="TRANSLUCENT",e))(i||{}),r=(e=>(e.Light="light",e.Dark="dark",e))(r||{});function a(e){let t,n;switch(e.theme){case void 0:case"LIGHT":t="LIGHT";break;case"DARK":case"TRANSLUCENT":t="DARK"}n="LIGHT"===t?"light":"dark";let i="true"===e.hideBackground;return i&&(n=function(e){switch(e){case"light":return"dark";case"dark":return"light"}}(n)),{theme:t,preferredTokenTheme:n,transparentMode:i}}},173811:(e,t,n)=>{n.d(t,{DR:()=>L,E$:()=>R,Wd:()=>M,gD:()=>B,lu:()=>C,wL:()=>A});var i=n(848318),r=n(301168),a=n(773511),l=n(12559),o=n(186606),s=n(320953),d=n(553547),u=n(768618),c=n(19180),m=n(536384),p=n.n(m),f=n(140357),E=n(297638),g=n(967688),y=n(952039),v=n(113752),b=n(899386),_=n(809969),h=n(209595),I=n(125761),S=n(554326),N=n(395019),P=n(648346),w=n(385645),T=n(340204),O=n(54462),x=n(708618),D=n(503596);function L(e){let{nodeId:t,setConfigData:n,isReadOnly:a,invalidateThumbnail:l}=e,{isEmbedActive:d,setActiveEmbed:m}=(0,T._)(t),p=!a,f=(0,r.wA)(),E=(0,S.ut)(o.Ez5?.flappData().embeddablePrototypeIdPendingInsertion,""),[_,h]=(0,i.useState)(),I=(0,i.useMemo)(()=>{let t=B(e.configData);if(!t)return;let n=b.hY[t.presetIdentifier],i=t.rotation===o.xOL.CCW_90,{x:r,y:a}=n?.imageSize??{x:0,y:0},[l,s]=i?[a,r]:[r,a];return l/s},[e.configData]);(0,i.useEffect)(()=>{if(!p)return;let e=(0,u.UN)().get(t),n=I??_;e&&n&&s.l7.system("resizing-embed",()=>{let t=e.size.x>0?e.size.x:400,i=Math.floor(t/n);0===e.size.x&&(e.x-=t/2,e.y-=i/2),e.resizeWithConstraints(t,i),e.proportionsConstrained=!0})},[t,I,_,p]),(0,i.useEffect)(()=>{t===E&&(f(y.F.enqueue({type:"slides-embedded-prototype",message:(0,g.t)("slides.inserting_embed.visual_bell"),icon:v.zX.SPINNER,timeoutOverride:1/0})),m(),setTimeout(()=>{t===o.Ez5?.flappData().embeddablePrototypeIdPendingInsertion.getCopy()&&o.oHM?.embeddablePrototypeLoadFailed()},3e4))},[t,E,f,m]),(0,i.useEffect)(()=>{let e=e=>{if(e.origin!==location.origin||e.source&&"frameElement"in e.source&&null!=e.source.frameElement&&e.source.frameElement.id!==P.xu+t)return;let i=e.data;if("EMBED_PROTO_ASPECT_RATIO"===i.type&&i.data.aspectRatio&&(h(i.data.aspectRatio),t===E&&o.oHM?.embeddablePrototypeLoadSucceeded()),"EMBED_PROTO_DEVICE"===i.type){let e=i.data.device;p&&e?s.l7.system("set-embed-device-frame-config-data",()=>{n("deviceFrameShown",""!==e.presetIdentifier&&"PRESET"===e.type?"true":"false"),n("deviceFramePreset",e.presetIdentifier),n("deviceFrameRotation",e.rotation)}):p&&s.l7.system("set-embed-device-frame-config-data",()=>{n("deviceFrameShown","false"),n("deviceFramePreset",""),n("deviceFrameRotation","NONE")})}if("EMBED_PROTO_FILE_METADATA"===i.type&&p&&s.l7.system("embed-file-metatada",()=>{n("fileName",i.data.fileName),n("pageName",i.data.pageName),i.data.activeStartingPointNodeId&&n("activeStartingPointNodeId",i.data.activeStartingPointNodeId),i.data.startingPointsData&&n("startingPointsData",JSON.stringify(i.data.startingPointsData))}),"EMBED_PROTO_THUMBNAIL"===i.type&&i.data.thumbnail){if(!(0,c.k)().slides_iframe_embedded_prototypes_thumbnail)return;(0,P.yx)(i.data.thumbnail,i.data.width,i.data.height,t,l)}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[t,n,f,E,p,l]);let N=(0,T.s)(t)||!d;return i.createElement(k,{...e,isActive:d,setActive:m,disablePointerEvents:!N})}function R(e){let t=(0,h.mr)(),n=(0,f.hk)(),r=e.nodeId,[a,l]=(0,i.useState)(n?.isActiveSlidesEmbeddedPrototype(r)||!1);(0,f.O5)(n,"activeSlidesPrototypeEmbedChange",i.useCallback(e=>{(0,c.k)().slides_iframe_embedded_prototypes_improvements||l(e===r)},[r])),(0,f.O5)(n,"embeddedPrototypeDataChange",i.useCallback(e=>{if(!(0,c.k)().slides_iframe_embedded_prototypes_improvements)return;let t=!1;for(let n of e)if(d.dI(n.nodeId)===r){t=!0;break}l(t)},[r]));let o=(0,i.useCallback)(e=>{t.isAudienceViewPopout?(0,O.o)({type:"LOAD_EMBEDDED_PROTOTYPE",nodeId:e}):n?.setActiveSlidesEmbeddedPrototype(e)},[n,t]);return i.createElement(k,{...e,isActive:a,setActive:o})}function k({configData:e,nodeId:t,setConfigData:n,isViewer:r,isActive:a,setActive:l,disablePointerEvents:o,invalidateThumbnail:s}){let d=(0,f.hk)(),u=B(e),m=i.useCallback(e=>{if(t!==e.nodeId)return;let n=z(t);n&&!d?.isPresenterSession()&&n.contentWindow?.postMessage({type:"SET_OBSERVING_SESSION_ID",data:{sessionId:null!=e.presenterSessionId?e.presenterSessionId:-1}},"*")},[t,d]);(0,f.O5)(d,"embeddedPrototypeChange",m);let p=i.useCallback(e=>{let n=z(t);n?.contentWindow?.postMessage({type:"PROTOTYPE_EMBED_SELECT_FLOW",data:{flowId:e}},"*")},[t]);return(0,i.useEffect)(()=>{e.activeStartingPointNodeId&&p(e.activeStartingPointNodeId)},[e.activeStartingPointNodeId,p]),(0,i.useEffect)(()=>{let e=e=>{e.origin!==location.origin||e.source&&"frameElement"in e.source&&null!=e.source.frameElement&&e.source.frameElement.id!==P.xu+t||!d||"EMBEDDED_PROTOTYPE_SESSION_ID"!==e.data.type||d.setEmbeddedPrototypeSession(t,e.data.data.sessionId)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[d,t,n,r]),(0,i.useEffect)(()=>()=>{(0,c.k)().slides_iframe_embedded_prototypes_improvements||d?.setEmbeddedPrototypeSession(t,-1)},[d,t]),i.createElement(A,{deviceFrame:u,invalidateThumbnail:s},i.createElement("div",{className:E.s.hFull.wFull.$,style:{pointerEvents:o?"none":"auto"}},a&&e.url?i.createElement(F,{baseUrl:e.url,nodeId:t,activeStartingNodeId:e.activeStartingPointNodeId}):null,!a&&l?i.createElement(C,{isViewer:r,nodeId:t,onClick:()=>l(t)}):null))}let C=i.memo(({isViewer:e,nodeId:t,onClick:n})=>{let[r,o]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=!0,n=null;return(async()=>{try{let i=(0,u.UN)().get(t);if(!i||!i.fills||0===i.fills.length)return;let r=i.fills.find(e=>"IMAGE"===e.type&&e.image?.hash);if(!r||!r.image?.hash)return;let a=await (0,N.I)(r);if(!a||!e)return;let l=new Blob([a],{type:"image/png"});n=URL.createObjectURL(l),e&&o(n)}catch(e){console.error("Failed to load thumbnail for embed overlay:",e)}})(),()=>{e=!1,n&&URL.revokeObjectURL(n)}},[t]);let s=(0,c.k)().slides_iframe_embedded_prototypes_thumbnail?D.kg:D.zP,d=r&&(0,c.k)().slides_iframe_embedded_prototypes_thumbnail?{backgroundImage:`url(${r})`}:{};return e?i.createElement(a.E,{className:p()(s,E.s.cursorPointer.$),style:d,onClick:n},i.createElement(l.l,{className:D.uZ})):i.createElement("div",{className:s,style:d},i.createElement(l.l,{className:p()(D.uZ,E.s.cursorPointer.$),onClick:n}))});function A({deviceFrame:e,children:t,invalidateThumbnail:n}){let r=e?.rotation===o.xOL.CCW_90?{x:e?.size.y??W.size.y,y:e?.size.x??W.size.x}:{x:e?.size.x??W.size.x,y:e?.size.y??W.size.y};return i.createElement("div",{className:p()(D.kL)},i.createElement(w._,{initialViewerSize:r,isDeviceFrameShown:null!=e&&e.type===o.XQq.PRESET&&""!==e.presetIdentifier,prototypeDevice:e,isInlinePreview:!1,onDeviceFrameLoaded:n},t))}function F({baseUrl:e,nodeId:t,activeStartingNodeId:n}){let[r,a]=(0,i.useState)(n),l=function(e,t,n){let i;if(!e)return null;try{i=new URL(e)}catch(e){return null}let r=i.searchParams;return(0,x.e)(r,"bare-ui","1"),(0,x.e)(r,"scaling","fit-width"),(0,x.e)(r,"content-scaling","fixed"),(0,x.e)(r,"needsAlpha","1"),(0,x.e)(r,"inline-viewer","1"),(0,x.e)(r,"disable-default-keyboard-nav","1"),t&&(0,x.e)(r,"fuid",t),n&&(0,x.e)(r,"starting-point-node-id",n),i}(e,(0,I.TA)(),r);return i.createElement("div",{className:D.pU},i.createElement("iframe",{id:`${P.xu}${t}`,className:D.pU,loading:"eager",src:l?.toString(),title:(0,g.t)("slides.flapp.embed.title"),allow:"autoplay; encrypted-media; picture-in-picture; fullscreen;",sandbox:"allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation",referrerPolicy:"same-origin"}))}function z(e){return document.getElementById(P.xu+e)}let U=e=>{switch(e){case"NONE":default:return o.xOL.NONE;case"CCW_90":return o.xOL.CCW_90}};function M(e){return!!e.deviceFramePreset&&(void 0===e.deviceFrameShownOverride?"true"===e.deviceFrameShown:"true"===e.deviceFrameShownOverride)}function B(e){return M(e)?function(e){let t=b.hY[e.deviceFramePreset??""];return t?{type:o.XQq.PRESET,size:t.framePresetSize,presetIdentifier:t.presetIdentifier,rotation:U(e.deviceFrameRotation)}:null}(e):null}let $=_.eo[0],W={type:o.XQq.PRESET,size:$?.framePresetSize??{x:0,y:0},presetIdentifier:$?.presetIdentifier??"",rotation:o.xOL.NONE}},521e3:(e,t,n)=>{n.d(t,{u:()=>w});var i=n(848318),r=n(891627),a=n(186606),l=n(320953),o=n(768618),s=n(19180),d=n(349048),u=n(674128),c=n.n(u),m=n(813321),p=n(989232),f=n(238462),E=n(439952),g=n(531288),y=n(859480),v=n(601167),b=n(355755),_=n(730143),h=n(554326),I=n(880801),S=n(619534),N=n(185006),P=n(846751);function w(){let e=(0,v._X)({subscribeToUpdates_expensive:!0}),t=(0,b.p8)("isReadOnly"),n=(0,b.p8)("topLevelMode")===a.lyf.HISTORY,l=(0,d.k9)(()=>e,[e]),o=document.getElementById("fullscreen-root");if(!o)return null;let s=o.querySelectorAll(".view.container-view");if(0===s.length)return null;let u=s[s.length-1];return u?(0,r.createPortal)(i.createElement(T,{viewportInfo:l,isReadOnly:t||n}),u):null}function T({viewportInfo:e,shouldRenderMobileFlapps:t,isReadOnly:n}){let r=(0,i.useCallback)((e,t)=>{let n=(0,o.UN)().get(e.nodeId),i=n?.containingSlideId,r=n?.containingCanvas;if(n&&e.position&&i)return{guid:e.nodeId,slideId:i,pageId:r,position:t,type:n.interactiveSlideElementType}},[]),l=(0,h.ut)(a.Ez5?.flappData().nodeIds,[]),s=(0,g.tB)("Flapps",l,r,{useFlushSyncExpensive:!0}),u=(0,h.ut)(a.Ez5?.singleSlideView().focusedNodeId,""),c=a.Ez5?.singleSlideView().isFocusedNodeViewFocused()??!1,m=(0,y.dh)(),p=(0,d.k9)(()=>Object.values(s).filter(e=>e.pageId===m&&(!c||c&&e.slideId===u)),[s,c,u,m]);return(0,S.wj)(I.JT.BOARD_TO_DECK).state===S.qy.RUNNING?null:i.createElement(i.Fragment,null,p.map(r=>i.createElement(O,{key:r.guid,element:r,viewportInfo:e,shouldRenderMobileFlapp:t,isReadOnly:n})))}let O=i.memo(({element:e,viewportInfo:t,shouldRenderMobileFlapp:n,isReadOnly:r})=>{let l=(0,h.ut)(a.Ez5?.flappData().nodeThumbnailEditCount,new Map).get(e.guid)??0,[d,u]=(0,i.useState)(0),c=(0,i.useCallback)(()=>u(e=>e+1),[]),[m,p]=(0,i.useState)(null);if(!e||!e.position||!t)return i.createElement(i.Fragment,null);let f=(0,o.UN)().get(e.guid);if(!f)return null;let E=(0,v.Yb)(t,e.position),g="ALIGNMENT"===e.type||"POLL"===e.type||"FACEPILE"===e.type||"EMBED"===e.type&&!(0,s.k)().slides_iframe_embedded_prototypes_thumbnail;return i.createElement("div",{"data-testid":`flapp-${e.guid}`,title:f.name,style:{position:"fixed",width:e.position.width,height:e.position.height,top:t.y,left:t.x,transform:`translate(${E.x}px, ${E.y}px) rotate(${e.position.angle}deg) scale(${t.zoomScale})`,transformOrigin:"top left",pointerEvents:r?"none":"auto"}},i.createElement("div",{className:P.U,ref:p},i.createElement(x,{element:e,shouldRenderMobileFlapp:n,isReadOnly:r,invalidateThumbnail:c})),m&&g&&i.createElement(D,{nodeId:e.guid,editCount:l,flappDomElement:m,isReadOnly:r,manualThumbnailInvalidationCount:d}))});function x({element:e,shouldRenderMobileFlapp:t,isReadOnly:n,invalidateThumbnail:r}){if(null===e.type)return null;let{EditorFlapp:a}=t?(0,N.v)(e.type):(0,N.Z)(e.type);return i.createElement(a,{nodeId:e.guid,isReadOnly:n,invalidateThumbnail:r})}function D({nodeId:e,editCount:t,manualThumbnailInvalidationCount:n,flappDomElement:r,isReadOnly:a}){let[s]=(0,m.A)(t,500),[d]=(0,m.A)(n,500),u=(0,_.tS)();return i.useEffect(()=>{var t;if(a)return;let n=(0,o.UN)().get(e);if(!n||"INTERACTIVE_SLIDE_ELEMENT"!==n.type)return;let i=f.lQ;return t=()=>{i=function(e,t,n){let i=t.interactiveSlideElementType,r=t.guid,a=!1;return c().toBlob(e,{bgcolor:"transparent"}).then(e=>e?.arrayBuffer()).then(e=>{if(!e||0===e.byteLength)throw Error("Cannot decode empty buffer");return(0,E.UD)(new Uint8Array(e),"image/png",`${r}thumbnail`)}).then(e=>{t.isAlive&&!a&&l.l7.system("generate-slide-thumbnail",()=>{0===t.fills.length?t.insertImageInFillPaint(e):t.setImageInFillPaint(e)})}).catch(e=>{(0,p.trackEvent)("Failed to generate thumbnail in editor for slide",{error:e,nodeId:r,flappType:i,fileKey:n},{forwardToDatadog:!0})}),()=>{a=!0}}(r,n,u??"")},requestAnimationFrame(()=>requestAnimationFrame(t)),i},[a,e,s,d,r,u]),i.createElement(i.Fragment,null)}}}]);

//# debugId=4e396ed3-47d5-596e-b04d-6efc6b21e985

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/c806c444796268d576cc87e80c35e04d40e9a08e/2483-f87694304cabec49.min.js.map
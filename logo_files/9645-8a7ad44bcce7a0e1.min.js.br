"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="5824633a-b835-5558-b11d-9d9448977eb8")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[9645],{43931:(e,t,l)=>{l.d(t,{A7:()=>o,i4:()=>r,nt:()=>a});var n=l(925040),s=l(366485);let a=e=>e.library.localStyleSelection,r=(0,n.Mz)([a,(e,t)=>t],(e,t)=>e?.type===t?e:null),o=(0,n.Mz)([r,(e,t,l)=>l],(e,t)=>{if(!e)return null;let l=new Set,n=new Set;return e.folderNames.forEach(e=>{let a=t.find(t=>"STYLE_FOLDER"===t.type&&t.name===e);a&&((0,s.KU)(a).forEach(e=>{l.add(e.name)}),(0,s.dm)(a).forEach(e=>{n.add(e.node_id)}))}),{type:e.type,folderNames:l,styleIds:n}})},919645:(e,t,l)=>{l.d(t,{Q:()=>eZ});var n=l(848318),s=l(301168),a=l(660376),r=l(559389),o=l(376852),i=l(673786),c=l(186606),d=l(320953),u=l(418193),y=l(7376),m=l(989232),p=l(865114),f=l(781239),g=l(608323),E=l(156137),S=l(967688),w=l(453370),h=l(244534),k=l(834428),_=l(438071),C=l(375694),b=l(67188),T=l(696786),v=l(303397),L=l(355755),R=l(730143),N=l(277454),I=l(555958),x=l(43931),A=l(720722),M=l(764872),D=l(341090),U=l(215148),P=l(614892),O=l(773511),K=l(658029),Y=l(808943),F=l(347701),B=l(150934),W=l(693108),H=l(401970),X=l(17753),$=l(536384),G=l.n($),V=l(857607),j=l(27776);let q="styles--contextMenu--C-hVT",z="styles--caret--DZmzh",Z="styles--rowSelectedExpanded--MGvUV",Q="styles--rowSelectedSecondaryLightBlue--S-zy- draggable_list--rowSelectedSecondary--yOI1g raw_components--rowSelectedSecondary---U7Us raw_components--rowSelected--M2Eip",J="styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO",ee="styles--panelHeaderRowFaded--pfgKz styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO draggable_list--panelHeaderRowFaded--kETRR",et="styles--panelTitleText--v7gXm draggable_list--panelTitleText--SwKez";function el({childLeft:e,childRight:t,deleteSelectedItems:l,forceShowHoverBorder:s,hideStylePreview:a,index:r,inspectStyleSelected:o,isDragging:i,isEditable:c,isRenaming:d,isCollapsed:u=!0,isLastChildOfSelection:y=!1,isFirstChildOfSelection:m=!1,isFolder:p,isFocused:g,level:E,name:S,nameRef:w,onContextMenu:h,onFocus:k,onBlur:_,onCreateFolder:C,onDoubleClick:b,onHoverChange:L,onMouseDown:R,onMouseMove:N,recordingKey:I,rowRef:x,secondaryName:A,selected:M,selectedSecondary:U,stopRenamingItem:O,tooltipData:K}){let[Y,F]=n.useState(S),[B,W]=n.useState(!1),H=(0,T.GS)(),X=n.useCallback(e=>{e?.select()},[]);n.useEffect(()=>{F(S)},[S]);let $=n.useCallback(e=>{""===e.trim()?(O(r,S),F(S)):O(r,e)},[r,S,O]),q=(0,f.AF)((0,f.Pt)(I,"text-input"),"change",n.useCallback(e=>{F(e.currentTarget.value)},[F])),z=(0,f.v_)((0,f.Pt)(I,"text-input"),"keydown",e=>{e.keyCode===V.Uz.ESCAPE?(O(r,S),F(S)):e.keyCode===V.Uz.ENTER&&$(e.currentTarget.value)},{recordMetadata:e=>({inputValue:e.currentTarget.value}),playbackMetadata:e=>({currentTarget:{value:e.inputValue}})}),J=(0,f.v_)(I,"keydown",e=>{c&&!d&&(e.keyCode===V.Uz.BACKSPACE||e.keyCode===V.Uz.DELETE)?l():c&&!d&&e.keyCode===V.Uz.G&&(0,V.Fo)(e)?(C(),e.preventDefault()):!d&&"Tab"!==e.key&&e.nativeEvent&&v.Y5.forwardKeyboardEvent(e.nativeEvent)}),ee=n.useCallback(()=>{$(Y)},[$,Y]),et=(0,f.rf)(I,"contextmenu",e=>{h(e)}),el=(0,f.rf)(I,"mousemove",e=>{N(e)},{recordMetadata:e=>({bounds:e.currentTarget.getBoundingClientRect(),pageX:e.pageX,pageY:e.pageY}),playbackMetadata:e=>({currentTarget:{getBoundingClientRect:()=>e.bounds},pageX:e.pageX,pageY:e.pageY})}),en=(0,f.rf)(I,"mousedown",e=>{R(e),a()}),es=(0,f.rf)(I,"mouseenter",n.useCallback(()=>{W(!0),L?.(!0)},[W,L])),ea=n.useCallback(()=>{W(!1),L?.(!1)},[W,L]),er=(0,f.rf)(I,"dblclick",n.useCallback(e=>{b(e)},[b])),eo=Math.min((E-1)*3,18),ei=j.jNX-4-eo,ec=ei-(H?7:5),ed=(B||g)&&!d||o?ec:ei,eu=M||U,ey=G()({[Z]:!u&&eu,"styles--folderSecondarySelected--SL0JY":U||M&&!m,[Q]:U&&!H}),em=G()({[Q]:eu,[Z]:!y&&eu}),ep=G()("styles--rowWithBorder--bphZ-",{[ey]:p,[em]:!p,"styles--rowWithHover--RWNMH":!eu&&(s||B&&!i)}),ef=n.createElement("div",{className:d?"styles--rowContentsRenaming--oDTtO styles--rowContents--37JBy":"styles--rowContents--37JBy",key:S,style:H?{width:"100%"}:{gridColumnEnd:`span ${ed}`}},d?n.createElement(P.ks,{autoCapitalize:"off",autoCorrect:"off",autoFocus:!0,className:"styles--input--LbjR0",innerRef:X,onBlur:ee,onChange:q,onKeyDown:z,spellCheck:!1,value:Y}):n.createElement(n.Fragment,null,n.createElement("div",{className:"styles--name--KWZ8d ellipsis--ellipsis--Tjyfa",ref:w,...K},S),A&&n.createElement("div",{className:"styles--textStyle--DiUv4"},A)));return n.createElement(D.e,{ref:x,className:ep,dragging:i,hideGrabber:!0,onBlur:_,onContextMenu:et,onDoubleClick:er,onFocus:k,onKeyDown:J,onMouseDown:en,onMouseEnter:es,onMouseLeave:ea,onMouseMove:el,selected:M,selectedSecondary:!1,tabIndex:0},eo>0&&n.createElement("span",{style:{gridColumnEnd:`span ${eo}`}}),n.createElement("div",{className:"styles--childLeftContainer--Hu61K",style:H?{gridColumnEnd:`span ${ed}`}:void 0},e,H&&ef),!H&&ef,t)}var en=l(523860),es=l(85206),ea=l(954184),er=l(546131);function eo({deleteSelectedItems:e,folder:t,folderNameToNestUnder:l,hideStylePreview:a,index:r,isCollapsed:o,isDragging:i,isEditable:c,isRenaming:d,isTemporarilyExpanded:u,isFirstChildOfSelection:y,level:m,onContextMenu:p,onCreateFolder:g,onMouseDown:E,onMouseMove:w,onRenameItem:h,recordingKey:k,selected:_,selectedSecondary:b,stopRenamingItem:T,temporarilyExpandFolder:v,toggleFolder:L}){let R=(0,s.wA)(),[N,x]=n.useState(!1),A=n.useRef(null),M=n.useRef(null),D=N&&!d&&c,U=n.useCallback(()=>{L(!o)},[o,L]),$=n.useCallback(e=>{e.target!==M.current&&t.styleTypeSection&&h(t.name,!1,t.styleTypeSection)},[t.name,t.styleTypeSection,h]);n.useEffect(()=>{if(N&&i&&o){let e=setTimeout(()=>{v(t.name)},1e3);return()=>clearTimeout(e)}},[N,i,o,v,t]);let G=n.useCallback(()=>{let e=(0,W.Zk)(t.styleTypeSection),l=A.current?.getBoundingClientRect();e&&l&&R(C.Zs({rowLeft:l.left,rowTop:l.top,styleType:t.styleTypeSection,styleNameInputPrefix:`${t.name}/`,inheritStyleKeyField:e}))},[A,t.name,t.styleTypeSection,R]);return n.createElement(el,{childLeft:n.createElement(O.E,{onClick:U,className:"styles--caretContainer--4-dqw",ref:M},n.createElement(H.U,{svg:o&&!u?es.A:en.A,className:z},o&&!u?n.createElement(Y.k,{className:z}):n.createElement(F.O,{className:z}))),childRight:D&&n.createElement(P.$4,null,n.createElement(K.K,{recordingKey:f.Pt(k,"addButton"),"aria-label":(0,S.t)("design_systems.styles.tooltips.create"),onClick:G,htmlAttributes:{"data-tooltip-type":X.Ib.TEXT,"data-tooltip":(0,S.t)("design_systems.styles.tooltips.create")}},n.createElement(H.U,{svg:ea.A,fallbackSvg:er.A,children:n.createElement(B.x,null)}))),deleteSelectedItems:e,forceShowHoverBorder:l===t.name,hideStylePreview:a,index:r,isCollapsed:o,isDragging:i,isEditable:c,isFirstChildOfSelection:y,isFolder:!0,isRenaming:d,level:m,name:(0,I.kH)(t.name),onContextMenu:p,onCreateFolder:g,onDoubleClick:$,onHoverChange:x,onMouseDown:E,onMouseMove:w,onRenameItem:h,recordingKey:k,rowRef:A,selected:_,selectedSecondary:b,stopRenamingItem:T})}var ei=l(353317),ec=l(361765),ed=l(410441),eu=l(360430),ey=l(526867),em=l(888663),ep=l(375347),ef=l(821561);function eg({deleteSelectedItems:e,hideStylePreview:t,index:l,isDragging:a,isEditable:r,isRenaming:o,isLastChildOfSelection:i,level:c,onContextMenu:d,onCreateFolder:u,onInspectStyle:y,onMouseDown:m,onMouseMove:p,onRenameItem:g,recordingKey:E,selected:w,selectedSecondary:k,stopRenamingItem:_,dsStyle:v,stylePreviewShown:L,updateContextMenuStyleRef:R,updateSelection:N,updateFocusRowRef:x}){let[A,M]=n.useState(!1),[D,U]=n.useState(!1),O=(0,s.wA)(),K=n.useRef(null),Y=n.useRef(null),F=(0,T.GS)(),B=n.useCallback(()=>{U(!0)},[]),W=n.useCallback(e=>{e.currentTarget.contains(e.relatedTarget)||U(!1)},[]),$=n.useCallback(()=>{r&&g(v.node_id,!0,v.style_type)},[g,v.node_id,v.style_type,r]),G=L.isShown&&!L.isCreating&&L.style.node_id===v.node_id&&(0,eu.EF)(L.style,v),V=(A||D)&&!o||G,q=n.useCallback(function(){let e=Y.current;if(e){let t=e.getBoundingClientRect();G?O(C.sw()):(O(C.rk({style:v,rowTop:t.top,rowLeft:t.left})),y(v),N({type:v.style_type,folderNames:new Set,styleIds:new Set(v.node_id)}))}O(h.XE())},[O,y,N,v,G]),z=n.useCallback(e=>{(2===e.button||e.ctrlKey)&&R(Y.current),m(e),G&&q()},[q,m,G,R]),Z=K.current,Q=!!Z&&Z.offsetWidth<Z.scrollWidth,J=n.useMemo(()=>!a&&v.description&&Q?{"data-tooltip-type":X.Ib.SPECIAL,"data-tooltip":ep.Z,"data-tooltip-style-name":(0,I.kH)(v.name),"data-tooltip-style-description":v.description,"data-tooltip-max-width":j.jNX*(0,ed.hG)(j.dGl)}:null,[Q,a,v.name,v.description]),ee="TEXT"===v.style_type&&v.meta?.style_thumbnail?v.meta.style_thumbnail:null;return n.createElement(el,{childLeft:n.createElement(n.Fragment,null,n.createElement(em.zi,{dsStyle:v,disableTooltip:!0}),w&&"FILL"===v.style_type&&n.createElement("div",{className:"styles--selectedRing--UniEc"})),childRight:V&&n.createElement(P.$4,null,n.createElement("div",{style:{gridColumnEnd:"span 1"}}),F?n.createElement(ei.d,{recordingKey:f.Pt(E,"customButton"),"aria-expanded":G,onClick:q,htmlAttributes:{"data-tooltip-type":X.Ib.TEXT,"data-tooltip":r?(0,S.t)("design_systems.styles.edit_style"):(0,S.t)("design_systems.styles.view_style"),onMouseDown:b.dG,tabIndex:0,onKeyDown:e=>{("Enter"===e.key||"Space"===e.key)&&(e.preventDefault(),q())}},children:n.createElement(H.U,{svg:ef.A},n.createElement(ec.A,null)),"aria-label":r?(0,S.t)("design_systems.styles.edit_style"):(0,S.t)("design_systems.styles.view_style")}):n.createElement(P.YW,{className:w?"styles--showOnSelectedRowHover--Lcf7e styles--showOnRowHover--OUqRT":"styles--showOnRowHover--OUqRT",recordingKey:f.Pt(E,"customButton"),"data-tooltip-type":X.Ib.TEXT,"data-tooltip":r?(0,S.t)("design_systems.styles.edit_style"):(0,S.t)("design_systems.styles.view_style"),selected:G,onMouseDown:b.dG,onClick:q},n.createElement(H.U,{svg:ef.A},n.createElement(ec.A,null)))),deleteSelectedItems:e,hideStylePreview:t,index:l,inspectStyleSelected:G,isDragging:a,isEditable:r,isFocused:D,isFolder:!1,isLastChildOfSelection:i,isRenaming:o,level:c,name:(0,I.kH)(v.name),nameRef:K,onBlur:W,onContextMenu:d,onCreateFolder:u,onDoubleClick:$,onFocus:B,onHoverChange:M,onMouseDown:z,onMouseMove:p,onRenameItem:g,recordingKey:E,rowRef:e=>{e&&(x?.(e),Y.current=e)},secondaryName:ee&&(0,ey.P$)(ee),selected:w,selectedSecondary:k,stopRenamingItem:_,tooltipData:J})}function eE({styleType:e,setDefaultToolOnCreateStyle:t,children:l}){let s=!(0,L.p8)("isReadOnly");return n.createElement("div",{className:"styles--styleTypeSection--jPjTq component_tiles--section--qMua7"},s?n.createElement(eS,{styleType:e,recordingKey:`style-section-header-${e}`,setDefaultToolOnCreateStyle:t}):n.createElement("div",{className:"styles--styleTypeSectionHeader--224lA component_tiles--sectionHeader--eEC6d raw_components--panelTitle--VAQQA"},(0,N.QT)(e)),l)}function eS({styleType:e,setDefaultToolOnCreateStyle:t,recordingKey:l}){let[a,r]=n.useState(!1),o=(0,s.wA)(),i=n.useRef(null),c=n.useCallback(()=>{t&&v.Y5.triggerAction("set-tool-default");let l=(0,W.Zk)(e),n=i.current?.getBoundingClientRect();l&&n&&o(C.Zs({rowLeft:n.left,rowTop:n.top,styleType:e,inheritStyleKeyField:l}))},[t,e,o]);return n.createElement("div",{className:"styles--styleTypeSectionRow--wVTIO",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),ref:i},n.createElement(P.JU,{className:"styles--styleTypeSectionRowLabel--PrKm-"},(0,N.QT)(e)),n.createElement("div",{style:{visibility:a?"visible":"hidden"}},n.createElement(K.K,{recordingKey:f.Pt(l,"addButton"),"aria-label":(0,S.t)("design_systems.styles.tooltips.create_style_from_section",{kind:(0,N.XV)(e).toLowerCase()}),onClick:c,htmlAttributes:{"data-tooltip-type":X.Ib.TEXT,"data-tooltip":(0,S.t)("design_systems.styles.tooltips.create_style_from_section",{kind:(0,N.XV)(e).toLowerCase()})}},n.createElement(H.U,{svg:ea.A,fallbackSvg:er.A,children:n.createElement(B.x,null)}))))}eE.displayName="StyleTypeSection";var ew=l(156974),eh=l(511067),ek=l(366485);let e_=ew.ms,eC=ew.c$,eb=ew.wv,eT="styles-by-type-context-menu",ev=.75*(0,ed.hG)(j.uj0);function eL({styleRowRef:e,onEditStyle:t,onRenameItem:l,onCreateFolder:a,onDeleteItems:r,onCutItems:o,onCopyItems:i,onDuplicateItems:c,onPasteItems:d,styleType:u}){let y=(0,eh.Um)(),m=(0,s.d4)(e=>e.library.localStyleSelection),p=n.useMemo(()=>m&&m.type===u&&y?.type===eT?(0,ek.QA)(m,y.data.uiList):[],[m,y,u]),f=n.useMemo(()=>(0,ek.Ug)(p).map(e=>e.node_id),[p]),g=f.length;return y&&f.length?n.createElement(eR,{dropdownShown:y,numStyles:g,onCopyItems:i,onCreateFolder:a,onCutItems:o,onDeleteItems:r,onDuplicateItems:c,onEditStyle:t,onPasteItems:d,onRenameItem:l,selectedItems:p,styleRowRef:e}):n.createElement("div",null)}function eR({styleRowRef:e,selectedItems:t,numStyles:l,dropdownShown:a,onEditStyle:r,onRenameItem:o,onCreateFolder:i,onDeleteItems:d,onCutItems:u,onCopyItems:y,onDuplicateItems:m,onPasteItems:p}){let f=(0,s.wA)();n.useEffect(()=>(c.glU.computePastableStyleCount(),()=>{c.glU.clearPastableStyleCount()}),[]);let g=(0,s.d4)(e=>e.mirror.appModel.pastableStyleCount),E=!!R.q5()?.canEdit,w=n.useCallback(()=>{if(!t.length||t[0].type!==A.PW.STYLE)return;let l=t[0];if(e){let t=e.getBoundingClientRect();f(C.rk({style:l,rowTop:t.top,rowLeft:t.left})),f(h.XE())}r(l)},[f,t,r,e]),k=n.useCallback(()=>{if(!t.length||t[0].type===A.PW.STYLE)return;let e=t[0];o(e.name,!1,e.styleTypeSection)},[o,t]);if(-1===g)return n.createElement("div",null);if(!E)return l>1?n.createElement("div",null):n.createElement(e_,{style:a.data.position,className:q},n.createElement(eC,{recordingKey:"edit-style-option",onClick:w},(0,S.tx)("design_systems.styles.view_style")));let _=1===l&&(t[0].type===A.PW.STYLE?n.createElement(eC,{recordingKey:"edit-style-option",onClick:w},(0,S.tx)("design_systems.styles.edit_style")):n.createElement(eC,{recordingKey:"rename-folder-option",onClick:k},(0,S.tx)("design_systems.styles.rename_folder")));return n.createElement(e_,{style:a.data.position,className:q},n.createElement(eC,{recordingKey:"create-folder-option",onClick:i},(0,S.tx)("design_systems.styles.add_new_folder")),_,n.createElement(eC,{recordingKey:"delete-style-option",onClick:d},(0,S.tx)("design_systems.styles.delete_styles",{numStyles:l})),n.createElement(eb,null),n.createElement(eC,{recordingKey:"cut-style-option",onClick:u},(0,S.tx)("design_systems.styles.cut_styles",{numStyles:l})),n.createElement(eC,{recordingKey:"copy-style-option",onClick:y},(0,S.tx)("design_systems.styles.copy_styles",{numStyles:l})),n.createElement(eC,{recordingKey:"duplicate-style-option",onClick:m},(0,S.tx)("design_systems.styles.duplicate_styles",{numStyles:l})),!!g&&n.createElement(eC,{recordingKey:"paste-style-option",onClick:p},(0,S.tx)("design_systems.styles.paste_styles",{numStyles:g})))}var eN=l(168323),eI=l(990140),ex=l(601021),eA=l(451657),eM=l(651756),eD=l(305886),eU=l(19180),eP=l(547011),eO=l(335744),eK=l(14850),eY=l(483157),eF=l(215707),eB=l(542373),eW=l(300048),eH=l(383109);let eX="local-style-creation-dropdown";function e$({setDefaultToolOnCreateStyle:e}){return(0,eU.k)().eu_fpl_styles_header_menu?n.createElement(ej,{setDefaultToolOnCreateStyle:e}):n.createElement(eG,{setDefaultToolOnCreateStyle:e})}function eG({setDefaultToolOnCreateStyle:e}){let t=(0,s.wA)(),l=(0,n.useContext)(eK.lk),a=!(0,L.p8)("isReadOnly"),r=n.useRef(null),o=n.useRef(null),i=r.current,c=(0,eh.Um)(),d=c?.type===eX,u=c?.data?.targetRect,y="localStyleHeader",p=0===(0,U.Bs)().length,g=(0,s.d4)(e=>e.stylePreviewShown.isShown&&e.stylePreviewShown.isCreating),E=n.useMemo(()=>u||(d&&i?i.getBoundingClientRect():null),[u,i,d]),h=()=>{t(w.oB())},k=()=>{t(w.j7({type:eX}))},_=e=>{e.stopPropagation(),t(C.YG());let l=r.current;d?h():l&&((0,m.trackEvent)("editor-local-styles-dropdown-show"),k())},b=t=>{e&&v.Y5.triggerAction("set-tool-default"),h();let n=(0,W.Zk)(t),s=o.current?.getBoundingClientRect();n&&s&&l({styleType:t,inheritStyleKeyField:n,rowLeft:s.left,rowTop:s.top})},T=p&&!d&&!g;return n.createElement(P.fI,{className:T?ee:J,ref:o},n.createElement(eY.x,{className:et,onMouseDown:e=>T&&_(e),onClick:e=>e.stopPropagation()},(0,S.tx)("design_systems.styles.local_styles")),a&&n.createElement(n.Fragment,null,n.createElement(P.K0,{ref:r,onMouseDown:_,onClick:e=>e.stopPropagation(),className:d?"styles--stylesHeaderButtonHighlight--WTeWy raw_components--iconButtonSelected--bJibL raw_components--_iconButton---ybo6":"styles--stylesHeaderButton--jhpA5 draggable_list--addButton--D0q--","data-tooltip-type":X.Ib.TEXT,"data-tooltip":(0,S.t)("design_systems.create_style.create_style"),recordingKey:f.Pt(y,"addButton")},n.createElement(H.U,{svg:ea.A,fallbackSvg:er.A},n.createElement(eI.e,null))),d&&E&&n.createElement(eO.Cf,{targetRect:E,minWidth:128,disableDropdownScrollContainer:!0,propagateCloseClick:!0},N.og.map(e=>{let{icon:t,label:l}=eV(e),s=t=>{t.stopPropagation(),b(e)};return n.createElement(ew.c$,{key:e,className:"styles--createStyleDropdownRow--7iCXQ",onClick:s,onPointerUp:s,recordingKey:f.Pt(y,`dropdown-option-${e}`)},n.createElement(eP.Nu,null,t),l)}))))}function eV(e){switch(e){case"TEXT":return{icon:n.createElement(H.U,{svg:eH.A},n.createElement(ex.e,null)),label:(0,S.t)("design_systems.styles.dropdown.text")};case"FILL":return{icon:n.createElement(H.U,{svg:eB.A},n.createElement(eA.G,null)),label:(0,S.t)("design_systems.styles.dropdown.fill")};case"GRID":return{icon:n.createElement(H.U,{svg:eW.A},n.createElement(eM.E,null)),label:(0,S.t)("design_systems.styles.dropdown.guide")};case"EFFECT":return{icon:n.createElement(H.U,{svg:eF.A},n.createElement(eD.n,null)),label:(0,S.t)("design_systems.styles.dropdown.effect")};default:throw(0,a.j)(e),Error(`Invalid style type: ${e}`)}}function ej({setDefaultToolOnCreateStyle:e}){let t=n.useRef(null),l=(0,n.useContext)(eK.lk),{getTriggerProps:a,manager:r}=eN.b(),{onClick:o,...i}=a(),c=!(0,L.p8)("isReadOnly"),d=0===(0,U.Bs)().length,u=(0,s.d4)(e=>e.stylePreviewShown.isShown&&e.stylePreviewShown.isCreating),y=d&&!r.isOpen&&!u,p=n.useCallback(()=>{y&&(r.setOpen(!0),(0,m.trackEvent)("editor-local-styles-dropdown-show"))},[r,y]),f=n.useCallback(e=>{r.isOpen||(0,m.trackEvent)("editor-local-styles-dropdown-show"),o(e)},[r.isOpen,o]),g=n.useCallback(n=>{e&&v.Y5.triggerAction("set-tool-default");let s=(0,W.Zk)(n),a=t.current?.getBoundingClientRect();s&&a&&l({styleType:n,inheritStyleKeyField:s,rowLeft:a.left,rowTop:a.top})},[l,e,t]);return n.createElement(P.fI,{className:y?ee:J,ref:t},n.createElement(eY.x,{className:et,onMouseDown:p,onClick:e=>e.stopPropagation()},(0,S.tx)("design_systems.styles.local_styles")),c&&n.createElement(eq,{manager:r,triggerProps:{...i,onClick:f},onMenuItemClick:g,recordingKey:"localStyleHeader"}))}function eq({manager:e,triggerProps:t,onMenuItemClick:l,recordingKey:s}){return n.createElement(eN.bL,{manager:e},n.createElement(ei.d,{"aria-label":(0,S.t)("design_systems.create_style.create_style"),recordingKey:f.Pt(s,"addButton"),...t},n.createElement(eI.e,null)),n.createElement(eN.mc,null,N.og.map(e=>{let{icon:t,label:a}=eV(e);return n.createElement(eN.q7,{key:e,onClick:()=>l(e),recordingKey:f.Pt(s,`menu-item-${e}`)},n.createElement(eN.Q$,null,t),a)})))}let ez="collapsed-style-folders";function eZ({scrollContainer:e,setDefaultToolOnCreateStyle:t,recordingKey:l}){let s=(0,U.Bs)(),a=(0,L.p8)("isReadOnly");return 0===s.length&&a?null:n.createElement(E.k,{name:"local_styles_panel"},n.createElement(P.Zk,null,n.createElement(eQ,{scrollContainer:e,setDefaultToolOnCreateStyle:t,recordingKey:l})))}function eQ({scrollContainer:e,setDefaultToolOnCreateStyle:t,recordingKey:l}){let r=(0,s.wA)(),o=(0,s.d4)(e=>e.stylePreviewShown),u=(0,s.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),y=(0,s.d4)(e=>e.mirror.appModel.currentTool),p=n.useRef(null),g=(0,U.Bs)(),E=(0,s.d4)(e=>e.library.localStyleSelection),[S,h]=n.useState(null),[_,T]=n.useState(null),L=n.useRef(null),[R,x]=n.useState(!1),M=u===c.m1T.GRADIENT||u===c.m1T.RASTER||y===c.NLJ.DROPPER_COLOR;n.useEffect(()=>{let e=()=>{!M&&(r(k.Bn(null)),o.isShown&&(r(C.sw()),c.glU.selectStyle(i.n3.INVALID,i.IA.INVALID)))},t=(0,b.ft)();return t?window.addEventListener("pointerdown",e):window.addEventListener("mousedown",e),()=>{t?window.removeEventListener("pointerdown",e):window.removeEventListener("mousedown",e)}},[r,o.isShown,M]);let{stylesByType:D,foldersAndStylesByType:P}=n.useMemo(()=>{let e=(0,N.Kw)(g),t=new Map;return N.og.map(l=>{let n=e.get(l);if(n){(0,N.LX)(n);let e=(0,ek.lM)(n,l),s=(0,ek.l0)(e);t.set(l,s)}}),{stylesByType:e,foldersAndStylesByType:t}},[g]),O=n.useCallback(e=>{(0,a.KF)(null!=e.content_hash,"style does not have a hash"),c.glU.selectStyleByGuid(e.node_id),r(k.ay({isRenaming:!1})),(0,m.trackEvent)("Style Inspected",{styleType:e.style_type,from:"styleListClick"})},[r]),K=n.useCallback((e,t,l)=>{h(t?e:null),T(t?null:{name:e,styleTypeSection:l})},[]),Y=n.useCallback(e=>{if(!e){r(k.Bn(null));return}let t=new Set;e.styleIds.forEach(l=>{let n=g.find(e=>e.type===A.PW.STYLE&&e.node_id===l);if(!n)return;let s=(0,I.In)(n.name);e.folderNames.has(s)||t.add(l)});let l={type:e.type,folderNames:e.folderNames,styleIds:t};r(k.Bn(l))},[r,g]),F=n.useCallback((e,t,l)=>{if(!E)return;let n=e[t],s=(e,t)=>{let n=(0,I.ke)(e.name),s=null!=t?t:n.length-1;n[s]=l;let a=(0,ek.Pc)(n.join("/"));d.l7.user("rename-style",()=>c.glU.renameNode(e.node_id,a))};if(n.name!==l){if(n.type===A.PW.STYLE)s(n);else{(0,ek.mx)(t,e).forEach(t=>{let l=e[t];l.type===A.PW.STYLE&&s(l,n.level-1)});let a=new Set(E.folderNames);a.delete(n.name);let r=(0,I.In)(n.name)+"/"+l;a.add(r),Y({type:E.type,folderNames:a,styleIds:E.styleIds})}}v.Y5.triggerAction("commit"),h(null),T(null)},[E,Y]),B=n.useCallback((e,t)=>{t.preventDefault(),t.stopPropagation(),r(w.j7({type:eT,data:{uiList:e,position:{top:t.clientY,left:Math.min(t.clientX,window.innerWidth-ev)}}}))},[r]),W=n.useCallback(e=>{L.current=e},[]),H=n.useCallback(()=>{x(!0)},[]),X=n.useCallback(()=>{x(!1)},[]);return n.createElement("div",{className:"styles--localStylesPanel--T4Gqs",ref:p},n.createElement(e$,{setDefaultToolOnCreateStyle:t}),N.og.map(s=>{let a=D.get(s);if(!a)return;let r=P.get(s);if(r)return n.createElement(eJ,{key:s,isDragging:R,onContextMenu:B,onDragEnd:X,onDragStart:H,onEditStyle:O,onInspectStyle:O,onRenameItem:K,recordingKey:f.Pt(l,`style-section-${s}`),renamingFolder:_,renamingStyleID:S,scrollContainer:e,setDefaultToolOnCreateStyle:t,stopRenamingItem:F,storedStyleList:a,styleList:r,styleRowRef:L.current,styleType:s,updateContextMenuStyleRef:W,updateSelection:Y})}))}function eJ({styleType:e,storedStyleList:t,styleList:l,renamingStyleID:m,renamingFolder:E,onRenameItem:w,stopRenamingItem:k,onDragStart:b,onDragEnd:N,onInspectStyle:D,onContextMenu:U,updateContextMenuStyleRef:P,updateSelection:O,styleRowRef:K,scrollContainer:Y,setDefaultToolOnCreateStyle:F,recordingKey:B}){let W=(0,R.q5)(),H=!(0,L.p8)("isReadOnly"),X=(0,s.wA)(),$=(0,s.d4)(e=>e.stylePreviewShown),G=(0,T.GS)(),V=(0,s.d4)(t=>(0,x.i4)(t,e)),j=(0,s.d4)(t=>(0,x.A7)(t,e,l)),[q,z]=n.useState(()=>{if(y.x4&&W){let t=JSON.parse(y.x4.getItem(ez)||"{}");if(W.key in t){let l=t[W.key];if(e in l)return new Set(l[e])}else t[W.key]={},y.x4.setItem(ez,JSON.stringify(t))}return new Set(l.filter(e=>"STYLE_FOLDER"===e.type).map(e=>e.name))}),[Z,Q]=n.useState([]),[J,ee]=n.useState(null),[et,el]=n.useState(null),en=n.useMemo(()=>(0,r.s)(()=>{X(_.GT({styleType:e}))},200),[X,e]);n.useEffect(()=>{en()},[en,l]);let es=(0,p.ZC)(q);n.useEffect(()=>{if(!es||!y.x4||!W||(0,g._f)(es,q))return;let t=JSON.parse(y.x4.getItem(ez)||"{}"),l=t[W.key];l&&(l[e]=[...q],y.x4.setItem(ez,JSON.stringify(t)))},[q,W,es,e]);let ea=n.useCallback(e=>!!e&&"STYLE_FOLDER"===e.type,[]),er=n.useCallback((e,t)=>{let n=new Set(e),s=[];l.forEach((e,t)=>{if(n.has(e)&&(s.push(t),"STYLE_FOLDER"===e.type)){let e=(0,ek.mx)(t,l);s.push(...e)}});let a=new Set(s),r=t?l.indexOf(t):l.length,i=[...(0,o.y1)(r).filter(e=>!a.has(e)),...s,...(0,o.y1)(r,l.length).filter(e=>!a.has(e))],c=new Map;return i.forEach((e,t)=>{e!==t&&c.set(e,t)}),c},[l]),ei=n.useCallback(()=>{$.isShown&&(X(C.sw()),X(h.XE()),c.glU.selectStyle(i.n3.INVALID,i.IA.INVALID))},[X,$.isShown]),ec=n.useMemo(()=>{if(!J)return null;if("in"===J.type){let e=l[J.index];return e?{folderNameToNestUnder:e.name,dividerStyles:{display:"none"}}:null}if(null==J.index||null==et||!V)return null;let e=(0,ek.QA)(V,l),t=e[0],n=null,s=null;if(0===J.index?s=l[J.index]:J.index===l.length?n=l[J.index-1]:(n=l[J.index-1],s=l[J.index]),n?.type==="STYLE_FOLDER"&&q.has(n.name)&&-1===Z.indexOf(n.name))return{folderNameToNestUnder:n.name,dividerStyles:{display:"none"}};if(n?.type===A.PW.STYLE){let e=(0,I.In)(n.name).split("/");for(let l=0;l<e.length;l++){let n=e.slice(0,l+1).join("/");if(q.has(n)&&-1===Z.indexOf(n)){if("STYLE_FOLDER"!==t.type)return{folderNameToNestUnder:n,dividerStyles:{display:"none"}};return{folderNameToNestUnder:(0,I.In)(n),dividerStyles:{marginLeft:24*Math.min((0,I.ke)(n).length,8)-8}}}}}let r=0,o=null,i=n?(0,ek.rM)(n):0,c=s?(0,ek.rM)(s):0;if(i<=c)r=c,o=n?n.type===A.PW.STYLE?(0,I.In)(n.name):n.name:"";else if((0,a.KF)(null!=n,"Dragging after an item that doesn't exist"),t.type===A.PW.STYLE||et>=.5)r=i,o=(0,I.In)(n.name);else{let e=Math.floor(et/.5*(0,ek.rM)(n));e=Math.max(c-1,e),o=(0,I.ke)((0,I.In)(n.name)).slice(0,e).join("/"),r=e+1}let d={marginLeft:24*Math.min(r,8)-8};return n&&e.includes(n)||!(0,ek.Md)(n,t,s)?{folderNameToNestUnder:null,dividerStyles:d}:{folderNameToNestUnder:o,dividerStyles:d}},[q,et,V,J,l,Z]),ed=n.useCallback((n,s,a,r)=>{if(!t||!s&&!a||!ec)return;let o=ec.folderNameToNestUnder;if(null===o)return;let i=[],c=[];n.forEach(e=>{(0,ek.Md)(s,e,a,o)&&("STYLE_FOLDER"===e.type?c.push(e):i.push(e))});let u=i.concat(c);if(!u.length)return;let y=d.l7.user("reorder-styles",()=>(0,ek.VB)(u,s,a,o,l,t,r||!1)),m=new Set,p=new Set;u.forEach(e=>{let t=(0,ek.t_)(e),l=y?.get(t);l&&("STYLE_FOLDER"===e.type?m.add(l):p.add(t))}),O({type:e,folderNames:m,styleIds:p});let f=new Set;return q.forEach(e=>{if(o.startsWith(e))return;let t=y?.get(e);t?f.add(t):f.add(e)}),z(f),ei(),r||v.Y5.triggerAction("commit"),er(u,a)},[O,q,ec,er,ei,t,l,e]),eu=n.useCallback((e,t)=>{if("STYLE_FOLDER"!==t.type)return;let n=l.indexOf(t),s=(0,ek.dm)(t).filter(e=>(0,I.In)(e.name)===t.name);if(!s.length)return ed(e,t,l[n+1]);{let t=s[s.length-1],n=l.indexOf(t);return ed(e,t,l[n+1])}},[ed,l]),ey=(0,u.xx)((e,t)=>{let n=new Map,s=t.map(e=>e.type===A.PW.STYLE?e.node_id:e.name);return e.forEach(e=>{let a=s.indexOf(e);-1!==a&&(0,ek.mx)(a,l).forEach(e=>{let l=t[e],s="STYLE_FOLDER"===l.type?l.name:l.node_id,a=n.get(s);a||(a=0),n.set(s,a+1)})}),n}),em=n.useCallback(()=>{if(!V)return;let t=(0,ek.QA)(V,l);if(0===t.length)return;let n=t[0],s=l.indexOf(n),a=s,r=s+1;if(n.type===A.PW.STYLE&&l[r]&&l[r].type===A.PW.STYLE){let e=(0,ek.rM)(n);for(let t=s+1;t<l.length;t++){let n=l[t];if("STYLE_FOLDER"===n.type&&n.level===e||(0,ek.rM)(n)<e){a=t-1,r=t;break}t===l.length-1&&(a=t,r=t+1)}}ed(t,l[a],l[r],!0);let o=(0,I.In)(n.name),i=G?(0,S.t)("design_systems.create_style.new_folder"):(0,S.t)("design_systems.create_style.untitled_folder");o&&(i=`${o}/${i}`);let u=(e,t)=>{if(e.type===A.PW.STYLE){let l=i+"/"+t+(0,I.kH)(e.name);d.l7.user("rename-style",()=>{c.glU.renameNode(e.node_id,l)})}else{let l=t+(0,I.kH)(e.name)+"/";e.styles.forEach(e=>{u(e,l)}),e.subfolders.forEach(e=>{u(e,l)})}};t.forEach(e=>{u(e,"")}),O({type:e,folderNames:new Set([i]),styleIds:new Set}),w(i,!1,e)},[O,ed,G,V,w,l,e]),ep=n.useCallback((e,t)=>{let n=l[e];"STYLE_FOLDER"===n.type&&z(e=>{let l=new Set(e);return t?l.add(n.name):l.delete(n.name),l})},[l]),ef=n.useCallback((e,t)=>{z(n=>{let s=new Set(n),a=l[e];if("STYLE_FOLDER"===a.type){let e=(0,I.In)(a.name),l=""===e?t:e+"/"+t;q.has(a.name)&&(q.delete(a.name),q.add(l)),(0,ek.KU)(a).forEach(e=>{if(q.has(e.name)){let t=e.name.replace(a.name,"");q.add(l+t),q.delete(e.name)}})}return s}),k(l,e,t)},[k,q,l]),eS=n.useCallback(e=>{U(l,e)},[U,l]),ew=n.useCallback((e,t,l)=>{let n=t>.5?1:Math.round(1e3*t)/1e3;ee({index:e,type:l?"in":"before"}),el(n)},[]),eh=n.useCallback(()=>{z(e=>d.l7.user("delete-styles",()=>{let t=new Set(e);return(V?(0,ek.QA)(V,l):[]).forEach(e=>{"STYLE_FOLDER"===e.type?((0,ek.a2)(e,W?.key||null),q.delete(e.name),(0,ek.KU)(e).forEach(e=>q.delete(e.name))):(0,ek.Nr)(e,W?.key||null)}),t})),v.Y5.triggerAction("commit"),$.isShown&&(X(C.sw()),X(h.XE()),c.glU.selectStyle(i.n3.INVALID,i.IA.INVALID)),O(null)},[$.isShown,O,V,l,W?.key,q,X]),e_=n.useMemo(()=>{let e=V?(0,ek.QA)(V,l):[];return(0,ek.Ug)(e).map(e=>e.node_id)},[V,l]),eC=n.useCallback(()=>{d.l7.user("cut-styles",()=>c.glU&&c.glU.cutStyles(e_))},[e_]),eb=n.useCallback(()=>{d.l7.user("copy-styles",()=>c.glU&&c.glU.copyStyles(e_))},[e_]),eT=n.useCallback(()=>{d.l7.user("duplicate-styles",()=>c.glU&&c.glU.duplicateStyles(e_))},[e_]),ev=n.useCallback(()=>{d.l7.user("paste-styles",()=>c.glU&&c.glU.pasteStyles())},[]);n.useEffect(()=>{if(!V)return;let e=(e,t)=>{e.target&&("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)||(t(),e.stopPropagation())},t=t=>{e(t,eC)},l=t=>{e(t,ev)},n=t=>{e(t,eb)};return document.addEventListener("cut",t),document.addEventListener("paste",l),document.addEventListener("copy",n),()=>{document.removeEventListener("cut",t),document.removeEventListener("paste",l),document.removeEventListener("copy",n)}},[eC,ev,eb,V]);let eR=n.useCallback(e=>{Q(t=>[...t,e])},[]),eN=n.useCallback(()=>{b()},[b]),eI=f.rf(B,"ondragend",n.useCallback(()=>{ee(null),el(null),Q([]),N()},[N])),ex=(0,p.ZC)(V);n.useEffect(()=>{ex!==V&&V&&z(e=>{let l=new Set(e);for(let e of V.styleIds.values()){let n=t.find(t=>t.node_id===e);if(!n)continue;let s=(0,I.ke)(n.name);for(let e=0;e<s.length;e++){let t=s.slice(0,e).join("/");l.delete(t)}}return l})},[V,ex,t]);let eA=n.useRef(null),eM=n.useCallback(e=>{eA.current=e},[eA]),eD=n.useMemo(()=>V?(0,ek.h$)(V,l):[],[V,l]),eU=n.useMemo(()=>j?(0,ek.h$)(j,l):[],[j,l]),eP=n.useMemo(()=>[...eD,...eU].sort((e,t)=>e-t),[eD,eU]),eO=n.useCallback((e,t,s,a,r,o)=>{let i="STYLE_FOLDER"===e.type?e.name:e.node_id,c=!1,d=!1;for(let t of Z)if("STYLE_FOLDER"===e.type){if(e.name===t){d=!0;break}e.name.startsWith(t)&&(c=!0)}else if((0,I.In)(e.name)===t){c=!0;break}if(!d&&!c&&ey(q,l).has(i))return null;let u=eP&&eP[eP.length-1]===t,y=eP&&eP[0]===t;if(e.type===A.PW.STYLE){let l=(0,ek.rM)(e),i=null!=m&&m===e.node_id;return n.createElement(eg,{key:e.node_id,deleteSelectedItems:eh,dsStyle:e,hideStylePreview:ei,index:t,isDragging:a,isEditable:H,isLastChildOfSelection:u,isRenaming:i,level:l,onContextMenu:eS,onCreateFolder:em,onInspectStyle:D,onMouseDown:r,onMouseMove:o,onRenameItem:w,recordingKey:`style-row-${t}`,selected:s,selectedSecondary:j?.styleIds.has(e.node_id)||!1,stopRenamingItem:ef,stylePreviewShown:$,updateContextMenuStyleRef:P,updateFocusRowRef:s?eM:null,updateSelection:O})}{let l=null!=E&&E.name===e.name&&E.styleTypeSection===e.styleTypeSection,i=ec?.folderNameToNestUnder||null;return n.createElement(eo,{key:t,deleteSelectedItems:eh,folder:e,folderNameToNestUnder:i,hideStylePreview:ei,index:t,isCollapsed:q.has(e.name),isDragging:a,isEditable:H,isFirstChildOfSelection:y,isRenaming:l,isTemporarilyExpanded:d,level:e.level,onContextMenu:eS,onCreateFolder:em,onMouseDown:r,onMouseMove:o,onRenameItem:w,recordingKey:`folder-section-${e.styleTypeSection}-row-${t}`,selected:s,selectedSecondary:j?.folderNames.has(e.name)||!1,stopRenamingItem:ef,temporarilyExpandFolder:eR,toggleFolder:e=>ep(t,e)})}},[O,eP,q,eh,ec?.folderNameToNestUnder,ey,ei,eS,em,D,w,E,m,j?.folderNames,j?.styleIds,ef,l,$,eR,Z,ep,P,H,eM]),eK=n.useCallback(t=>{let n=new Set,s=new Set;t.forEach(e=>{let t=l[e];"STYLE_FOLDER"===t.type?n.add(t.name):s.add(t.node_id)}),O({type:e,folderNames:n,styleIds:s})},[O,l,e]),eY=n.useRef(),eF=n.useRef();return n.useEffect(()=>{eY.current&&eD.length?(eY.current(),eA.current&&!eA.current.contains(document.activeElement)&&eA.current.focus()):eF.current&&!eD.length&&(eF.current(),eA.current=null)},[eY,eD,eA]),n.createElement(M.vL,{name:"StyleDraggableList",focusFunctionRef:eY,blurFunctionRef:eF},n.createElement(eE,{styleType:e,setDefaultToolOnCreateStyle:F},n.createElement(e0,{canInsertItemsIn:ea,insertDividerStyle:ec?.dividerStyles,isDragDisabled:!H,listItems:l,onDrag:ew,onDragEnd:eI,onDragStart:eN,onInsertItemsBetweenValues:ed,onInsertItemsIn:eu,recordingKey:"style-draggable-list",renderListItem:eO,scrollContainer:Y,selectedIndices:eD,updateSelection:eK}),n.createElement(eL,{onCopyItems:eb,onCreateFolder:em,onCutItems:eC,onDeleteItems:eh,onDuplicateItems:eT,onEditStyle:D,onPasteItems:ev,onRenameItem:w,styleRowRef:K,styleType:e})))}let e0=D.q}}]);

//# debugId=5824633a-b835-5558-b11d-9d9448977eb8

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/06d624f8f86c62ba2d7a6ea9f680a1a057120f5c/9645-8a7ad44bcce7a0e1.min.js.map
"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="d0192558-3c9e-5149-bb95-a13768c1b24c")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[7872],{756305:(e,t,l)=>{l.d(t,{A:()=>n});let n='<svg xmlns="http://www.w3.org/2000/svg" width="19" height="29" viewBox="0 0 19 29"><path fill="#1ABCFE" d="M9.5 14.417c0-2.624 2.127-4.75 4.75-4.75 2.623 0 4.75 2.126 4.75 4.75v.166c0 2.623-2.127 4.75-4.75 4.75-2.623 0-4.75-2.126-4.75-4.75z" style="fill:#1abcfe;fill:color(display-p3 .1002 .7381 .9956);fill-opacity:1"/><path fill="#0ACF83" d="M0 24.209c0-2.67 2.164-4.875 4.833-4.875H9.5v4.916C9.5 26.874 7.373 29 4.75 29 2.127 29 0 26.832 0 24.21" style="fill:#0acf83;fill:color(display-p3 .0392 .8123 .5136);fill-opacity:1"/><path fill="#FF7262" d="M9.5 0v9.667h4.667C16.836 9.667 19 7.503 19 4.833 19 2.164 16.836 0 14.167 0z" style="fill:#ff7262;fill:color(display-p3 1 .4471 .3843);fill-opacity:1"/><path fill="#F24E1E" d="M0 4.833c0 2.67 2.164 4.833 4.833 4.833H9.5V0H4.833C2.164 0 0 2.164 0 4.833" style="fill:#f24e1e;fill:color(display-p3 .949 .3059 .1176);fill-opacity:1"/><path fill="#A259FF" d="M0 14.5c0 2.67 2.164 4.834 4.833 4.834H9.5V9.667H4.833C2.164 9.667 0 11.83 0 14.5" style="fill:#a259ff;fill:color(display-p3 .6353 .349 1);fill-opacity:1"/></svg>'},386094:(e,t,l)=>{l.d(t,{A:()=>n});let n='<svg xmlns="http://www.w3.org/2000/svg" width="33" height="24" viewBox="0 0 33 24"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M26.288.057c.235.124.323.411.197.641l-2.43 4.408c4.548 2.462 7.757 7.031 8.276 12.375.013.133-.032.265-.124.364-.092.099-.222.155-.358.155H.819c-.137 0-.268-.056-.36-.155-.091-.099-.136-.23-.123-.363.519-5.342 3.725-9.91 8.27-12.373L6.092.704c-.13-.228-.047-.516.187-.644.234-.127.529-.045.66.183l2.53 4.432c2.082-.972 4.41-1.515 6.864-1.515 2.453 0 4.779.542 6.86 1.512L25.63.249c.127-.23.42-.316.657-.192zm-9.955 4.05c-2.463 0-4.788.582-6.841 1.614C5.152 7.9 2.02 12.093 1.36 17.053h29.945c-.66-4.96-3.79-9.151-8.13-11.332-2.054-1.032-4.379-1.614-6.843-1.614z"/><path fill="#000" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M10.838 11.368c0 .785-.65 1.421-1.454 1.421-.803 0-1.455-.636-1.455-1.42 0-.785.652-1.422 1.455-1.422.803 0 1.454.637 1.454 1.421m13.576 0c0 .785-.651 1.421-1.454 1.421-.804 0-1.455-.636-1.455-1.42 0-.785.651-1.422 1.455-1.422.803 0 1.454.637 1.454 1.421"/></svg>'},237839:(e,t,l)=>{l.d(t,{A:()=>n});let n='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="#000" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M8 3C5.295 3 3.108 4.978 3.004 7.789l1.142-1.143.708.708L2.5 9.707.146 7.354l.708-.708 1.15 1.15C2.105 4.408 4.76 2 8 2c3.314 0 6 2.686 6 6 0 3.314-2.686 6-6 6-1.845 0-3.496-.834-4.596-2.143l-.322-.382.766-.644.322.383C5.088 12.307 6.463 13 8 13c2.761 0 5-2.239 5-5 0-2.761-2.239-5-5-5m-.5 1.5v4.286H11v-1H8.5V4.5z"/></svg>'},145768:(e,t,l)=>{l.d(t,{A:()=>n});let n='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="24" viewBox="0 0 32 24"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M14 1H2c-.552 0-1 .448-1 1v20c0 .552.448 1 1 1h12c.552 0 1-.448 1-1V2c0-.552-.448-1-1-1M2 0C.895 0 0 .895 0 2v20c0 1.105.895 2 2 2h12c1.105 0 2-.895 2-2V2c0-1.105-.895-2-2-2z"/><path fill="#000" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M4 4.5c0-.276.224-.5.5-.5h7c.276 0 .5.224.5.5 0 .276-.224.5-.5.5h-7c-.276 0-.5-.224-.5-.5"/></svg>'},117783:(e,t,l)=>{l.d(t,{A:()=>n});let n='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="24" viewBox="0 0 32 24"><path fill="#000" fill-opacity=".9" fill-rule="evenodd" stroke="none" d="M26 1H2c-.552 0-1 .448-1 1v18c0 .552.448 1 1 1h24c.552 0 1-.448 1-1V2c0-.552-.448-1-1-1M2 0C.895 0 0 .895 0 2v18c0 1.105.895 2 2 2h24c1.105 0 2-.895 2-2V2c0-1.105-.895-2-2-2zm16.4 6.7-.8.6 2.775 3.7-2.775 3.7.8.6 3.225-4.3zm-9.8 0L5.375 11 8.6 15.3l.8-.6L6.625 11 9.4 7.3zm2.932 8.124 3-8 .936.352-3 8-.936-.351z"/></svg>'},757731:(e,t,l)=>{l.d(t,{A:()=>n});let n='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#fff" fill-opacity="1" fill-rule="evenodd" stroke="none" d="m12.433 20.565 2.652-2.652.707.707-2.652 2.652c-1.269 1.27-3.327 1.27-4.596 0-1.27-1.27-1.27-3.327 0-4.596l2.652-2.652.707.707-2.652 2.652c-.879.879-.879 2.303 0 3.182.879.878 2.304.878 3.182 0m6.187-4.773-.707-.707 2.652-2.652c.879-.879.879-2.303 0-3.182-.879-.879-2.303-.879-3.182 0l-2.652 2.652-.707-.707 2.652-2.652c1.269-1.27 3.327-1.27 4.596 0 1.27 1.27 1.27 3.327 0 4.596zm-5.45 1.62 4.242-4.242-.766-.766-4.242 4.242zm9.238 4.996v-3h1v3h3v1h-3v3h-1v-3h-3v-1z"/></svg>'},8369:(e,t,l)=>{l.d(t,{A:()=>n});let n='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="24" viewBox="0 0 32 24"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M26 1H2c-.552 0-1 .448-1 1v18c0 .552.448 1 1 1h24c.552 0 1-.448 1-1V2c0-.552-.448-1-1-1M2 0C.895 0 0 .895 0 2v18c0 1.105.895 2 2 2h24c1.105 0 2-.895 2-2V2c0-1.105-.895-2-2-2z"/><path fill="#000" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M1 7h26V6H1zm8-3c0 .552-.448 1-1 1-.552 0-1-.448-1-1 0-.552.448-1 1-1 .552 0 1 .448 1 1M5.5 4c0 .552-.448 1-1 1-.552 0-1-.448-1-1 0-.552.448-1 1-1 .552 0 1 .448 1 1"/></svg>'},740616:(e,t,l)=>{l.d(t,{A:()=>n});let n='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="#000" fill-opacity=".9" fill-rule="evenodd" d="M4.625 11h1.25l-2.25-3 2.25-3h-1.25L2.6 7.7l-.225.3.225.3zm4.036-6-2.4 6H7.34l2.4-6zm1.464 0 2.25 3-2.25 3h1.25L13.4 8.3l.225-.3-.225-.3L11.375 5z" clip-rule="evenodd"/></svg>'},639108:(e,t,l)=>{l.d(t,{A:()=>n});let n='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#fff" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M12 14h9v-1H11v5h1zm11 3h-8v4h8zM9 11v4H8v-5h9v1zm5 5v6h10v-6z"/></svg>'},454921:(e,t,l)=>{l.d(t,{A:()=>n});let n='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#fff" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M8.5 10c0-1.38 1.12-2.5 2.5-2.5h10c1.38 0 2.5 1.12 2.5 2.5v12c0 1.38-1.12 2.5-2.5 2.5H11c-1.38 0-2.5-1.12-2.5-2.5zM11 8.5c-.828 0-1.5.672-1.5 1.5v8.5h13V10c0-.828-.672-1.5-1.5-1.5zm11.5 11h-13V22c0 .828.672 1.5 1.5 1.5h10c.828 0 1.5-.672 1.5-1.5zM16 11.293l3.354 3.354-.707.707L16 12.707l-2.646 2.647-.707-.707z"/></svg>'},220638:(e,t,l)=>{l.d(t,{A:()=>n});let n='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#fff" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M8.5 10c0-1.38 1.12-2.5 2.5-2.5h10c1.38 0 2.5 1.12 2.5 2.5v12c0 1.38-1.12 2.5-2.5 2.5H11c-1.38 0-2.5-1.12-2.5-2.5zM11 8.5c-.828 0-1.5.672-1.5 1.5v8.5h13V10c0-.828-.672-1.5-1.5-1.5zm11.5 11h-13V22c0 .828.672 1.5 1.5 1.5h10c.828 0 1.5-.672 1.5-1.5zM16 15.707l-3.354-3.354.707-.707L16 14.293l2.646-2.647.707.707z"/></svg>'},25098:(e,t,l)=>{l.r(t),l.d(t,{DesignView:()=>oG});var n=l(848318),r=l(301168),a=l(860676),i=l(186606),o=l(19180),s=l(480540),d=l(146968),u=l(967688),c=l(952039),m=l(320006),p=l(413927),g=l(768618),E=l(382902),f=l(989232),x=l(63163),b=l(615233),y=l(178806),h=l(740495),_=l(957872),v=l(34375),k=l(34542),S=l(338104),R=l(15105),T=l(531288),I=l(601167),C=l(263336),w=l(556049),L=l(593713),A=l(67391),N=l(136169),O=l(555637),$=l(722541);let M=(0,b.ck)("bfb358109ac5994e69048d8390d3a0c334253aa8");function B({changedNodeId:e,nodeHeight:t,complete:l}){return(0,x.h)(()=>{i.Egt?.replaceSelection([e],!0)}),n.createElement(L.NJ,{arrowPosition:w.F_.LEFT_TITLE,backgroundColor:"var(--color-bg)",className:$.R3,closeButtonClassName:$.b,dismissModal:l,hideIfArrowPositionDoesNotMatch:!0,hideIfTargetLost:!0,isCanvasNode:!0,leftOffset:12,noAnimation:!0,shouldNotWrapInParagraphTag:!0,targetKey:e,topOffset:t?-t/2-15:0,width:240},n.createElement("div",{className:$.Rg},(0,u.t)("dev_handoff.rfd_signals_upsell.title")),n.createElement("div",{className:$.O6},n.createElement("div",{className:$.j},n.createElement(A.GV,{src:M,width:240})),n.createElement("div",{className:$.zu},(0,u.t)("dev_handoff.rfd_signals_upsell.description"))),n.createElement("div",{className:$.JP},n.createElement(p.v,{mode:"dev-handoff"},n.createElement(y.$z,{trackingProperties:{trackingDescriptor:_.c.MARK_READY_FOR_DEV},variant:"primary",onClick:function(){e&&(l(),S.z4.setNodesReady(!0,[e],"dev-node-change-upsell",null))}},(0,u.t)("dev_handoff.rfd_signals_upsell.mark_ready_for_dev")))))}function z(e){f.definedAnalyticsHandler.trackDefinedEvent("activation.rfd_signal_upsell.disqualification_reason",{reason:e,upsellSubject:"frame"})}function V(){let[e,t]=n.useState(null),[l,r]=n.useState(null),a=(0,I._X)({subscribeToUpdates_expensive:!0}),i=(0,E.Xr)(O.hj),o=(0,E.Xr)(O.d1),s=(0,E.md)(O.Sp),d=(0,E.Xr)(O.Sp),u=n.useRef(null),c=(0,R.Z)("dev-handoff-rfd-signals-frame-upsell"),[m,p]=n.useState(!1),f=n.useCallback(()=>{u.current&&r(u.current.absoluteBounds.height*a.zoomScale)},[a.zoomScale]);n.useEffect(()=>{if(!e)return;let t=`dev-node-change-upsell-${e}`,l=(0,T.EE)(t,[e],e=>{u.current=e.position,f()});return u.current=l.currentNodePosition[e]?.position||null,f(),()=>{(0,T.lB)(t)}},[e,f]);let x=(0,h.cR)(),{show:b,complete:y,uniqueId:_,isShowing:S}=(0,k.e)({overlay:N.kBA,priority:C.N.HIGH_PRIORITY_MODAL,experiment:{check:x,predicate:e=>e,postCheck:()=>!0}});return(n.useEffect(()=>{o({fn:y})},[y,o]),(0,v.E)(_,["frame_node_name_changed_with_rfd_indicator"],e=>{if(!e.properties.nodeId){z("no_node_id");return}let l=(0,g.UN)().get(e.properties.nodeId);if(!l){z("node_not_found");return}if(0===l.childCount){z("no_children");return}if(!l.canHaveStatus){z("not_eligible_for_status");return}if(s){z("already_seen_upsell_this_session");return}t(e.properties.nodeId),i(e.properties.nodeId),r(l.absoluteBoundingBox.h),b({onShow:async()=>{p(!0),await c(await (0,I.QZ)({nodeId:e.properties.nodeId,alwaysPan:!0}),{alwaysNavToSimilarViewport:!0}),p(!1),d(!0)}})}),e&&l&&S&&!m)?n.createElement(B,{changedNodeId:e,nodeHeight:l,complete:y}):null}var P=l(301360),F=l(45137),D=l(972402),G=l(387429),H=l(539829),U=l(709292),j=l(834822),q=l(45937),W=l(481651),X=l(370715),K=l(253066);let Y=(0,E.eU)(!1);function Q(){let e=(0,E.md)(H.LZ),t=(0,D._I)(),l=(0,D.U4)(),a=(0,G.J)(),i=(0,K.U)("upsell"),o=(0,E.Xr)(Y),{show:s,complete:d,exportId:c,activeId:m,showing:p}=function(){let e=(0,E.md)(U.NT),t=(0,h.lS)(),{show:l,complete:n,isShowing:r,uniqueId:a}=(0,k.e)({overlay:N.Nh9,priority:C.N.DEFAULT_MODAL,experiment:{check:t,predicate:e=>e,postCheck:()=>!0}},[e]),{show:i,complete:o,isShowing:s,uniqueId:d}=(0,k.e)({overlay:N.L6E,priority:C.N.DEFAULT_MODAL,experiment:{check:t,predicate:e=>e,postCheck:()=>!0}},[e]);return{show:e=>"export"===e?i:l,complete:()=>r?n():o(),measureId:a,exportId:d,activeId:s?a:d,showing:s?"export":r?"measure":void 0}}();!function(e,t){let l=n.useRef(t);n.useEffect(()=>{l.current=t},[t]);let a=(0,r.d4)(e=>e.usedKeyboardShortcuts["measure-to-selection"]||0),i=n.useRef(a);n.useEffect(()=>{let e=t=>{t.key&&(window.removeEventListener("keyup",e),l.current("measure"))};a>i.current&&window.addEventListener("keyup",e)},[a]),(0,v.E)(e,"copy_as_completed",e=>{t("export")}),(0,v.E)(e,"export_completed",e=>{t("export")})}(c,n=>{s(n)({canShow:n=>!t&&l&&a&&e&&"developer"===(0,F.HB)(n),onShow:()=>{(0,j.o9)()}})}),(0,v.E)(m,"Enter Inspect Mode",()=>{p&&d()});let g="export"===p?(0,u.tx)("upsell.dev_mode.contextual_overlay.export_title"):(0,u.tx)("upsell.dev_mode.contextual_overlay.measure_title"),f="export"===p?(0,u.tx)("upsell.dev_mode.contextual_overlay.export_description"):(0,u.tx)("upsell.dev_mode.contextual_overlay.measure_description");return n.createElement(W.X,{description:f,forceEditorTheme:"dev-handoff",isShowing:!!p,media:n.createElement(q.y,{src:"export"===p?(0,b.ck)("2ec45ec3c5b501ef6e755fde6a2edfb39d2218cb"):(0,b.ck)("dc592aac8a3238672f1f3eb8711f656496538b15"),alt:"",aspectRatio:480/270}),onClose:d,position:X.Q.BOTTOM_RIGHT,primaryCta:{label:(0,u.tx)("upsell.dev_mode.contextual_overlay.cta"),onClick:()=>{i("handoff"),o(!0),d()},ctaTrackingDescriptor:_.c.OPEN_DEV_MODE,type:"button"},testId:"dev-mode-contextual-upsell-tooltip",title:g,trackingContextName:"Dev Mode Contextual Upsell Tooltip",width:240})}var J=l(836402),Z=l(162796),ee=l(309488),et=l(93275),el=l(875900),en=l(952647),er=l(82433),ea=l(918777),ei=l(238462),eo=l(297638),es=l(610338),ed=l(792830),eu=l(740705),ec=l(978877),em=l(506428);let ep={container:{borderRadius:"x1mxnbhz",boxShadow:"x1wu5q8a",$$css:!0},backgroundLight:{background:"xnyijpa",$$css:!0},backgroundDark:{background:"xgnke1b",$$css:!0}};function eg(e){let t=(0,em.DP)(),[l,r]=(0,n.useState)(0);return(0,x.h)(()=>{let t=setInterval(()=>{r(t=>(t+1)%e.steps.length)},4500);return()=>clearInterval(t)}),n.createElement("div",{...er.xk("dark"===t?ep.backgroundDark:ep.backgroundLight,ep.container)},n.createElement(eu.N,{mode:"popLayout"},n.createElement(ec.P.div,{key:l,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},e.steps[l])))}var eE=l(782073),ef=l(863270),ex=l(497845);let eb={container:{display:"x78zum5",flexDirection:"x1q0g3np",justifyContent:"xl56j7k",alignItems:"x6s0dn4",minHeight:"x1wxaq2x",padding:"xtdwleo",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,borderRadius:"x1mxnbhz",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,boxShadow:"x1wu5q8a",$$css:!0},backgroundLight:{background:"xnyijpa",backgroundAttachment:null,backgroundClip:null,backgroundColor:null,backgroundImage:null,backgroundOrigin:null,backgroundPosition:null,backgroundPositionX:null,backgroundPositionY:null,backgroundRepeat:null,backgroundSize:null,$$css:!0},backgroundDark:{background:"xgnke1b",backgroundAttachment:null,backgroundClip:null,backgroundColor:null,backgroundImage:null,backgroundOrigin:null,backgroundPosition:null,backgroundPositionX:null,backgroundPositionY:null,backgroundRepeat:null,backgroundSize:null,$$css:!0},userName:{overflow:"xb3r6kr",overflowX:null,overflowY:null,textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",maxWidth:"x16q51m2",marginRight:"xl010v5",marginInlineStart:null,marginInlineEnd:null,$$css:!0},devHandoffIcon:{backgroundColor:"x1xtplfa",margin:"x960i20",marginInline:null,marginInlineStart:null,marginLeft:null,marginInlineEnd:null,marginRight:null,marginBlock:null,marginTop:null,marginBottom:null,borderRadius:"x192jxwq",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},textBodyMediumStrong:{...eE.g.textBodyMediumStrong,$$css:!0},bannerContent:{display:"x78zum5",flexDirection:"x1q0g3np",justifyContent:"xl56j7k",alignItems:"x6s0dn4",padding:"xtdwleo",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,minHeight:"x1wxaq2x",$$css:!0}};function ey(e){let t=e.isAnimated?{initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{duration:.5,delay:.5}},exit:{opacity:0,y:-10,transition:{duration:.5}}}:void 0;return(0,u.tx)("dev_handoff.upsell.user_marked_a design",{userName:n.createElement(ex.A,{styles:eb.userName},e.statusUser.user?.name||e.statusUser.user?.handle),status:n.createElement(n.Fragment,null,n.createElement(ex.A,{isAnimated:e.isAnimated,styles:eb.devHandoffIcon,motionProps:t},n.createElement(el.O,{style:{"--color-icon":"var(--color-icon-onbrand)"}})),n.createElement(ex.A,{isAnimated:e.isAnimated,styles:eb.textBodyMediumStrong,motionProps:t},(0,u.tx)("dev_handoff.status.mark_status_sentence_part.ready_for_dev")))})}function eh(e){let t=(0,ed.W)();return e.statusUser.loading?null:n.createElement(ef.fu,{name:"Marked File Ready for Dev Animated Banner",properties:t},n.createElement(ex.L,{isAnimated:!0,styles:eb.bannerContent},n.createElement(ey,{...e,isAnimated:!0})))}function e_(e){let t=(0,ed.W)(),l=(0,em.DP)();return e.statusUser.loading?null:n.createElement(ef.fu,{name:"Marked File Ready for Dev Banner",properties:t},n.createElement(ex.L,{styles:[eb.container,"dark"===l?eb.backgroundDark:eb.backgroundLight]},n.createElement(ey,{...e})))}var ev=l(541670),ek=l(437316),eS=l(534133),eR=l(959165),eT=l(877146),eI=l(355755),eC=l(636524),ew=l(506794),eL=l(371829);function eA(){let e=(0,h.o9)(),t=(0,eS.w_)(),l=(0,eI.aV)(),[r,a]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(!l){let e=function(){let e;let t=(0,g.UN)(),l=t=>{if(t)for(let n of t.childrenNodes)(n.isTopLevelFrame()||"CANVAS"===n.type)&&(n.hasReadyStatus?e?e.getStatusInfo().lastUpdateUnixTimestamp<n.getStatusInfo().lastUpdateUnixTimestamp&&(e=n):e=n:("SECTION"===n.type||"CANVAS"===n.type)&&l(n))};return l(t?.getRoot()),e?.getStatusInfo()}();e&&a(e)}},[l]);let i=(0,eC.wW)(r&&"userId"in r?r.userId:null),o=!!r&&ea.A.unix(r.lastUpdateUnixTimestamp).isAfter((0,ea.A)().subtract(60,"day")),s=(0,K.U)("upsell"),d=(0,E.md)(H.LZ),c=(0,D._I)(),m=(0,D.U4)(),p=(0,E.md)(U.NT),f=(0,G.J)(),{show:x,complete:b,isShowing:y,uniqueId:_}=(0,k.e)({overlay:N.koo,priority:C.N.OVERRIDING_MODAL},[p]);(0,n.useEffect)(()=>{x({canShow:n=>f&&d&&!c&&!t.loading&&!t.hasPendingRequest&&o&&m&&!l&&("developer"===n||"software-development"===n||e(n)),onShow:()=>{(0,j.o9)()}})},[x,c,m,d,l,p,f,t,o,e]),(0,v.E)(_,"Enter Inspect Mode",()=>{y&&b()});let{primaryButtonProps:S,secondaryButtonProps:R}=(0,eS.BC)({entryPoint:eT.i$.Upsell,dismissModal:b,onRequestAccess:()=>{s("handoff")}}),T=n.createElement(n.Fragment,null,n.createElement("span",{className:eL.XQ},n.createElement(el.O,null)),n.createElement("span",{className:eo.s.textBodyMediumStrong.$},(0,u.tx)("dev_handoff.status.mark_status_sentence_part.ready_for_dev"))),I=(0,h.n6)(),w=y&&I(),{imgSrc:L,modalContent:A}=(0,ev._)({showUpdatedPaywall:w}),O=(0,ed.W)(),$=Z.hS({open:!0,onClose:ei.lQ,preventUserClose:!0,recordingKey:"dev-mode-paywall-modal"}),M=(0,h.uf)(),B=y&&M();return n.createElement(ew.M,{testId:"rfd-upsell-upsell",isShowing:y},n.createElement(en.J,{brand:"dev-handoff"},n.createElement(es.OM,null),n.createElement(ef.fu,{name:"RFD Upsell Modal",properties:{...O,primaryCtaTrackingDescriptor:S?.trackingDescriptor,secondaryCtaTrackingDescriptor:R?.trackingDescriptor},enabled:O?.gracePeriod!==void 0},n.createElement(ee.bL,{width:392,manager:$},n.createElement(et.Wk,null,"control"===B&&n.createElement("div",{className:eL.XV},n.createElement("div",{className:"xh8yej3 xysyzu8 x1xk1jr8 x1sdyfia"},i.loading?"":(0,u.tx)("dev_handoff.upsell.user_marked_a design",{userName:n.createElement("span",{className:"xb3r6kr xlyipyv xuxw1ft"},i.user?.name||i.user?.handle),status:T}))),n.createElement("div",{className:eo.s.py8.px16.$},n.createElement(ek.E,{imgSrc:L,content:A,modalType:"RFD Upsell Modal",primaryButtonProps:{...S,type:"request_access"},secondaryButtonProps:R?{...R,type:"not_now"}:void 0}))),"rfd_banner_only"===B&&n.createElement(et.vo,{className:"x1xmf6yo xh8yej3"},n.createElement(et.nB,{padding:0},n.createElement(e_,{statusUser:i}))),"banner_carousel"===B&&n.createElement(et.vo,{className:"x1xmf6yo xh8yej3"},n.createElement(et.nB,{padding:0,scrolling:"none"},n.createElement(eg,{steps:[n.createElement(eh,{statusUser:i,key:"rfd-banner"}),n.createElement(eR.G,{isAnimated:!0,key:"social-proof"})]})))))))}var eN=l(410725),eO=l(361964),e$=l(961675),eM=l(730143),eB=l(55116),ez=l(43258),eV=l(391301),eP=l(175393),eF=l(226455);function eD(){let e=(0,eO.X0)(),t=(0,eM.tS)(),l=(0,K.U)("upsell"),r=(0,eN.Rs)(eB.ErZ,{key:t||""},{enabled:!!t}),{show:a,isShowing:i,complete:o,uniqueId:s}=(0,k.e)({overlay:N.wRw,priority:C.N.OVERRIDING_MODAL-1},[r]);(0,v.E)(s,"ui3_finished_entering_design_mode",()=>{(0,e$.QL)("rfd-notif")&&a({canShow:e=>!e.file?.hasPermission,onShow:()=>{(0,j.o9)()}})});let d=e?{targetKey:ez.o5,arrowPosition:eP.F_.LEFT_TITLE}:{targetKey:eF.oR,arrowPosition:eP.F_.BOTTOM};return n.createElement(eV.rq,{...d,description:(0,u.tx)("upsell.view_only_developer_notifications.tooltip_description"),forceEditorTheme:"dev-handoff",isShowing:i,media:n.createElement(q.y,{src:(0,b.ck)("dc592aac8a3238672f1f3eb8711f656496538b15"),alt:"",aspectRatio:480/270}),onClose:o,testId:"viewer-dev-mode-status-changed-tooltip",primaryCta:{ctaTrackingDescriptor:_.c.TRY_DEV_MODE,label:(0,u.tx)("upsell.view_only_developer_notifications.tooltip_cta"),onClick:()=>{o(),l("handoff")},type:"button"},title:(0,u.tx)("upsell.view_only_developer_notifications.tooltip_title"),trackingContextName:"viewer_dev_mode_status_changed_tooltip"})}var eG=l(363367),eH=l(813147),eU=l(643841),ej=l(959750),eq=l(702038),eW=l(14837),eX=l(7148),eK=l(413238),eY=l(258539),eQ=l(554326),eJ=l(810807),eZ=l(661289),e0=l(870545),e1=l(360912),e2=l(837988),e5=l(637640),e3=l(972382),e4=l(633468),e8=l(318147),e6=l(138528),e7=l(230618),e9=l(642775);function te({onClick:e,complete:t}){return n.createElement(p.v,{mode:"dev-handoff"},n.createElement("div",{"data-testid":"dev-mode-demo-file-entrypoint-popup",className:"x6sy6il x1dgp85l xqyf9gi x1mxnbhz x1xtplfa x10l6tqk xrv6xtj x9f619 x1p3pnes x1tk3asg x78zum5 xdt5ytf x1dipnxa xbj06nx xl56j7k x1i71x30"},n.createElement("div",{className:"x10l6tqk x1psp13h xbyvkye"},n.createElement(e9.Jn,{emphasized:!0,onClick:t})),n.createElement("div",null,n.createElement("div",{className:"x13saxwh xg4jxnz x1h94l6n x1uvdjgy x39l7i4 x1ihwiht"},(0,u.tx)("dev_mode_playground_file.still_curious_about_dev_mode")),n.createElement("div",null,(0,u.tx)("dev_mode_demo_file.check_out_our_interactive_test"))),n.createElement(y.e6,{trackingProperties:{trackingDescriptor:_.c.DEMO_FILE_THUMBNAIL},onClick:e,className:"x11g6tue xzjbwwf x3w9dv2"},n.createElement(e7.oW,{className:"xb3r6kr",alt:"A graphic showing the demo file thumbnail",src:(0,b.ck)("eab479b46c1a94910464200211143d64fe917ae1")})),n.createElement("div",null,n.createElement(y.e6,{trackingProperties:{trackingDescriptor:_.c.CHECK_IT_OUT},onClick:e,className:"x1iakgj3 x19y5rnk x78zum5 xx99whi xl56j7k x6s0dn4 x4wtjwi x11g6tue x1qxcl5b x1tk3asg"},(0,u.tx)("dev_mode_playground_file.check_it_out")))))}function tt(){let e=(0,e6.No)().unwrapOr(null),t=e?.tier===e8.Ag.STARTER,l=(0,D._I)(),r=(0,D.U4)(),a=(0,e3.w)(),i=(0,E.md)(es.YU),o=(0,eS.w_)(),s=(0,b.tl)().dev_mode_demo_file_key,{isShowing:d,show:u,complete:c}=(0,k.e)({overlay:N.E5y,priority:C.N.DEFAULT_MODAL});return(n.useEffect(()=>{u({canShow:()=>!!(!o.loading&&!o.hasPendingRequest&&r&&!l&&i&&"developer"===a&&!t&&s)})},[l,r,s,o,d,a,i,t,u]),d)?n.createElement(ew.M,{isShowing:d},n.createElement(ef.fu,{name:"DevModeDemoFileEntryPoint"},n.createElement(te,{onClick:()=>{s&&e5.Ay.redirect((0,e4.jN)({file:{key:s},isDevHandoff:!0}),"_blank"),c()},complete:c}))):null}var tl=l(659654),tn=l(533737),tr=l(696786),ta=l(517776),ti=l(887836),to=l(859480),ts=l(125761),td=l(752181),tu=l(543177),tc=l(614092),tm=l(658029),tp=l(124810),tg=l(536384),tE=l.n(tg),tf=l(329228),tx=l(50429),tb=l(66699),ty=l(27382),th=l(566841),t_=l(686464),tv=l(152545),tk=l(378662),tS=l(228845),tR=l(477810),tT=l(546021),tI=l(707790),tC=l(923659);let tw="starting_points_templates_modal--templateOption--qYXkm",tL="starting_points_templates_modal--templateOptionTitle--DmVPR",tA="starting_points_templates_modal--verticalTemplateImage--kAzQz";var tN=(e=>(e.DESKTOP="desktop",e.MOBILE="mobile",e.WEBSITE="website",e))(tN||{});let tO={x:0,y:0},t$={website:{x:0,y:1600},mobile:{x:0,y:300},desktop:{x:0,y:300}},tM={website:.1,mobile:.225,desktop:.1};function tB({onClose:e}){let t=(0,r.wA)(),l=n.useRef(null),[a,s]=n.useState(!1),[d,c]=n.useState(!1),[m,p]=n.useState(!1),[g,y]=n.useState(!1),[h,v]=n.useState(window.innerWidth),[k,S]=n.useState({website:"",mobile:"",desktop:""}),R=(0,t_.q)(),T=(0,eM.tS)(),I=(0,r.d4)(e=>e.fileVersion),C=(0,r.d4)(e=>e.mirror.sceneGraph),w=R&&(0,tT.Qf)(C),L=!!w&&0===w.childCount,[A]=(0,tf.IT)((0,ty.Dz)({})),{inProductHelpViewType:N}=(0,tk.A5)(),O=(0,eQ.ut)(i.Ez5?.uiState().inProductHelpSidePanelWidth,0),$="side_panel"===N?O:0,{insertTemplate:M}=(0,th.Fz)(),B=(0,tI.g)(),z=(0,E.Xr)(tC.Yq),V=(0,E.Xr)(tC.bj),[P,F]=n.useState(!1),D=(0,tS.GQ)(),G=(0,tR.P)();(0,x.h)(()=>{let e=()=>{v(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),n.useEffect(()=>{y(D+50>h/2-257||h-G-$-50<h/2+257),p(D+50>h/2-365||h-G-$-50<h/2+365)},[$,D,G,h]);let H=n.useCallback(()=>{if("loaded"!==A.status||!A.data)return;let e=[];for(let t of Object.values(tN)){let l=A.data[t]?.files;if(!l)return;let n={type:tv.n.HubFile,template:l};e.push(n)}Promise.all(e.map(e=>E.zl.get((0,tC.Re)({fileKey:T,fileVersion:I,template:e})))).then(()=>{F(!0)}).catch(e=>{console.error("Failed to load template buffers",e),F(!0)})},[T,I,A]);if(n.useEffect(()=>{if("loaded"===A.status)for(let e of Object.values(tN)){let t=A.data[e]?.preview_img_id;t&&S(l=>({...l,[e]:t}))}},[A]),n.useEffect(()=>{"loaded"!==A.status||P||H()},[A,P,H]),n.useEffect(()=>{R&&w&&!L&&!d&&e()},[R,w,L,d,e]),!(0,o.k)().starting_points_modal)return null;let U=async l=>{if("loaded"!==A.status)return;s(!0);let n=A.data[l]?.files;n&&("basics"!==l?await (0,th.Zg)({insert:()=>V({selectTemplateAfterCommit:!1,moveViewportAfterCommit:!1,priority:"user-visible",editScopeType:i.zkO.USER}),template:{template:n,type:tv.n.HubFile},fileKey:T,dispatch:t,triggeredFrom:"starting-points",userTriggered:!1}):await M({template:{template:n,type:tv.n.HubFile},userTriggered:!1,editScopeType:i.zkO.ONBOARDING,triggeredFrom:"starting-points",templateInsertionDirection:i.hKj.RIGHT}),"basics"===l?(0,tb.YQ)({id:"starting_points_basics_template_inserted"}):(0,tb.YQ)({id:"starting_points_template_inserted"}),e(),s(!1))},j=n.createElement(ef.$z,{onClick:()=>U("basics"),trackingProperties:{trackingDescriptor:_.c.LEARN_THE_BASICS}},(0,u.tx)("starting_points.learn_the_basics")),q=e=>{if((0,f.trackEvent)("Starting Points Template Option Hover",{template:e}),!A.data)return;let l=A.data[e]?.files;if(!l)return;let n={type:tv.n.HubFile,template:l},r=tM[e];window.innerWidth>1700&&(r*=1.5),(0,th.Zg)({insert:()=>B(n,{moveViewportAfterPreview:!0,priority:"user-visible",previewManager:{nodeType:i.Z6A.CANVAS},position:tO,viewportOptions:{position:t$[e],scale:r,duration:0}}),template:n,fileKey:T,dispatch:t,triggeredFrom:"starting-points",userTriggered:!1,isPreview:!0})};return n.createElement(ef.fu,{name:"Starting Points Modal"},n.createElement("div",{className:"starting_points_templates_modal--startingPointsTemplatesModalPositioner--R8g3u",style:{marginRight:`${$}px`}},n.createElement(tx.x,{isLoading:a,className:"starting_points_templates_modal--loadingSpinner--UOrjg"},()=>n.createElement("div",{className:tE()({"starting_points_templates_modal--startingPointsTemplatesModal--dUQte":!0,"starting_points_templates_modal--isHidden--jVN1L":g,"starting_points_templates_modal--isCondensedView--3tVz6":m}),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),ref:l},n.createElement("div",{className:"starting_points_templates_modal--modalInstructions--ZtdTL"},n.createElement("div",{className:"starting_points_templates_modal--modalTitle--HT3eZ"},(0,u.t)("starting_points.what_do_you_want_to_make_today")),n.createElement("div",{className:"starting_points_templates_modal--modalLearnMore--g-GWo"},(0,u.tx)("starting_points.or_learn_the_basics",{learnTheBasicsLink:j}))),n.createElement("div",{className:"starting_points_templates_modal--optionContainer--mYEsG"},n.createElement(ef.$z,{className:tw,onClick:()=>U("website"),onMouseEnter:()=>q("website"),onMouseLeave:z,trackingProperties:{trackingDescriptor:_.c.WEBSITE_TEMPLATES}},n.createElement("div",{className:tL},(0,u.t)("starting_points.website")),n.createElement(e7.oW,{className:tA,src:(0,b.ck)(k.website),alt:"Website template"})),n.createElement(ef.$z,{className:tw,onClick:()=>U("mobile"),onMouseEnter:()=>q("mobile"),onMouseLeave:z,trackingProperties:{trackingDescriptor:_.c.MOBILE_APP_TEMPLATES}},n.createElement("div",{className:tL},(0,u.t)("starting_points.mobile_app")),n.createElement(e7.oW,{className:tA,src:(0,b.ck)(k.mobile),alt:"Mobile app template"})),n.createElement(ef.$z,{className:tw,onClick:()=>U("desktop"),onMouseEnter:()=>q("desktop"),onMouseLeave:z,trackingProperties:{trackingDescriptor:_.c.DESKTOP_APP_TEMPLATES}},n.createElement("div",{className:tL},(0,u.t)("starting_points.desktop_app")),n.createElement(e7.oW,{className:"starting_points_templates_modal--desktopTemplateImage--3kplg",src:(0,b.ck)(k.desktop),alt:"Desktop app template"}))),n.createElement("div",{className:"starting_points_templates_modal--modalLearnMoreFooter--pSvfX"},(0,u.tx)("starting_points.or_learn_the_basics",{learnTheBasicsLink:j})),n.createElement("div",{className:"starting_points_templates_modal--closeButton--io-14"},n.createElement(tm.K,{onClick:e,"aria-label":(0,u.t)("general.close"),htmlAttributes:{"data-testid":"close-button"}},n.createElement(tp.A,null)))))))}let tz=(0,ta.r1)("dismissed_starting_points_templates_modal");function tV(){let e=(0,r.wA)(),t=!!(0,o.k)().starting_points_modal,l=(0,e$.QL)(eF.E_.key)===eF.E_.value,a=(0,eI.aV)(),i=(0,r.d4)(e=>e.mirror.appModel.currentPage),s=(0,tc.Fk)((e,t)=>(0,to.zC)(e,t),i),d=(0,e$.QL)(tu.pt.KEY)===tu.pt.VALUE,u=(0,eM.q5)(),c=(0,ts.TA)(),m=u?.creatorId===c,p=(0,E.md)(U.Fy),g=(0,E.md)(ti.UQ),f=!(0,td.f)("not_gen_0"),x=(0,tr.GS)(),y=(0,E.md)(tz),h=(0,b.Ay)().starting_points,{show:_,isShowing:v,complete:S}=(0,k.e)({overlay:N.EYw,priority:C.N.OVERRIDING_MODAL+1},[p,y]);return(n.useEffect(()=>{t&&m&&!d&&!a&&s&&!v&&(l?_():f&&g&&x&&h&&_({canShow:(e,t)=>!e&&!t}))},[t,m,a,s,v,l,f,g,x,d,h,y,_]),v)?n.createElement(tB,{onClose:()=>{y.data||e(tn.b({dismissed_starting_points_templates_modal:!0})),S()}}):null}var tP=l(118287),tF=l(244534),tD=l(265098),tG=l(526594),tH=l(295156),tU=l(161245),tj=l(437973),tq=l(257264);let tW=(0,tq.Op)({initial:"ready_to_show",states:[{id:"ready_to_show",transitions:[(0,tq.nr)("curator_content_shown","ui3_onboarding_was_shown_in_current_session",{condition:({event:e})=>e.properties.shown===N.KTt.id})]},{id:"ui3_onboarding_was_shown_in_current_session",terminal:!0}]}),tX=(0,tq.rn)("track_ui3_onboarding_shown",tW);var tK=l(876326);function tY(){let{isShowing:e,complete:t,show:l,uniqueId:a}=(0,k.e)({overlay:N.l_p,priority:C.N.SECONDARY_MODAL}),o=(0,r.wA)(),s=(0,eI.aV)(),d=(0,eM.q5)(),c=(0,ts.iZ)(),m=(0,tP.te)(),p=!!(0,td.f)(tU.bo),g="ui3_onboarding_was_shown_in_current_session"===(0,tD.zl)(tX).currentState,f="no_figma_basics_onboarding_was_shown_in_current_session"===(0,tD.zl)(tj.j).currentState,x=(0,E.md)(tH.dL),b=(0,tG.jO)(),y=d?.canEdit,h=(0,r.d4)(e=>e.leftPanel.activeTab===i.xae.LAYERS);if((0,v.E)(a,["Reset Visual Assets Tooltips",tU.io],()=>{c&&d&&o(tn.b(tK.g))}),(0,n.useEffect)(()=>{!m()||!y||x||p||g||f||!b||s||!h||e||l()},[l,m,y,p,b,s,g,f,e,x,h]),(0,n.useEffect)(()=>{!h&&e&&t()},[h,e,t]),!e)return null;let S=n.createElement("strong",{style:{display:"contents"}},(0,u.tx)("design_systems.assets_panel.assets"));return n.createElement(W.X,{isShowing:e,title:(0,u.tx)("rcs.visual_assets.elevate_your_designs"),description:(0,u.tx)("rcs.visual_assets.grab_visual_assets",{strongAssets:S}),primaryCta:{label:(0,u.tx)("rcs.presets_baseline.try_it"),type:"button",onClick:()=>{o(tF.FP({tab:i.xae.ASSETS})),t()},ctaTrackingDescriptor:_.c.PRESETS_TRY_IT},trackingContextName:"Visual Assets Intro Tooltip",userFlagOnShow:tU.bo,position:X.Q.UI3_EDITOR_TOP_LEFT,onClose:t})}var tQ=l(374912),tJ=l(763716),tZ=l(511067),t0=l(971845),t1=l(689329),t2=l(286803),t5=l(566090),t3=l(23373);let t4=new Date("2025-03-05");function t8(){let e=(0,E.md)(U.mp),t=(0,eI.p8)("isReadOnly"),l=(0,eI.aV)(),r=(0,D._I)(),a=(0,tr.GS)(),{uniqueId:i,show:o,isShowing:s,complete:d}=(0,k.e)({overlay:N.k2l,priority:C.N.SECONDARY_MODAL},[e]),c=(0,n.useCallback)(()=>{l||t||!r||o({canShow:e=>e.getTime()<=t4.getTime()&&function(e){let t=Date.now();return e.getTime()<=t-12096e5}(e)})},[l,o,t,r]),m=(0,tZ.Um)(),p=m?.type===(0,t2.Tm)(t5.tD.name),g=m?.type===(0,tJ.mb)(t0.M.CommentTools);return(0,n.useEffect)(()=>{a||c()},[c,a]),(0,n.useEffect)(()=>{(p||g)&&d()},[p,g,d]),(0,v.E)(i,(0,t1.wX)("design"),()=>{c()}),n.createElement(eV.rq,{arrowPosition:eP.F_.BOTTOM,clickOutsideToHide:!0,description:(0,u.tx)("dev_handoff.annotations.tool_in_editor_onboarding.body"),isShowing:s,media:n.createElement(q.y,{src:(0,b.ck)("f93933f2cfd98d5f79223a25cab05b4ffacb0ec7"),alt:(0,u.t)("dev_handoff.annotations.tool_in_editor_onboarding.image_alt"),aspectRatio:1200/675}),onClose:d,primaryCta:{type:"button",label:(0,u.tx)("dev_handoff.annotations.tool_in_editor_onboarding.primary_cta_label"),onClick:d,ctaTrackingDescriptor:_.c.GOT_IT},targetKey:a?t3.G:t5.tD.name,title:(0,u.tx)("dev_handoff.annotations.tool_in_editor_onboarding.title"),trackingContextName:"Annotation Tools In Editor Onboarding",width:240})}var t6=l(306152),t7=l(337161),t9=l(226601),le=l(894161),lt=l(251776),ll=l(79083),ln=l(227276),lr=l(438071),la=l(788903),li=l(483656),lo=l(612363),ls=l(815347);function ld(){let e=(0,E.md)(t9.u2)===ll.td.GROUPING_COMPLETE,{status:t}=(0,E.md)(t9.v4),l=["loaded","error"].includes(t);return!e||!l}var lu=l(531788),lc=l(128080),lm=l.n(lc),lp=l(781239),lg=l(540698),lE=l(535884),lf=l(215039),lx=l(622518),lb=l(788502),ly=l(773511),lh=l(869143),l_=l(805353),lv=l.n(l_),lk=l(561258),lS=l(130768),lR=l(906419),lT=l(368112),lI=l(182317),lC=l(4881),lw=l(277454),lL=l(436999),lA=l(127711),lN=l(342878),lO=l(439796);let l$=(0,lC.Wh)(()=>(0,E.eU)(null)),lM=(0,lC.Wh)(()=>(0,E.eU)(e=>e(l$),(e,t,l)=>{t(l$,l)})),lB=(0,lC.Wh)(()=>(0,E.eU)(null)),lz=(0,lC.Wh)(()=>(0,E.eU)(null)),lV=(0,E.eU)(null),lP=(0,E.eU)(!1),lF=(0,E.eU)(null),lD=(0,E.Iz)(e=>(0,E.eU)(t=>{let{libraryVariables:l}=t(t9.v4),n=t(t9.qp)?t(lO.uk):[],{localVariableSets:r,libraryVariableSets:a}=t(t9.mn),o=t(lL.$p)??[],s={};n.forEach(t=>{"LOCAL"===t.subscriptionStatus&&t.resolvedType===e.type&&(s[t.node_id]=t)}),l.forEach(t=>{"LIBRARY"===t.subscriptionStatus&&t.resolvedType===e.type&&(s[t.node_id]=t)});let d={};o.forEach(e=>{d[e.libraryKey]=e.name});let u=Object.values(s).filter(t=>t.resolvedType===e.type).filter(t=>{let l=t.scopes.some(t=>e.scopes.includes(t)||t===i.j0r.ALL_SCOPES),n=0===t.scopes.length;return l||n});return{allVariableListItems:(0,lT.dC)({variables:u,variableSets:[...Object.values(r),...Object.values(a)],styles:[],componentProps:[],layout:"list",fileNamesByLibraryKey:d,openFileLibraryKey:t(eM._S),collapsedLibraryKeys:new Set,slideThemeId:null}).reduce((e,t)=>{switch(t.type){case lT.Yc.VARIABLES:let l=t.items[0],n=t.variableSet;l&&n&&e.push({id:l.node_id,variable:l,type:"LIST",variableSet:n,isSuggestion:!1});break;case lT.Yc.SEPARATOR:e.push({id:(0,lI.g)(),type:"LIST_SEPARATOR"});break;case lT.Yc.FILE_NAME:e.push({id:(0,lI.g)(),type:"LIST_SECTION_HEADER",name:t.name});break;case lT.Yc.SECTION_HEADER:e.push({id:(0,lI.g)(),type:"LIST_SECTION_HEADER",name:t.name,fileName:t.fileName,secondaryText:t.secondaryText});break;case lT.Yc.HIERARCHY_PATH:e.push({id:(0,lI.g)(),type:"LIST_HIERARCHY_PATH",label:t.name})}return e},[]),variableMap:s,localVariableSetIdToSet:r,libraryVariableSetIdToSet:a,localVariables:n,libraryVariables:l}}),(e,t)=>lm()(e.type,t.type)&&lm()(e.scopes,t.scopes)),lG=(0,E.eU)(e=>{let{subscribedStylesByFileKey:t,localStyles:l}=e(t9.jq),n=new lA.V(!0);if(l){let{sortedPrefixes:e,stylesByPrefix:t}=(0,lw.uJ)(l.styles);n.addLibraryStyleItemsToResult(e,t,l.fileKey,l.libraryKey)}for(let[e,l]of Object.entries(t)){let{sortedPrefixes:t,stylesByPrefix:r}=(0,lw.uJ)(l.styles);n.addLibraryStyleItemsToResult(t,r,e,l.libraryKey,l.fileName)}return function(e){let t=[];return{listItems:e.reduce((e,l)=>{switch(l.type){case lN.b.StylesRow:{let n=l.styles[0];if(!n)break;let{node_id:r}=n;e.push({id:r,type:"TEXT_STYLE_LIST",style:n,isSuggestion:!1}),t.push(n);break}case lN.b.Separator:e.push({id:(0,lI.g)(),type:"LIST_SEPARATOR"});break;case lN.b.LibraryName:e.push({id:(0,lI.g)(),type:"LIST_SECTION_HEADER",name:l.name});break;case lN.b.HierarchyPathName:e.push({id:(0,lI.g)(),type:"LIST_HIERARCHY_PATH",label:l.name})}return e},[]),allStyles:t}}(n.getResult())});var lH=l(176576);function lU({selectedFixes:e,cachedFixes:t,violatingNodeId:l,type:r,scopes:a}){let{allVariableListItems:i,variableMap:o,localVariableSetIdToSet:s,libraryVariableSetIdToSet:d,localVariables:c,libraryVariables:m}=(0,E.md)(lD({type:r,scopes:a})),p=(0,n.useMemo)(()=>l?(0,g.UN)().get(l):null,[l]),f=(0,n.useMemo)(()=>(function({cachedFixes:e,variableMap:t,localVariableSetIdToSet:l,libraryVariableSetIdToSet:n}){if(0===e.length)return[];let r=[];for(let{variableId:a}of e){let e=t[a];if(!e)continue;let i=e.variableSetId&&(l[e.variableSetId]??n[e.variableSetId]);i&&r.push({id:a,variable:e,type:"LIST",variableSet:i,isSuggestion:!0})}return r.length>0?[{id:(0,lI.g)(),type:"LIST_HIERARCHY_PATH",label:(0,u.t)("design_linter.preview.suggested")},...r,{id:(0,lI.g)(),type:"LIST_SEPARATOR"}]:r})({cachedFixes:t,variableMap:o,localVariableSetIdToSet:s,libraryVariableSetIdToSet:d}),[t,o,s,d]),x=(0,n.useMemo)(()=>{if(!p)return{localVariables:{},libraryVariables:{}};try{return(0,lH.TW)({node:p,resolvedType:r,localVariables:c,libraryVariableSetIdToSet:d,libraryVariables:m})}catch(e){return console.error("Failed to get resolved variables for node:",e),{localVariables:{},libraryVariables:{}}}},[p,r,c,d,m]);return(0,n.useMemo)(()=>{if(!p)return{fixes:e,listItems:f,allResolvedVariables:x,variableMap:o};let t=function({allVariableListItems:e,allResolvedVariables:t}){let l=e.filter(e=>"LIST"===e.type);if(0===l.length)return[];let n=[];for(let e of l){let{node_id:l}=e.variable,r=t.libraryVariables[l]?.resolvedValue??t.localVariables[l]?.resolvedValue;r&&n.push({variableId:l,resolvedValue:r})}return n}({allVariableListItems:i,allResolvedVariables:x});return{fixes:0===e.length?t:[...e,...t],listItems:0===f.length?i:[...f,...i],allResolvedVariables:x,variableMap:o}},[e,f,x,o,p,i])}let lj="16px";function lq(){let e=(0,E.Xr)(lF),t=(0,E.Xr)(lP),l=(0,E.Xr)(lM),r=(0,E.Xr)(lB),a=(0,E.Xr)(lz),i=(0,E.Xr)(lV);return(0,n.useMemo)(()=>lv()(()=>{e(null),t(!1),l(null),r(null),a(null),i(null)},100),[e,t,l,r,a,i])}function lW(){return(0,E.md)(lP)?n.createElement(lX,null):null}function lX(){let[e,t]=(0,n.useState)(""),[l,r]=(0,n.useState)(""),a=(0,E.md)(lF),i=(0,E.md)(lM)??{title:"",emptyLabel:"",display:"GRID",items:[]},o=lq(),s=a?.current?.getBoundingClientRect()??{x:0,y:0,width:0,height:0},d=(0,n.useMemo)(()=>({x:s.x+("LIST"===i.display?s.width:0),y:s.y+("GRID"===i.display?s.height:0)}),[s.y,s.x,s.height,s.width,i.display]),c=(0,n.useMemo)(()=>lv()(e=>{r(e)},150),[]);(0,n.useEffect)(()=>(c(e),()=>{c.cancel()}),[c,e]);let m=(0,u.t)("design_linter.dropdown.search_placeholder"),p=(0,n.useRef)(null);return n.createElement(lx.bL,{width:260,maxHeight:320,onClose:o,defaultPosition:d},n.createElement(et.vo,null,n.createElement(lK,null,n.createElement(et.hE,null,i.title),n.createElement(lb.p,{type:"search",size:"md",placeholder:m,ref:p,id:m,value:e,onChange:e=>t(e)})),n.createElement(et.nB,{scrolling:"none",padding:0},n.createElement(lY,{items:i.items,display:i.display,searchQuery:l}))))}function lK({children:e}){return n.createElement("div",{className:"design_linter_suggestions_modal--header--XSpwy","data-fpl-header":!0},e)}function lY({items:e,display:t,searchQuery:l}){let r=(0,E.md)(lB)??ei.lQ,a=(0,E.md)(lz)??(()=>!1);return"GRID"===t?n.createElement(lZ,{items:e,onSelection:r,checkIsSelected:a}):n.createElement(lQ,{items:e,searchQuery:l,onSelection:r,checkIsSelected:a})}function lQ({items:e,searchQuery:t,onSelection:l,checkIsSelected:r}){let a="design-linter-dropdown",i=(0,n.useRef)(null),[o,s]=(0,n.useState)(null),d=(0,n.useCallback)(e=>{s(e)},[s]),c=(0,n.useCallback)(e=>{o===e&&s(null)},[o,s]),m=lq(),p=(0,n.useCallback)(e=>{l&&l(e)},[l]),g=!0,E=(0,n.useMemo)(()=>{if(""===t)return e;let l=t.toLowerCase(),n=[],r=null,a=null;return e.forEach(e=>{"LIST_SECTION_HEADER"===e.type?r=e:"LIST_HIERARCHY_PATH"===e.type?a=e:("LIST"===e.type||"TEXT_STYLE_LIST"===e.type)&&("LIST"===e.type&&!e.isSuggestion&&e.variable.name.toLowerCase().includes(l)||"TEXT_STYLE_LIST"===e.type&&!e.isSuggestion&&(e.style.name.toLowerCase().includes(l)||e.style.description?.toLowerCase().includes(l)))&&(r&&(n.push(r),r=null),a&&(n.push(a),a=null),n.push(e))}),n},[e,t]),f=(0,n.useCallback)(e=>{let t=E[e];return t?`${e}-${t.id}`:""},[E]),x=(0,n.useCallback)(()=>i.current,[i]),b=(0,lh.Te)({count:E.length,estimateSize:e=>E[e]?.type==="LIST_SEPARATOR"?16:32,getItemKey:f,getScrollElement:x,overscan:5});return(0,n.useEffect)(()=>{let e=E.findIndex(e=>r(e))??-1;e>=0&&b.scrollToIndex(e,{align:"center"})},[r,E,b]),n.createElement(lk.dP,{recordingKey:a},E.length>0?n.createElement("div",{ref:i,className:"xysyzu8",style:{height:`${Math.min(b.getTotalSize()+8,248)}px`}},n.createElement("div",{className:"x1n2onr6",style:{height:`${b.getTotalSize()+8}px`}},b.getVirtualItems().map(e=>{let{index:t}=e,l=[1,t],i=E[t];if(!i)return null;g=!1;let s=!!r&&r(i);return n.createElement("div",{key:e.key,className:"x10l6tqk x13vifvy xu96u03 xh8yej3 x78zum5 x6s0dn4",style:{height:`${e.size}px`,transform:`translateY(${e.start}px)`}},n.createElement(lJ,{isHighlighted:!b.isScrolling&&o===t,isSelected:s,keyboardNavigationPath:l,listItem:i,onItemHighlight:()=>{d(t)},onItemMouseLeave:()=>{c(t)},onItemSelect:()=>{"variable"in i&&p(i.variable.node_id),"style"in i&&p(i.style.node_id),m()},recordingKey:lp.Pt(a,`${"variable"in i?i.variable.id:t}`)}))}))):null,g?n.createElement("div",{className:"x78zum5 xl56j7k x6s0dn4 x84pvj6 x87ps6o",style:{height:(0,lT.Ih)({layout:"list"})}},(0,u.t)("variables.binding_ui.no_search_results")):null)}let lJ=n.memo(function({isHighlighted:e,isSelected:t,keyboardNavigationPath:l,listItem:r,onItemHighlight:a,onItemMouseLeave:i,onItemSelect:o,recordingKey:s}){let d=(0,E.md)(lV)??null;switch(r.type){case"LIST":return n.createElement("div",{className:"x1sxf85j xb3r6kr xet2fuk x1db2dqx x1iyjqo2"},n.createElement(lR._J,{key:r.id,disabledVariableIds:new Set,isHighlighted:e,isLinterItem:!0,isSelected:t,keyboardNavigationPath:l,onItemHighlight:a,onItemMouseLeave:i,onItemSelect:o,pickerType:"fields",recordingKey:s,valuePreview:d?d(r):null,variable:r.variable,variableSet:r.variableSet}));case"TEXT_STYLE_LIST":return n.createElement("div",{className:"x1sxf85j xb3r6kr xet2fuk x1db2dqx x1iyjqo2"},n.createElement(lS.m3,{dsStyle:r.style,additionalClassName:eo.s.h24.flex.wFull.$},n.createElement(lR.DL,{dsStyle:r.style,hideContextMenu:!0,isHighlighted:e,isLinterItem:!0,isSelected:t,keyboardNavigationPath:l,onItemContextMenu:i,onItemHighlight:a,onItemMouseLeave:i,onItemSelect:o,recordingKey:s})));case"LIST_SEPARATOR":return n.createElement("div",{className:"xjm9jq1 x1m4xfpy xh8yej3"});case"LIST_SECTION_HEADER":return n.createElement(lR.KL,{groupName:r.name,fileName:r.fileName,secondaryText:r.secondaryText});case"LIST_HIERARCHY_PATH":return n.createElement(lR.Tg,{groupName:r.label});default:return null}});function lZ({items:e,onSelection:t,checkIsSelected:l}){let r=lq(),a=(0,n.useCallback)(e=>{t(e)},[t]),i=eo.s.flex.justifyCenter.itemsCenter.colorBgSecondary.selectNone.bRadius5.$,o=eo.s.b2.colorBorderSelected.$;return n.createElement("div",{className:eo.s.grid.borderBox.gridTemplateColumns2.mt8.mb8.ml16.$},e.map(e=>{let t=!!l&&l(e);return"GRID"===e.type?n.createElement("div",{key:e.id,className:eo.s.textBodyMedium.colorText.truncate.selectNone.mt8.mr16.mb8.$},n.createElement(ly.E,{className:tE()("design_linter_suggestions_modal--thumbnailContainer--mBL-q",i,t?o:null),onClick:()=>{a(e.id),r()}},n.createElement(e7.oW,{src:e.thumbnail_url,alt:e.name})),n.createElement("h3",{className:eo.s.truncate.mt2.$},e.name)):null}))}var l0=l(403451),l1=l(720722),l2=l(882839);function l5(){let{isLibraryModalShown:e,onToggleLibraryModal:t}=(0,l0.u)({entrypoint:l2.r6.DESIGN_LINTER,modalType:"editor",initialTab:l1.Wv.LIBRARIES}),l=(0,n.useCallback)(()=>{t7.r()?.teardownLinter(),e||t()},[e,t]);return n.createElement("div",{...er.Ay.props(l3.box)},(0,u.tx)("design_linter.library_selector.no_libraries"),n.createElement(lu.$n,{onClick:l},(0,u.tx)("design_linter.library_selector.manage_libraries")))}let l3={box:{display:"x78zum5",alignItems:"x6s0dn4",padding:"x1pcupwp",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,gap:"x1nfngrj",rowGap:null,columnGap:null,borderRadius:"x1sxf85j",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,backgroundColor:"x1v8gsql",...eE.g.textBodyMedium,$$css:!0}};var l4=l(837983),l8=l(134611),l6=l(283622);function l7(){let e=(0,l8.$)(),t=(0,l4.e)(),l=(0,l6.$)(e,t),r=l9(e),a=l9(l);return(0,n.useMemo)(()=>({subscribedLibraries:r,usedInFileLibraries:a}),[r,a])}function l9(e){return(0,n.useMemo)(()=>"loaded"===e.status?{...e,data:e.data.filter(e=>e.num_variables>0||e.num_styles>0||e.num_components>0)}:e,[e])}function ne(e){return(0,n.useMemo)(()=>{if("loaded"===e.status)return 0===e.data.length?ll.oV.EMPTY:ll.oV.CONTENT;if("errors"===e.status||"disabled"===e.status);else if("loading"===e.status)return ll.oV.LOADING;return ll.oV.ERROR},[e])}var nt=l(544405),nl=l(584978),nn=l(334804),nr=l(313693),na=l(903832),ni=l(181243),no=l(799272),ns=l(376852),nd=l(48908);function nu({numPlaceholderLibraries:e}){return n.createElement(n.Fragment,null,(0,ns.y1)(e).map(e=>n.createElement(nc,{key:e})))}function nc(){let e={opacity:50,animationType:nd.JR.SHIMMER};return n.createElement("div",{className:"x78zum5 x6s0dn4 x9f619 x1ef8nbk x17f4yl9 x1bamp8i x19y5rnk xh8yej3 x1nfngrj"},n.createElement(nd.Qp,{className:"x1exxlbk xnnlda6 x1ino65a x19y5rnk",...e})," ",n.createElement("div",{className:"x98rzlu x78zum5 xdt5ytf x1nfngrj"},n.createElement(nd.Wi,{className:"xygnafs",...e}),n.createElement(nd.Wi,{className:"x1dmp6jm",...e})),n.createElement(nl.W,{id:"loading",disabled:!0}))}function nm({subscribedLibraries:e,usedInThisFile:t,subscribedLibrariesStatus:l,usedInThisFileStatus:r,checkedStates:a,setCheckedStates:i,setSubscribeCallbacks:o}){let s=n.useCallback((e,t)=>{i(l=>({...l,[e]:t}))},[i]),d=n.useCallback((e,t)=>{o(l=>({...l,[e]:t}))},[o]),u=r===ll.oV.LOADING||l===ll.oV.LOADING;return n.createElement(n.Fragment,null,n.createElement(np,{subscribedLibraries:e,subscribedLibrariesStatus:l,checkedStates:a,setLibraryCheckedState:s}),u?null:n.createElement(nE,{checkedStates:a,setLibraryCheckedState:s}),n.createElement(ng,{usedInThisFile:t,usedInThisFileStatus:r,checkedStates:a,setLibraryCheckedState:s,setLibrarySubscribeCallback:d}))}function np({subscribedLibraries:e,subscribedLibrariesStatus:t,checkedStates:l,setLibraryCheckedState:r}){return t===ll.oV.LOADING?n.createElement(nu,{numPlaceholderLibraries:2}):t===ll.oV.CONTENT?n.createElement(n.Fragment,null,e?.data?.map((e,t)=>n.createElement("div",{"data-testid":`design-linter-subscribed-library-item-${t}`,key:e.library_key},n.createElement(nf,{library:e,checked:l[e.library_key]||!1,setChecked:t=>r(e.library_key,t)})))):null}function ng({usedInThisFile:e,usedInThisFileStatus:t,checkedStates:l,setLibraryCheckedState:r,setLibrarySubscribeCallback:a}){return t===ll.oV.LOADING?n.createElement(nu,{numPlaceholderLibraries:1}):t===ll.oV.CONTENT?n.createElement(n.Fragment,null,e.data?.map((e,t)=>n.createElement("div",{"data-testid":`design-linter-in-file-library-item-${t}`,key:e.library_key},n.createElement(nf,{library:e,checked:l[e.library_key]||!1,setChecked:t=>r(e.library_key,t),setLibrarySubscribeCallback:a})))):null}function nE({checkedStates:e,setLibraryCheckedState:t}){let l=(0,eM.q5)(),{url:r,shouldCover:a}=(0,nr.t)(),i=(0,E.md)(lE.$c);return l&&i?n.createElement("div",{"data-testid":"design-linter-local-library-item",key:l.key},n.createElement(ny,{id:l.key,checked:e[l.key]||!1,setChecked:t.bind(null,l.key),contentComponent:n.createElement(nx,{thumbnailUrl:r,name:l.name,headerComponent:n.createElement("span",{...er.Ay.props(nh.listItemHeader)},l.name),subheader:l.team?.name??(0,u.t)("fullscreen.filename_view.drafts"),coverThumbnail:a})})):null}function nf({library:e,checked:t,setChecked:l,setLibrarySubscribeCallback:r}){let{subscribe:a}=(0,na._)(e);return n.createElement(ny,{id:e.library_key,checked:t,setChecked:l,contentComponent:n.createElement(nb,{library:e}),subscribeCallback:a,setLibrarySubscribeCallback:r})}function nx({thumbnailUrl:e,name:t,subheader:l,headerComponent:r,coverThumbnail:a=!0}){return n.createElement("div",{className:"x78zum5 x6s0dn4 x1nfngrj"},n.createElement(ni.D,{thumbnailUrl:e??null,coverThumbnail:a,name:t}),n.createElement("div",{className:"x98rzlu x78zum5 xdt5ytf"},n.createElement("span",{...er.Ay.props(nh.listItemHeader)},r),l&&n.createElement(nn.G,{...er.Ay.props(nh.listItemSubheader),text:l})))}function nb({library:e}){let t=(0,l1.P2)(e),l=!t||null!==e.thumbnail_guid,r=t?e.team_name:e.community_author_name;return n.createElement(nx,{thumbnailUrl:e.thumbnail_url,name:e.library_name,subheader:r,headerComponent:n.createElement(no.C,{publishedLibrary:e}),coverThumbnail:l})}function ny({id:e,checked:t,setChecked:l,contentComponent:r,subscribeCallback:a,setLibrarySubscribeCallback:i}){return n.createElement("div",{...er.Ay.props(nh.listItem,t&&nh.selectedListItem)},n.createElement(nt.J,{className:"xgqk73l",htmlFor:e},r),n.createElement("div",{className:"x8x9d4c"},n.createElement(nl.W,{id:e,checked:t,onChange:t=>{l(t),a&&i&&i(e,a)}})))}let nh={listItem:{display:"x78zum5",position:"x1n2onr6",alignItems:"x6s0dn4",textAlign:"xdpxx8g",color:"x1akne3o",boxSizing:"x9f619",marginBottom:"x1ef8nbk",padding:"x17f4yl9",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,border:"x1bamp8i",borderWidth:null,borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:null,borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:null,borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,backgroundColor:"x1yjdb4r xv2f06h",$$css:!0},selectedListItem:{borderColor:"x1va2ikv",borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,$$css:!0},listItemHeader:{...eE.g.textBodyMedium,width:"x1oysuqx",$$css:!0},listItemSubheader:{...eE.g.textBodyMedium,color:"x1n0bwc9",width:"x1oysuqx",$$css:!0}};var n_=l(133595);function nv(){let e="design-linter-library-selector",[t,l]=(0,E.fp)(lo._M),r=()=>{t===ll.FR.LIBRARY_SELECTOR_FROM_ALL_GROUPS_VIEW?l(ll.FR.ALL_VISUAL_GROUPS_VIEW):t===ll.FR.LIBRARY_SELECTOR_FROM_SELECTED_GROUP_VIEW?l(ll.FR.SELECTED_VISUAL_GROUP_VIEW):t7.r()?.teardownLinter()},a=Z.hS({open:!0,onClose:r}),{subscribedLibraries:i,usedInFileLibraries:o}=l7(),[s,d]=(0,n.useState)((0,ls.Bx)()),[c,m]=(0,n.useState)({}),{availableLibraryKeys:p,checkedLibraryKeys:g}=(0,n.useMemo)(()=>{let e=Object.keys(s);return{availableLibraryKeys:new Set(e),checkedLibraryKeys:new Set(e.filter(e=>s[e]))}},[s]),f=(0,E.md)(t9.Ut),x=ne(i),b=ne(o),y=lq(),h=0===g.size,_=(0,E.md)(lE.$c),v=x!==ll.oV.CONTENT&&b!==ll.oV.CONTENT&&!_,k=x===ll.oV.ERROR||b===ll.oV.ERROR,S=lm()(g,f),R=(v||k||h||S)&&!(0,lg.PN)(),T=t===ll.FR.LIBRARY_SELECTOR_FROM_ALL_GROUPS_VIEW||t===ll.FR.LIBRARY_SELECTOR_FROM_SELECTED_GROUP_VIEW,I=(0,n.useCallback)(()=>{for(let[e,t]of Object.entries(c))g.has(e)&&t();(0,n_.U_)(T,i.data?.length??0,g.size),y();let e=(0,t7.r)();e?.resetStateForLibrarySelection(),E.zl.set(t9.Ut,g),E.zl.set(t9.W0,p),l(ll.FR.ALL_VISUAL_GROUPS_VIEW),T?e?.refreshDetection():e?.requestDetection()},[p,y,g,l,c,i,T]);return!function(e,t,l,r){let a=(0,n.useRef)(t.status),i=e===ll.FR.LIBRARY_SELECTOR_INITIAL,o="loaded"===t.status&&"loaded"!==a.current,s=(0,n.useRef)(!0),d=(0,E.md)(lE.qN),u=(0,E.md)(eM.ze);(0,n.useEffect)(()=>{if(i&&(o||"loaded"===t.status&&s.current)){let e={...l};t.data.forEach(t=>{e[t.library_key]=!0}),d&&u&&(e[u]=!0),r(t=>({...t,...e}))}a.current=t.status,s.current=!1},[i,t,l,r,o,d,u])}(t,i,s,d),(0,n_.PV)(T),n.createElement(ee.bL,{manager:a,width:385},n.createElement(et.vo,null,n.createElement(et.Y9,null,n.createElement(et.hE,null,n.createElement("div",{className:"x78zum5 x6s0dn4 xg2d0mh"},(0,u.tx)("design_linter.title"),n.createElement(lf.E,null,(0,u.tx)("general.beta"))))),n.createElement(et.nB,null,n.createElement(nk,{subscribedLibraries:i,usedInThisFile:o,subscribedLibrariesStatus:x,usedInThisFileStatus:b,checkedStates:s,setCheckedStates:d,setSubscribeCallbacks:m,hasLocalAssets:_})),n.createElement(et.wi,null,n.createElement(et.jk,null,T&&n.createElement(lu.$n,{variant:"secondary",onClick:r},(0,u.tx)("general.cancel")),n.createElement(lu.$n,{recordingKey:lp.Pt(e,"continue-button"),"data-testid":`${e}-continue-button`,disabled:R,onClick:I},T?(0,u.tx)("general.save"):(0,u.tx)("general.continue"))))))}function nk({subscribedLibraries:e,usedInThisFile:t,subscribedLibrariesStatus:l,usedInThisFileStatus:r,checkedStates:a,setCheckedStates:i,setSubscribeCallbacks:o,hasLocalAssets:s}){if(l===ll.oV.ERROR||r===ll.oV.ERROR)return n.createElement("div",{...er.Ay.props(nR.errorState)},(0,u.tx)("design_linter.library_selector.error"));let d=l===ll.oV.EMPTY&&r===ll.oV.EMPTY&&!s;return n.createElement("div",{"data-testid":"design-linter-library-selector",className:"x1b21aiw"},n.createElement(nS,null),d?n.createElement(l5,null):n.createElement(nm,{subscribedLibraries:e,usedInThisFile:t,subscribedLibrariesStatus:l,usedInThisFileStatus:r,checkedStates:a,setCheckedStates:i,setSubscribeCallbacks:o}))}function nS(){return n.createElement(n.Fragment,null,n.createElement("div",{className:"x7hzu26 x1ef8nbk x1nfngrj x78zum5 xdt5ytf"},n.createElement("div",{...er.Ay.props(nR.instructions)},(0,u.tx)("design_linter.library_selector.instructions")),n.createElement("div",{...er.Ay.props(nR.header_text)},(0,u.tx)("design_linter.library_selector.header"))))}let nR={instructions:{...eE.g.textBodyMedium,$$css:!0},header_text:{...eE.g.textBodyMediumStrong,$$css:!0},errorState:{display:"x78zum5",justifyContent:"xl56j7k",alignCenter:"xxt28ha",padding:"xi4wr45",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,...eE.g.textBodyLarge,$$css:!0}};var nT=l(562027),nI=l(693108),nC=l(231159),nw=l(670549),nL=l(447071);let nA=(0,n.memo)(function(){let e=function(){let e=(0,nL.dG)(nI.s4.TEXT,null),t=(0,E.md)(t9.Ut);return(0,n.useMemo)(()=>{let l=e.libraries.filter(e=>e.numStylesText>0&&t.has(e.libraryKey));return{...e,libraries:l}},[e,t])}();return(function({status:e,libraries:t}){let[l,r]=(0,E.fp)(t9.jq),a=(0,E.md)(t9.Ut),i=(0,E.md)(eM.yV),o=function(){let e=(0,E.md)(nN);return(0,E.md)(t9.qp)?e:[]}(),{status:s,stylesByFileKey:d}=(0,nL.Zk)({styleType:nI.s4.TEXT,initialSelectedSubscribedStyle:null,selectedLibraries:t.filter(e=>e.numStylesText>0)}),u=(0,n.useMemo)(()=>{if("loading"===s||"loading"===e)return{status:"loading",subscribedStylesByFileKey:{},allStyles:[],localStyles:null};if((0,lg.PN)())return{status:"loaded",subscribedStylesByFileKey:{},allStyles:[],localStyles:null};if("invalidated"===l.status||"loaded"===s){let e=Object.entries(d).reduce((e,[t,l])=>(a.has(l.libraryKey)&&(e[t]=l),e),{}),t=Object.values(e).flatMap(e=>e.styles),l=null;return o.length>0&&i?.key&&i?.libraryKey&&(l={fileKey:i.key,styles:o,libraryKey:(0,nT.l)(i.libraryKey)},t.push(...o)),{status:"loaded",subscribedStylesByFileKey:e,allStyles:t,localStyles:l}}return l},[s,e,l,d,o,a,i?.key,i?.libraryKey]);(0,n.useEffect)(()=>{(u.status!==l.status||u.allStyles.length!==l.allStyles.length)&&r(u)},[u,l,r])}(e),e.libraries.length)?n.createElement(nw.MM,{inheritStyleKey:null,inheritStyleID:null,styleType:nI.s4.TEXT,selectedLibraries:e.libraries}):null}),nN=(0,nC.bt)(e=>(0,lw.ti)(e.library.local.styles,nI.s4.TEXT));var nO=l(354427),n$=l(716365),nM=l(1511),nB=l(442393),nz=l(930229),nV=l(813321),nP=l(410441),nF=l(10855),nD=l(454805),nG=l(143823),nH=l(588123),nU=l(142917),nj=l(459633),nq=l(399994),nW=l(195257),nX=l(552807),nK=l(29085),nY=(e=>(e.ALL_GROUPS_VIEW="all_groups_view",e.PREVIEW="preview",e))(nY||{}),nQ=(e=>(e.COLOR="color",e.IMAGE="image",e))(nQ||{});function nJ(){return{bg:"var(--color-bg-secondary)",type:"color"}}function nZ(e,t){let l=(0,nU.ei)(e),r=(0,ls.wg)(l),[a,o]=(0,n.useState)(nJ());return(0,n.useEffect)(()=>{let l=(0,g.UN)().get(e);if(!l)return;let n=l.parentNode;for(;n;){let e=n.guid,l=(0,lt.kl)(n.fills).paint;if(l){let n=l.type;if("SOLID"===n){o(function(e){let t=e.color;if(!t)return nJ();let l=e.opacity??1,{hex:n}=(0,nW.XF)(t),r=Math.floor(255*l).toString(16);return{bg:`#${n}${r}`,type:"color"}}(l));return}if("IMAGE"===n){o(n0(e,"preview"===t?8:2,r));return}if("VIDEO"!==n&&"EMOJI"!==n){o(n0(e,2,r));return}o(nJ());return}n=n.parentNode}let a=i.Egt?.getNodePageBackgroundColor(e);o(a?{bg:a,type:"color"}:nJ())},[r,e,t]),a}function n0(e,t,l){let n=`${e}-${t}`,r=E.zl.get(t9.g7),a=r.get(n),o=a?.lastEditedAtTime!==l;if(a&&!o)return{bg:a.src,type:"image"};let s=function(e,t){let l=i.mHF?.copyNodeToLinterScene(e);if(!l)return null;let n=new g.qo(i.juq.LINTER).get(l);if(!n)return null;for(let e of n.childrenNodes)e.removeSelfAndChildren();n.cornerRadius=0,n.effects=[];let r=(0,nK.L6)(l,t);return r?(0,nX.Pv)(r.image,new nD.Mi(r.width,r.height)):null}(e,t);if(!s)return nJ();if(l>0){let e=new Map(r);e.set(n,{src:s,lastEditedAtTime:l}),E.zl.set(t9.g7,e)}return{bg:s,type:"image"}}let n1=n.memo(function(){let e=(0,n.useRef)(null),t=(0,E.md)(lo.Bd),l=(0,E.md)(lo.$H),r=(0,lh.Te)({count:t?.length??0,getScrollElement:()=>e.current,overscan:3,estimateSize:()=>88}),a=l?l.y-40:475;return n.createElement("div",{"data-testid":"design-linter-groups-list",ref:e,className:"x1rife3k x8rdmch xctkrei",style:{height:a}},n.createElement("div",{...er.Ay.props(n3.description)},(0,u.t)("design_linter.modal.description")),n.createElement("div",{className:"x1n2onr6",style:{height:r.getTotalSize()}},n.createElement("div",{className:"x13vifvy xu96u03 x1n2onr6",style:{height:`${r.getTotalSize()+16}px`}},r.getVirtualItems().map(e=>{let l=t[e.index];return l?n.createElement(n2,{key:e.index,group:l,virtualRow:e}):null}))))}),n2=n.memo(function({group:e,virtualRow:t}){let l=(0,E.Xr)(lo.NM),r=(0,E.Xr)(lo._M),[a,i]=(0,nj.M)(),o=(0,n.useCallback)(()=>{l(e.id),r(ll.FR.SELECTED_VISUAL_GROUP_VIEW),(0,n_.JT)(e,"ALL_GROUPS_VIEW")},[e,r,l]),s=(0,ls.ac)(e);return s?n.createElement(ly.E,{"data-testid":`design-linter-group-item-${t.index}`,className:"xf7z5ut x78zum5 xl56j7k xb3r6kr xkzqb9i x19y5rnk x7z60cl x1exxlbk xdd8jsf",onClick:o,key:s,"data-index":t.index,...er.Ay.props(n3.groupRow,i&&n3.groupRowHover),style:{height:`${t.size}px`,transform:`translateY(${t.start}px)`},ref:a},n.createElement("div",{className:"x78zum5 x6s0dn4"},n.createElement(n5,{rootNodeId:s}),n.createElement("div",{className:"xrybvsa x78zum5 xdt5ytf"},n.createElement("div",{...er.Ay.props(n3.groupTitle)},(0,u.t)("design_linter.visual_group_row.title",{count:e?.rootNodeIdToViolatingNodeIdSet.size})))),n.createElement("div",{...er.Ay.props(n3.chevron,i&&n3.showChevron)},n.createElement(nH.e,null))):null}),n5=n.memo(function({rootNodeId:e}){let t=(0,nU.ei)(e),l=(0,ls.wg)(t),r=(0,nq.yh)({nodeId:e,width:100,height:100,shouldSkip:!1,version:l,reason:"design-linter.thumbnail",regenerateAfterImagesLoaded:!0,isDevModeBlendedSection:!1,shouldCache:l>0}),{bg:a,type:i}=nZ(e,nY.ALL_GROUPS_VIEW),o=i===nQ.COLOR,s=i===nQ.IMAGE;return r?n.createElement("div",{...er.Ay.props(n3.thumbnailContainer,s&&n3.backgroundImageContainer),style:{...o&&{backgroundColor:a},...s&&{backgroundImage:`url(${a})`}}},n.createElement(e7.oW,{src:r.src,className:"x19kjcj4 x193iq5w xmz0i5r",alt:(0,u.t)("design_linter.penalty_box.thumbnail_alt")})):n.createElement("div",{className:"xf7z5ut x78zum5 xl56j7k xb3r6kr xkzqb9i x19y5rnk x7z60cl x1exxlbk xdd8jsf"},n.createElement(nd.Qp,{className:"x1exxlbk x14nwjz3 x19y5rnk x7z60cl",animationType:nd.JR.LIGHT_SHIMMER}))}),n3={description:{...eE.g.textBodyMedium,marginLeft:"xrybvsa",marginInlineStart:null,marginInlineEnd:null,marginTop:"xehsoiq",userSelect:"x87ps6o",$$css:!0},thumbnailContainer:{padding:"xf7z5ut",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,display:"x78zum5",justifyContent:"xl56j7k",overflow:"xb3r6kr",overflowX:null,overflowY:null,border:"xkzqb9i",borderWidth:null,borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:null,borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,borderColor:"x7z60cl",borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,width:"x1exxlbk",height:"xdd8jsf",$$css:!0},groupRowHover:{backgroundColor:"x1v8gsql",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},groupRow:{display:"x78zum5",marginTop:"x7hzu26",marginBottom:"x1ef8nbk",padding:"xf7z5ut",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,height:"xt7dq6l",position:"x10l6tqk",top:"x13vifvy",left:"xu96u03",insetInlineStart:null,insetInlineEnd:null,width:"xh8yej3",justifyContent:"x1qughib",$$css:!0},groupTitle:{...eE.g.textBodyMedium,color:"x1akne3o",$$css:!0},chevron:{opacity:"xg01cxk",height:"xxk0z11",width:"xvy4d1p",visibility:"xlshs6z",$$css:!0},showChevron:{opacity:"x1hc1fzr",visibility:"xnpuxes",$$css:!0},backgroundImageContainer:{backgroundRepeat:"xiy17q3",backgroundSize:"x18d0r48",backgroundPosition:"x1xsqp64",backgroundPositionX:null,backgroundPositionY:null,backgroundColor:"x1v8gsql",$$css:!0}};var n4=l(195124),n8=l(47687),n6=l(320953),n7=l(303397);function n9({title:e,getItems:t,getItemName:l}){let[r,a]=(0,n.useState)(!1),o=(0,n.useCallback)(async()=>{r||(a(!0),await n());async function n(){try{let n;let r=[];(0,n6.l7)(i.zkO.USER,"debug-linter-visual-groups",()=>{let t=(0,g.UN)(),l=t.getCurrentPage();(n=t.createNode("SECTION")).fills=[{type:"SOLID",color:{r:.9,g:.9,b:.9,a:0},opacity:1}],n.name=e;let r=0;for(let e of l?.childrenNodes??[])e.x+e.size.x>r&&(r=e.x+e.size.x);n.x=r+100,n.y=0});let a=0,o=40,s=t();for(let[e,[t,d]]of Array.from(s.entries()).entries()){let s;(0,n6.l7)(i.zkO.USER,"debug-linter-visual-groups",()=>{let i=(0,g.UN)();if(e>0){let e=i.createNode("RECTANGLE");e.fills=[{type:"SOLID",color:{r:.3,g:.3,b:.3,a:1},opacity:1}],e.size={x:a,y:12},e.y=o+40,e.x=40,n.appendChild(e),o+=e.size.y+80,r.push(e.guid)}(s=i.createNode("FRAME")).visible=!1,s.name=l(t),s.x=40,s.y=o,s.fills=[{type:"SOLID",color:{r:.7,g:.7,b:.7,a:1},opacity:1}],s.stackMode="HORIZONTAL",s.stackSpacing=40,s.stackCounterSizing="RESIZE_TO_FIT_WITH_IMPLICIT_SIZE",s.stackTopPadding=40,s.stackBottomPadding=40,s.stackLeftPadding=40,s.stackRightPadding=40,s.frameMaskDisabled=!0});let u=0,c=0,m=0;for(let[e,t]of d.entries())await new Promise(e=>setTimeout(e,0)),(0,n6.l7)(i.zkO.USER,"debug-linter-visual-groups",()=>{let l;let r=(0,g.UN)(),a=r.get(t);if(!a)return;if("DOCUMENT"===a.type)l=r.createNode("FRAME").guid;else{if("CANVAS"===a.type)return;l=a.clone()}if(e>0){let e=r.createNode("RECTANGLE");e.fills=[{type:"SOLID",color:{r:.6,g:.2,b:.6,a:1},opacity:1}],e.size={x:4,y:c+40},e.y=40,e.x=u,s.appendChild(e),u+=e.size.x+40}let i=r.get(l);i&&(i.y=40,i.x=u,i.stackPositioning="AUTO",u+=i.size.x+40,c=Math.max(c,i.size.y),m=Math.max(m,i.size.x),"SECTION"===a.type?(n.appendChild(i),i.y=o):s.appendChild(i))});a=Math.max(a,u),o=o+c+120,(0,n6.l7)(i.zkO.USER,"debug-linter-visual-groups",()=>{if(n.size={x:a+40,y:o},0===s.childCount){s.removeSelfAndChildren();return}s.size={x:u,y:c+40},n.appendChild(s),s.visible=!0})}let d=(0,g.UN)().getCurrentPage();(0,n6.l7)(i.zkO.USER,"debug-linter-visual-groups",()=>{n&&(d?.appendChild(n),function(e,t){let l=(0,g.UN)();for(let n of e){let e=l.get(n);e&&(e.size={x:t,y:e.size.y})}}(r,n.size.x-80),i.Egt?.replaceSelection([n.guid],!0),n7.Y5.triggerAction("goto-layer",{args:{nodeId:n.guid}}))})}catch(e){console.error(e)}finally{a(!1)}}},[r,t,l,e]);return{isRunning:r,handleClick:o}}function re(){let e=(0,E.md)(lo.Bd),{isRunning:t,handleClick:l}=n9({title:"Visual groups",getItems:(0,n.useCallback)(()=>{let t=new Map;return e.forEach(e=>{let l=`${e.id} | ${e.type}`;t.set(l,Array.from(e.rootNodeIdToViolatingNodeIdSet.keys()))}),t},[e]),getItemName:(0,n.useCallback)(e=>e,[])});return n.createElement("div",{className:"xz9dl7a"},n.createElement(lu.$n,{disabled:t,onClick:l,iconPrefix:t?n.createElement(nG.k,null):void 0},"Inspect groups"))}function rt(){let e=(0,E.md)(t9.fY),{isRunning:t,handleClick:l}=n9({title:"Visual Hashes",getItems:(0,n.useCallback)(()=>(function(e){let t=new Map,l=(0,g.UN)();return e.forEach(e=>{let n=l.get(e);n&&(0,n4.hV)(n,e=>{let l=String(i.mHF?.getVisualGroupFieldsHash(e.guid)??0),n=t.get(l)??[];t.set(l,[...n,e.guid])})}),t})(e?.guids??[]),[e]),getItemName:(0,n.useCallback)(e=>`Hash: ${e}`,[])});return n.createElement("div",{className:"xz9dl7a"},n.createElement(lu.$n,{disabled:t,onClick:l,iconPrefix:t?n.createElement(nG.k,null):void 0},"Inspect Vis. G Field Hashes"))}function rl(){let e=(0,E.md)(t9.u2),t=(0,E.md)(t9.fY),l=t?.guids??[],r=function(){let e=(0,E.md)(t9.fY),[t,l]=(0,n.useState)(0);return(0,n.useEffect)(()=>{let t=0;if(e){let l=(0,g.UN)();e.guids.forEach(e=>{let n=l.get(e);n&&(0,n4.hV)(n,()=>{t++})})}l(t)},[e]),t}(),a=(0,E.md)(n8.yd),i=(0,E.md)(t9.Iy),{status:o}=(0,E.md)(t9.v4),s=function(){let e=(0,E.md)(t9.m7);return(0,n.useMemo)(()=>Array.from(e.values()).reduce((e,t)=>e+t.size,0),[e])}(),d=function(){let[e,t]=(0,n.useState)(0),l=(0,E.md)(t9.Iy),r=(0,E.md)(t9.m7);return(0,n.useEffect)(()=>{let e=new Set;for(let t of l.values())for(let l of t.violatingNodeIdToRootNodeId.keys())e.add(l);let n=new Set;for(let t of r.values())for(let l of t.values())for(let t of l)e.has(t.guid)||n.add(t.guid);t(n.size)},[r,l]),e}(),u=function(){let e=(0,E.md)(t9.m7);return(0,n.useMemo)(()=>{let t={};for(let l of e.values())for(let e of l.values())for(let l of e){let{ruleId:e}=l;t[e]=t[e]||[],t[e].push(l)}return Object.entries(t).map(([e,t])=>({rule:e,count:t.length}))},[e])}();return n.createElement(n.Fragment,null,n.createElement("div",{className:eo.s.grid.gridTemplateColumns2.gap2.py8.$},n.createElement("div",{className:eo.s.textHeadingSmall.mr1.$},"Linter status:"),n.createElement("div",{className:eo.s.textBodyMedium.$},e),n.createElement("div",{className:eo.s.textHeadingSmall.mr1.$},"Variable context status:"),n.createElement("div",{className:eo.s.textBodyMedium.$},o),n.createElement("div",{className:eo.s.textHeadingSmall.mr1.$},"Linting target:"),n.createElement("div",{className:eo.s.textBodyMedium.maxW200.overflowAuto.$},`${l.join(",")}`),n.createElement("div",{className:eo.s.textHeadingSmall.mr1.$},"Linting target nodes:"),n.createElement("div",{className:eo.s.textBodyMedium.$},r),n.createElement("div",{className:eo.s.textHeadingSmall.mr1.$},"Lintable nodes:"),n.createElement("div",{className:eo.s.textBodyMedium.$},a),n.createElement("div",{className:eo.s.textHeadingSmall.mr1.$},"Visual groups:"),n.createElement("div",{className:eo.s.textBodyMedium.$},i.size),n.createElement("div",{className:eo.s.textHeadingSmall.mr1.$},"Violations:"),n.createElement("div",{className:eo.s.textBodyMedium.$},s),n.createElement("div",{className:eo.s.textHeadingSmall.mr1.$},"Ungrouped violations:"),n.createElement("div",{className:eo.s.textBodyMedium.$},d),n.createElement("div",{className:eo.s.textHeadingSmall.pb4.$},"Violations per rule:"),n.createElement("ol",null,u.map(({rule:e,count:t})=>n.createElement("span",{key:e,className:eo.s.textBodyMedium.block.$},n.createElement("strong",null,e),": ",t)))))}function rn(e){if(!e)return"loading";let t=e.toFixed(3);return e<1e3?`${t}ms`:e<6e4?`${(e/1e3).toFixed(2)}s (${t}ms)`:`${(e/6e4).toFixed(2)}min (${t}ms)`}function rr({label:e,value:t,isHeader:l=!1}){return n.createElement(n.Fragment,null,n.createElement("div",{className:tE()(eo.s.textHeadingSmall.mr1.$,{[eo.s.textHeadingMedium.$]:l})},e),n.createElement("div",{className:eo.s.textBodyMedium.$},rn(t)))}function ra({items:e}){return n.createElement("div",{className:eo.s.flex.flexColumn.overflowAuto.$},n.createElement("table",null,n.createElement("tbody",null,e.map(([e,t])=>n.createElement("tr",{key:e},n.createElement("td",{className:eo.s.textBodyMedium.pr2.italic.noWrap.$},n.createElement("strong",null,e)),n.createElement("td",{className:eo.s.textBodyMedium.alignLeft.$},rn(t)))))))}function ri(){let e=(0,E.md)(n8.eF),t=(0,E.md)(n8.L2)??[],l=t.reduce((e,{duration:t})=>e+t,0),r=(0,E.md)(n8.rT)??new Map,a=(0,E.md)(n8.KV)??new Map,i=(0,E.md)(n8.zZ)??new Map;return n.createElement(n.Fragment,null,n.createElement("div",{className:eo.s.textHeadingSmall.mr1.textHeadingMedium.$},"Overall latency info:"),n.createElement("div",{className:eo.s.grid.gridTemplateColumns2.gap2.py8.$},n.createElement(rr,{label:"Time until first group:",value:e}),n.createElement(rr,{label:"Total loading time:",value:l}),n.createElement("div",{className:eo.s.textHeadingSmall.mr1.$},"Time per status:"),n.createElement(ra,{items:t.map(({status:e,duration:t})=>[e,t])}),n.createElement("div",{className:eo.s.textHeadingSmall.pb4.$},"Detection time per rule:"),n.createElement(ra,{items:Array.from(r)}),n.createElement("div",{className:eo.s.textHeadingSmall.pb4.$},"Avg detection time per rule per node:"),n.createElement(ra,{items:Array.from(a)}),n.createElement("div",{className:eo.s.textHeadingSmall.pb4.$},"P95 detection time per rule:"),n.createElement(ra,{items:Array.from(i).filter(([e,t])=>null!==t).map(([e,t])=>[e,t])})))}function ro(){let e=(0,E.md)(lo.E$),t=e?.rootNodeIdToViolatingNodeIdSet.size,l=(0,E.md)(n8.Op),r=(0,E.md)(n8.iS),a=(0,E.md)(n8.ky);return n.createElement(n.Fragment,null,n.createElement("div",{className:eo.s.textHeadingSmall.italic.mt8.$},"For current group:"),n.createElement("div",{className:eo.s.grid.gridTemplateColumns2.gap2.py8.$},n.createElement("div",{className:eo.s.textHeadingSmall.mr1.$},"Group size (nodes):"),n.createElement("div",{className:eo.s.textBodyMedium.$},t),n.createElement(rr,{label:"Fix loading time:",value:l}),n.createElement(rr,{label:"Current thumbnail loading time:",value:r}),n.createElement(rr,{label:"Suggested thumbnail loading time:",value:a})))}function rs(){let e=(0,t7.r)();return n.createElement("div",{className:eo.s.flex.flexColumn.gap4.py8.w150.$},n.createElement(lu.$n,{onClick:()=>{e?.debugLinterState()}},"Copy linter state"),n.createElement(re,null),n.createElement(rt,null))}function rd(){let[e,t]=(0,n.useState)(!1);return n.createElement("div",{className:eo.s.colorBg.mx16.mt16.flex.flexColumn.b2.bRadius4.colorBorder.p4.wAuto.$},n.createElement("div",{className:eo.s.p4.$},n.createElement(ly.E,{className:eo.s.colorBg.wFull.$,onClick:()=>t(!e)},n.createElement("span",null,e?"\u25BC":"\u25B6"),n.createElement("span",{className:eo.s.ml2.textHeadingMedium.$},"Linter debug view")),e&&n.createElement(n.Fragment,null,n.createElement(rl,null),n.createElement(ri,null),n.createElement(ro,null),n.createElement(rs,null))))}let ru=(0,E.eU)(null,async e=>{E.zl.set(n8.Op,null);let t=performance.now(),l=e(lo.E7),n=(0,t7.r)();if(!n)return;let r=Object.values(l);await Promise.allSettled(r.map(e=>n.requestFix(e))),E.zl.set(n8.Op,performance.now()-t)}),rc={suggestionsViewWidth:"var(--x1uvavt)",suggestionsModalHeaderHeight:"var(--x1vqszz8)",previewHeaderHeight:"var(--xkgaxnv)"};var rm=l(762217),rp=l(373286),rg=l(183867),rE=l(581672),rf=l(800909),rx=l(953782),rb=l(508328),ry=l(897713);function rh(e,t,l){let[r,a]=(0,n.useState)({thumbnail:null,status:"loading"}),o=(0,n.useRef)(null),{violationsWithFixes:s,areFixesReady:d}=function(e){let t=function(e){let t=(0,E.md)(lo.IZ);return(0,n.useMemo)(()=>{if(!e)return[];let l=(0,g.UN)();return t.filter(t=>t.guid===e||(0,n4.rV)(l,e,t.guid))},[e,t])}(e),l=(0,E.md)(lo.$C),[r,a]=(0,n.useState)(!1);return{violationsWithFixes:(0,n.useMemo)(()=>{if(!l)return[];let e=!0,n=t.map(t=>{let n=l.get(t.groupKey);return n?.status==="loading"&&(e=!1),{violation:t,selectedFix:n?.fix||null}});return a(e),n},[l,t]),areFixesReady:r}}(t);return(0,n.useEffect)(()=>{let n=e===rK.SUGGESTED,r=async()=>{let r=performance.now();n?E.zl.set(n8.ky,null):E.zl.set(n8.iS,null);let d=new AbortController;o.current=d;try{let r;if(!t)return;let o=r_(t,e),u=E.zl.get(t9.qL).get(o),c=l<=0,m=u?.lastEditedAtTime!==l||c,p=m,f="";if(n){f=function(e){let t=JSON.stringify(e.map(e=>(function({violation:e,selectedFix:t}){var l;return t?.fixContext?`${e.guid}_${e.groupKey}_${l=t.fixContext,JSON.stringify(l,(e,t)=>t&&"object"==typeof t&&!Array.isArray(t)?Object.keys(t).sort().reduce((e,l)=>(e[l]=t[l],e),{}):t)}`:`${e.guid}_${e.groupKey}`})(e)).sort());return(0,rb.F)(t)}(s);let e=u?.violationsStateHash!==f;p=m||e}if(u&&!p){a({thumbnail:u.thumbnail,status:"loaded"});return}let x=()=>{a({thumbnail:null,status:"error"}),console.error("Error generating thumbnail: Called showError on delegate")};if((r=n?await rv(t,l,f,s,x,d.signal):function(e,t,l,n){let r=i.mHF?.copyNodeToLinterScene(e);if(!r)throw Error("Current linter scene guid not found");let a=(0,g.UN)().get(e);if(!a)throw Error("Original node not found");if(n.aborted)throw new rf.C;let o=new g.qo(i.juq.LINTER).get(r);if(!o)throw Error("Current linter scene node not found");let{activeToLinterGuidsMap:s,linterToActiveGuidsMap:d}=rk(a,o);return{thumbnail:(0,ry.SI)({nodeId:r,linterScene:!0,showError:l})(),activeToLinterGuidsMap:s,linterToActiveGuidsMap:d,linterGuidsToNodeInfoMap:rS(o),lastEditedAtTime:t}}(t,l,x,d.signal)).thumbnail){a({thumbnail:r.thumbnail,status:"loaded"}),function(e,t){let l=new Map(E.zl.get(t9.qL));l.set(e,t),E.zl.set(t9.qL,l)}(o,r);return}console.error("Error generating thumbnail: Thumbnail delegate does not exist"),a({thumbnail:null,status:"error"})}catch(e){console.error("Error generating thumbnail:",e),a({thumbnail:null,status:"error"})}finally{let e=performance.now()-r;n?E.zl.set(n8.ky,e):E.zl.set(n8.iS,e)}};if(n&&!d){a({thumbnail:null,status:"loading"});return}return r(),()=>{o.current?.abort()}},[t,l,e,s,d]),r}function r_(e,t){return`${e}-${t}`}async function rv(e,t,l,n,r,a){let o=i.mHF?.copyNodeToLinterScene(e);if(!o)throw Error("Suggested linter scene guid not found");let s=(0,g.UN)().get(e);if(!s)throw Error("Original node not found");if(a.aborted)throw new rf.C;let d=new g.qo(i.juq.LINTER).get(o);if(!d)throw Error("Suggested linter scene node not found");let{activeToLinterGuidsMap:u,linterToActiveGuidsMap:c}=rk(s,d);await t7.r()?.applyFixesToThumbnailNode(n,u,a);let m=(0,ry.SI)({nodeId:o,linterScene:!0,showError:r})();if(a.aborted)throw new rf.C;return{thumbnail:m,activeToLinterGuidsMap:u,linterToActiveGuidsMap:c,linterGuidsToNodeInfoMap:rS(d),lastEditedAtTime:t,violationsStateHash:l}}function rk(e,t){let l=new Map,n=new Map,r=[],a=[];return(0,rx.eA)(e,e=>{r.push(e.guid)}),(0,rx.eA)(t,e=>{a.push(e.guid)}),r.forEach((e,t)=>{let r=a[t];r&&(l.set(e,r),n.set(r,e))}),{activeToLinterGuidsMap:l,linterToActiveGuidsMap:n}}function rS(e){let t=new Map;return(0,rx.eA)(e,e=>{let l=null,n=new Map;try{let t=i.mHF?.getUnrotatedLinterNodeBounds(e.guid);if(!t)throw Error("Result is undefined or null");let r=t.bounds;l={x:r.origin.x,y:r.origin.y,width:r.size.x,height:r.size.y},t.childrenGuids.forEach((e,l)=>{let r=t.childrenBounds[l];r&&n.set(e,{x:r.origin.x,y:r.origin.y,width:r.size.x,height:r.size.y})})}catch(t){console.error(`Failed to get unrotated bounds for linter node ${e.guid}, error:`,t)}t.set(e.guid,{absoluteRenderBounds:function(e,t){let l=t?e.absoluteRenderBounds:e.absoluteBoundingBox;return l?{x:l.x,y:l.y,width:l.w,height:l.h}:null}(e,!0),unrotatedBoundingBox:l,childrenUnrotatedBoundingBoxesMap:n,cornerRadiusValues:e.cornerRadiusValues,absoluteCornerPoints:i.mHF?.getLinterNodeAbsoluteCornerPoints(e.guid)??null,absoluteTransform:e.absoluteTransform,stackTopPadding:e.stackTopPadding,stackBottomPadding:e.stackBottomPadding,stackLeftPadding:e.stackLeftPadding,stackRightPadding:e.stackRightPadding,stackSpacing:e.stackSpacing})}),t}function rR(e){let t=E.zl.get(t9.qL),l=t.get(r_(e,rK.CURRENT)),n=t.get(r_(e,rK.SUGGESTED)),r=l?.activeToLinterGuidsMap;return{currentActiveToLinterGuidsMap:r,currentLinterToActiveGuidsMap:l?.linterToActiveGuidsMap,suggestedActiveToLinterGuidsMap:n?.activeToLinterGuidsMap,suggestedLinterToActiveGuidsMap:n?.linterToActiveGuidsMap}}var rT=l(28827),rI=l(880191),rC=l(994441),rw=l(940807),rL=l(269466);function rA(e,t){let l=e.transformRect(new rw.r(new rL.M(t.x,t.y),new rL.M(t.width,t.height)));return{x:l.left(),y:l.top(),width:l.width(),height:l.height()}}function rN(e,t){let l=new rL.M(t.x,t.y),n=e.transformPoint(l);return{x:n.x,y:n.y}}function rO(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function r$(e,t){let l=rO(e.topRight,e.topLeft),n=rO(e.bottomLeft,e.topLeft),r={topLeft:rN(t,e.topLeft),topRight:rN(t,e.topRight),bottomRight:rN(t,e.bottomRight),bottomLeft:rN(t,e.bottomLeft)},a=rO(r.topRight,r.topLeft),i=rO(r.bottomLeft,r.topLeft),o=Math.min(a/l,i/n);return{transformedPoints:r,width:a,height:i,scale:o}}function rM(e){let t=rC.s.fromFigMatrix(e);return{normalizedRotation:(t.toDegrees()%360+360)%360,isFlipped:0>t.determinant()}}let rB={blueBorderHover:{position:"x10l6tqk",borderColor:"x1va2ikv",borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,borderStyle:"x1y0btm7",borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,$$css:!0},pinkBgHover:{position:"x10l6tqk",backgroundColor:"x6zv46q",opacity:"xuzhngd",$$css:!0}};function rz({overlayInfo:e,imageTransform:t}){let l,r;let{ruleId:a,cornerRadiusValues:i,cornerPoints:o,absoluteTransform:s}=e;if(!o)return null;let{transformedPoints:d,width:u,height:c,scale:m}=r$(o,t),p=Math.max(16*m,16),g=rI.S[a].toLowerCase(),E=g.includes("right"),f=g.includes("bottom"),x=function(e,t,l,n,r){let a=Math.min(t/(e.topLeft+e.topRight),1),i=Math.min(l/(e.topRight+e.bottomRight),1),o=Math.min(t/(e.bottomLeft+e.bottomRight),1),s=Math.min(l/(e.topLeft+e.bottomLeft),1),d=e.topLeft*Math.min(a,s);return{topLeft:d*n+2,topRight:e.topRight*Math.min(a,i)*n+2,bottomRight:e.bottomRight*Math.min(o,i)*n+r,bottomLeft:e.bottomLeft*Math.min(o,s)*n+r}}(i,u/m,c/m,m,2);E&&f?(l=x.bottomRight,r=d.bottomRight):E&&!f?(l=x.topRight,r=d.topRight):!E&&f?(l=x.bottomLeft,r=d.bottomLeft):(l=x.topLeft,r=d.topLeft);let{borderWidth:b,borderLength:y}=function(e,t,l,n,r,a,i,o){let s=r?"bottom":"top",d=n?"Right":"Left",u=n?a[`${s}Left`]:a[`${s}Right`];return{borderWidth:Math.max(Math.min(l+(e+2-u-l)/2-2,o),l),borderLength:Math.max(Math.min(l+(t+2-(r?a[`top${d}`]:a[`bottom${d}`])-l)/2-2,o),l)}}(u,c,l,E,f,x,2,p),h=E?r.x-b:r.x-1,_=f?r.y-y:r.y-1,{normalizedRotation:v,isFlipped:k}=rM(s),S=r.x-h,R=r.y-_,T={width:b,height:y,transformOrigin:`${S}px ${R}px`,transform:`translate(${h}px, ${_}px) rotate(${v}deg)${k?" scaleY(-1)":""}`,[`border${f?"Bottom":"Top"}Width`]:2,[`border${E?"Right":"Left"}Width`]:2,[`border${f?"Bottom":"Top"}${E?"Right":"Left"}Radius`]:l};return n.createElement("div",{...er.Ay.props(rB.blueBorderHover),style:T})}var rV=l(812696);function rP({overlayInfo:e,imageTransform:t}){let{ruleId:l,cornerPoints:r,absoluteTransform:a}=e;if(!r)return null;let{transformedPoints:i,width:o,height:s,scale:d}=r$(r,t),u=rV.g[l],c=e[({paddingTop:"stackTopPadding",paddingBottom:"stackBottomPadding",paddingLeft:"stackLeftPadding",paddingRight:"stackRightPadding"})[u]]*d,m={paddingTop:i.topLeft,paddingBottom:i.bottomLeft,paddingLeft:i.topLeft,paddingRight:i.topRight}[u],{translateX:p,translateY:g,highlightWidth:E,highlightHeight:f}={paddingTop:{translateX:m.x,translateY:m.y,highlightWidth:o,highlightHeight:c},paddingBottom:{translateX:m.x,translateY:m.y-c,highlightWidth:o,highlightHeight:c},paddingLeft:{translateX:m.x,translateY:m.y,highlightWidth:c,highlightHeight:s},paddingRight:{translateX:m.x-c,translateY:m.y,highlightWidth:c,highlightHeight:s}}[u],{normalizedRotation:x,isFlipped:b}=rM(a),y=m.x-p,h=m.y-g,_=`translate(${p}px, ${g}px) rotate(${x}deg)${b?" scaleY(-1)":""}`;return n.createElement("div",{...er.Ay.props(rB.pinkBgHover),style:{transformOrigin:`${y}px ${h}px`,transform:_,width:E,height:f}})}function rF({overlayInfo:e,imageTransform:t}){let{ruleId:l,unrotatedBounds:r,childrenUnrotatedBoundsMap:a,cornerPoints:i,stackSpacing:o,absoluteTransform:s}=e;if(!r||!i||0===a.size)return null;let d=rA(t,r),u=Array.from(a.entries()).map(([e,l])=>({guid:e,bounds:rA(t,l)})),c=l===rT.C.REQUIRE_HORIZONTAL_SPACING_VARIABLES,m=u.sort((e,t)=>c?e.bounds.x-t.bounds.x:e.bounds.y-t.bounds.y),{width:p,height:g,scale:E}=r$(i,t),f=o*E,{normalizedRotation:x,isFlipped:b}=rM(s),y=[];for(let e=0;e<m.length-1;e++){let t=m[e];if(!t)continue;let l=`${t.guid}`;if(c){let e=t.bounds.x+t.bounds.width,r=d.y,a=d.x-e,i=b?d.y+d.height-r:d.y-r;y.push(n.createElement("div",{...er.Ay.props(rB.pinkBgHover),key:l,style:{transformOrigin:`${a}px ${i}px`,transform:`translate(${e}px, ${r}px) rotate(${x}deg)`,width:f,height:g}}))}else{let e=t.bounds.y+t.bounds.height,r=d.x,a=d.x-r,i=b?d.y+d.height-e:d.y-e;y.push(n.createElement("div",{...er.Ay.props(rB.pinkBgHover),key:l,style:{transformOrigin:`${a}px ${i}px`,transform:`translate(${r}px, ${e}px) rotate(${x}deg)`,width:p,height:f}}))}}return n.createElement(n.Fragment,null,y)}let rD=(0,n.createContext)(null);function rG({children:e,value:t}){return n.createElement(rD.Provider,{value:t},e)}function rH(e){let t=(0,n.useContext)(rD);return t?n.createElement(rU,{...e,...t}):null}let rU=n.memo(function(e){let{overlayInfoList:t,transform:l}=e;return n.createElement(n.Fragment,null,t.map((e,t)=>n.createElement("div",{key:t},n.createElement(rj,{overlayInfo:e,imageTransform:l}))))});function rj({overlayInfo:e,imageTransform:t}){switch(e.ruleId){case rT.C.REQUIRE_BOTTOM_LEFT_CORNER_RADIUS_VARIABLES:case rT.C.REQUIRE_BOTTOM_RIGHT_CORNER_RADIUS_VARIABLES:case rT.C.REQUIRE_TOP_LEFT_CORNER_RADIUS_VARIABLES:case rT.C.REQUIRE_TOP_RIGHT_CORNER_RADIUS_VARIABLES:return n.createElement(rz,{overlayInfo:e,imageTransform:t});case rT.C.REQUIRE_HORIZONTAL_SPACING_VARIABLES:case rT.C.REQUIRE_VERTICAL_SPACING_VARIABLES:return n.createElement(n.Fragment,null,!e.isNested&&n.createElement(rq,{overlayInfo:e,imageTransform:t}),n.createElement(rF,{overlayInfo:e,imageTransform:t}));case rT.C.REQUIRE_TOP_PADDING_VARIABLES:case rT.C.REQUIRE_BOTTOM_PADDING_VARIABLES:case rT.C.REQUIRE_LEFT_PADDING_VARIABLES:case rT.C.REQUIRE_RIGHT_PADDING_VARIABLES:return n.createElement(n.Fragment,null,n.createElement(rq,{overlayInfo:e,imageTransform:t}),n.createElement(rP,{overlayInfo:e,imageTransform:t}));default:return n.createElement(rq,{overlayInfo:e,imageTransform:t})}}function rq({overlayInfo:e,imageTransform:t}){let{cornerPoints:l,absoluteTransform:r}=e;if(!l)return null;let{transformedPoints:a,width:i,height:o}=r$(l,t),{normalizedRotation:s,isFlipped:d}=rM(r),u=a.topLeft.x-2,c=a.topLeft.y-2,m=a.topLeft.x-u,p=a.topLeft.y-c,g=`translate(${u}px, ${c}px) rotate(${s}deg)${d?" scaleY(-1)":""}`;return n.createElement("div",{...er.Ay.props(rB.blueBorderHover),style:{transformOrigin:`${m}px ${p}px`,transform:g,borderWidth:2,width:i,height:o}})}var rW=l(516233);let rX=[2,3,6,13,25,50,75,100,200,300,1e3];var rK=(e=>(e.CURRENT="current",e.SUGGESTED="suggested",e))(rK||{});let rY=n.memo(function(){let{rootNodeId:e}=function(){let e=(0,E.md)(lo.E$),t=(0,E.md)(lo.Bp)??"",l=(0,n.useMemo)(()=>e&&t?e.rootNodeIdToViolatingNodeIdSet.get(t)??new Set:new Set,[t,e]);return{rootNodeId:t,violatingNodeIdSet:l,hasValidGroup:!!e}}(),t=(0,nU.ei)(e),l=(0,ls.wg)(t),r=rh("current",e,l),a=rh("suggested",e,l);return n.createElement(rQ,{nodeId:e,currentImage:r,suggestedImage:a})});function rQ({nodeId:e,currentImage:t,suggestedImage:l}){let r=(0,E.md)(lo.$H),[a,i]=function(e){let t=(0,E.md)(t9.hx);if(!e)return[[],[]];let l=(0,g.UN)(),n=t.filter(t=>t.guid===e||(0,n4.rV)(l,e,t.guid)).map(e=>({guid:e.guid,ruleId:e.ruleId})),{currentActiveToLinterGuidsMap:r,suggestedActiveToLinterGuidsMap:a}=rR(e),{currentNodeGuids:i,suggestedNodeGuids:o}=n.reduce((e,{guid:t,ruleId:l})=>{let n=r?.get(t),i=a?.get(t);return n&&e.currentNodeGuids.push({guid:n,ruleId:l}),i&&e.suggestedNodeGuids.push({guid:i,ruleId:l}),e},{currentNodeGuids:[],suggestedNodeGuids:[]});return[i,o]}(e),{current:o,suggested:s}=function(e,t,l){let n={current:null,suggested:null};if(!e)return n;let{currentActiveToLinterGuidsMap:r,currentLinterToActiveGuidsMap:a,suggestedActiveToLinterGuidsMap:i,suggestedLinterToActiveGuidsMap:o}=rR(e),[s,d]=function(e){let t=E.zl.get(t9.qL),l=t.get(r_(e,rK.CURRENT)),n=t.get(r_(e,rK.SUGGESTED));return[l?.linterGuidsToNodeInfoMap,n?.linterGuidsToNodeInfoMap]}(e),u=r?.get(e)??"-1:-1";n.current=rJ(t,u,a,s);let c=i?.get(e)??"-1:-1";return n.suggested=rJ(l,c,o,d),n}(e,a,i),d=nZ(e,nY.PREVIEW);return n.createElement(rm.o,{eventListeners:["onPointerDown"]},n.createElement("div",{...er.xk(r3.previewContainer(r?.x,r?.y))},n.createElement(r5,null),n.createElement(rp.qW,{zoomPercentageOptions:rX,zoomOnMousePointer:!0,canFitZoomExceed100:!0,resetStateOnChangeValue:e,compareThumbnailSource:rE.FO.LINTER},n.createElement(rG,{value:o},n.createElement(r1,{image:t,thumbnailType:"current",title:(0,u.t)("design_linter.preview.current"),Overlay:rH,background:d})),n.createElement(rG,{value:s},n.createElement(r1,{image:l,thumbnailType:"suggested",title:(0,u.t)("design_linter.preview.suggested"),Overlay:rH,background:d})))))}function rJ(e,t,l,n){let r=n?.get(t)?.absoluteRenderBounds;if(!r)return null;let a=[];for(let{guid:t,ruleId:i}of e){let o=n?.get(t);if(!o)continue;let{absoluteCornerPoints:s,unrotatedBoundingBox:d,childrenUnrotatedBoundingBoxesMap:u,cornerRadiusValues:c,absoluteTransform:m,stackTopPadding:p,stackBottomPadding:E,stackLeftPadding:f,stackRightPadding:x,stackSpacing:b}=o,y=d?rZ(d,r):null,h=s?{topLeft:r0(s.topLeft,r),topRight:r0(s.topRight,r),bottomLeft:r0(s.bottomLeft,r),bottomRight:r0(s.bottomRight,r)}:null,_=new Map;for(let[e,t]of u)if(t){let l=rZ(t,r);_.set(e,l)}let v=function(e,t,l){let n=(0,g.UN)(),r=l?.get(e);if(!r)return!1;for(let a of t){if(a.guid===e)continue;let t=l?.get(a.guid);if(t&&(0,n4.rV)(n,t,r))return!0}return!1}(t,e,l);a.push({guid:t,ruleId:i,isNested:v,unrotatedBounds:y,childrenUnrotatedBoundsMap:_,cornerRadiusValues:c,cornerPoints:h,absoluteTransform:m,stackTopPadding:p,stackBottomPadding:E,stackLeftPadding:f,stackRightPadding:x,stackSpacing:b})}return{overlayInfoList:a}}function rZ(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function r0(e,t){return{x:e.x-t.x,y:e.y-t.y}}function r1({image:e,thumbnailType:t,title:l,Overlay:r,background:a}){let i;let{thumbnail:o,status:s}=e,d=n.createElement("div",{className:"x78zum5 x5yr21d xh8yej3 x6s0dn4 xl56j7k x1v8gsql"},n.createElement(nG.k,{size:"md"}));return i=o&&"loaded"===s?n.createElement(rg.Nf,{image:o,paddingPixels:30,Overlay:r,customLoadingIndicator:d}):"loading"===s?d:n.createElement("div",{className:"x78zum5 x5yr21d xh8yej3 x6s0dn4 xl56j7k x1v8gsql"},(0,u.tx)("design_linter.preview.thumbnail_unavailable")),n.createElement(r2,{title:l,thumbnailType:t,background:a},i)}function r2({title:e,thumbnailType:t,children:l,background:r}){let{bg:a,type:i}=r,o=i===nQ.COLOR,s=i===nQ.IMAGE;return n.createElement("div",{...er.xk(r3.comparableContainer,"current"===t&&r3.currentContainer,"suggested"===t&&r3.suggestedContainer,s&&r3.backgroundImageContainer),style:{...o&&{backgroundColor:a},...s&&{backgroundImage:`url(${a})`}}},n.createElement("div",{className:"xuuh30 x10l6tqk x1ey2m1c x1vjfegm x87ps6o x1y1aw1k xwib8y2 x1nrll8i"},n.createElement("span",{...er.xk(r3.comparableTitle)},e)),l)}let r5=(0,n.memo)(function(){let e=(0,E.md)(lo.vu).length,t=0===(0,E.md)(rW.QU).violationCount;return n.createElement("div",{className:"x78zum5 xdt5ytf x1yjdb4r xso031l x1y0btm7 x7z60cl x1vp34bk xl56j7k xb3r6kr"},n.createElement("div",{...er.xk(r3.previewContent)},t?null:n.createElement("span",null,(0,u.tx)("design_linter.preview_header.title",{count:e}))))}),r3={previewContainer:(e,t)=>[{width:(rc.suggestionsViewWidth,"x1bl4301"),height:(rc.suggestionsModalHeaderHeight,rc.previewHeaderHeight,"x1f5funs"),borderLeftWidth:"xe0pwq",borderInlineStartWidth:null,borderInlineEndWidth:null,borderStyle:"x1y0btm7",borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:"x7z60cl",borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,$$css:!0},{"--width":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`calc(${e??915}px - ${rc.suggestionsViewWidth})`),"--height":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(`calc(${t??540}px - ${rc.suggestionsModalHeaderHeight} - ${rc.previewHeaderHeight})`)}],comparableTitle:{...eE.g.textBodySmall,color:"x1n0bwc9",textAlign:"x2b8uid",backgroundColor:"x1v8gsql",padding:"x9cpjcd",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,borderRadius:"xur7f20",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},comparableContainer:{position:"x10l6tqk",width:"x3hqpx7",display:"x3nfvp2",flexDirection:"xdt5ytf",height:"x5yr21d",overflow:"xb3r6kr",overflowX:null,overflowY:null,flexGrow:"x1iyjqo2",$$css:!0},currentContainer:{left:"xu96u03",insetInlineStart:null,insetInlineEnd:null,$$css:!0},suggestedContainer:{right:"x3m8u43",insetInlineStart:null,insetInlineEnd:null,borderLeftWidth:"xe0pwq",borderInlineStartWidth:null,borderInlineEndWidth:null,borderStyle:"x1y0btm7",borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:"x7z60cl",borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,$$css:!0},backgroundImageContainer:{backgroundRepeat:"xiy17q3",backgroundSize:"x18d0r48",backgroundPosition:"x1xsqp64",backgroundPositionX:null,backgroundPositionY:null,backgroundColor:"x1v8gsql",$$css:!0},previewContent:{...eE.g.textBodyMedium,userSelect:"x87ps6o",padding:"xiqviz9",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,display:"x78zum5",whiteSpace:"xuxw1ft",overflow:"xb3r6kr",overflowX:null,overflowY:null,textOverflow:"xlyipyv",$$css:!0}};var r4=l(9106);let r8=["RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS","RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS","RECTANGLE_TOP_LEFT_CORNER_RADIUS","RECTANGLE_TOP_RIGHT_CORNER_RADIUS","STACK_SPACING_HORIZONTAL","STACK_SPACING_VERTICAL","STACK_PADDING_TOP","STACK_PADDING_BOTTOM","STACK_PADDING_LEFT","STACK_PADDING_RIGHT"];var r6=l(389541),r7=l(992288),r9=l(900980),ae=l(180294),at=l(474132),al=l(17753),an=l(921666),ar=l(713196),aa=l(491383),ai=l(833420),ao=l(434328),as=l(340401),ad=l(113752);function au(e){let[t,l]=(0,n.useState)("idle");return{applyFixToBlock:(0,n.useCallback)(()=>{"running"!==t&&(l("running"),setTimeout(async()=>{try{let t;let n=(0,t7.r)();if(!n)throw Error("Design linter not available");let r=0,a=0,i=0,o=E.zl.get(lo.$C),s=[];for(let l in e){let n=e[l]??[],d=o?.get(l);if(!d?.fix?.fixContext){i++;continue}t=d.fix.ruleId,r+=n.length,a++,s.push({violations:n,fixContext:d.fix.fixContext})}await n.applyFixContextToViolations(s),l("applied"),(0,n_.DC)(r,a,i,t)}catch{(0,ls.Lt)((0,u.t)("design_linter.penalty_box.fix_failed_bell"),ad.zX.EXCLAMATION,"fix error"),(0,n_.av)(),l("error")}},0))},[t,e]),isApplying:"running"===t}}function ac(e){let t=(0,E.md)(lo.$C);return t?.get(e)??{fix:null,status:"loading"}}function am(e){return(0,E.md)(t9.VG).get(e)??{fix:null,status:"loading"}}var ap=l(139356);function ag({ignoreViolationRow:e}){return n.createElement(tm.K,{htmlAttributes:{"data-tooltip-type":al.Ib.TEXT,"data-tooltip":(0,u.t)("design_linter.penalty_box.ignore_suggestion_tooltip")},onClick:e,"aria-label":(0,u.t)("design_linter.penalty_box.ignore_suggestion_aria")},n.createElement(tp.A,null))}function aE({ignoreViolationRow:e}){return n.createElement(lu.$n,{variant:"secondary",onClick:e},(0,u.tx)("general.ignore"))}function af({applyFixToRow:e}){return n.createElement(tm.K,{htmlAttributes:{"data-tooltip-type":al.Ib.TEXT,"data-tooltip":(0,u.t)("design_linter.penalty_box.apply_suggestion_tooltip")},onClick:e,"aria-label":(0,u.t)("design_linter.penalty_box.apply_suggestion_tooltip")},n.createElement(ap.r,null))}let ax="suggestion_rule_blocks--chit--zCpjn";function ab({blockConfig:e,children:t,icon:l,violationsByGroupKey:r}){let{getLabel:a,id:i}=e,{applyFixToBlock:o,isApplying:s}=au(r),{ignoreRowsWithNoSuggestions:d}=function(e){let[t,l]=(0,n.useState)("idle");return{ignoreRowsWithNoSuggestions:(0,n.useCallback)(()=>{if("running"!==t)try{let t;l("running");let n=(0,t7.r)();if(!n)return;let r=0,a=0,i=0,o=E.zl.get(lo.$C);for(let[l,s]of Object.entries(e)){let e=o?.get(l);if(e?.fix?.fixContext){i++;continue}t=e?.fix?.ruleId,r++,a+=s.length;let d=s.map(e=>e.guid);n.ignoreViolationsForGuidsWithGroupKey(d,l)}l("applied"),(0,n_.h5)(r,a,i,t)}catch{l("error"),(0,n_.Gj)()}},[t,e]),status:t}}(r),u=function(e){let t=(0,E.md)(lo.$C);return(Object.keys(e)||[]).every(e=>{let l=t?.get(e);return l?.status!=="loading"})}(r),c=function(e){let t=(0,E.md)(lo.$C);return(Object.keys(e)||[]).every(e=>{let l=t?.get(e);return!l?.fix?.fixContext&&l?.status!=="loading"})}(r),[m,p]=(0,n.useState)(!1),g=(0,n.useCallback)(()=>{if(!m){p(!0);try{d()}catch(e){p(!1)}}},[m,d]);return!r||0===Object.keys(r).length||m?null:n.createElement(aL,{key:i,label:a(),isApplying:s,isReady:u,onApply:o,onIgnore:g,shouldShowIgnore:c,icon:l},t(s))}function ay({applyFixToRow:e,children:t,fixStatus:l,isApplying:r,showHover:a,ignoreViolationRow:i}){let o="loaded"===l;return n.createElement("div",{...er.Ay.props(a$.violationRowContainer,a&&a$.hoveredViolationRowContainer)},n.createElement("div",{...er.Ay.props(a$.violationRowContent,a&&a$.hoveredViolationRow)},n.createElement("div",{...er.Ay.props(a$.currentValueContainer)},n.createElement("div",{...er.Ay.props(a$.currentValueContent,r&&a$.colorTextTertiary)},t.currentValue),n.createElement("div",{className:"x78zum5 x6s0dn4 xl56j7k xvy4d1p xxk0z11"},n.createElement(an.o,{className:"xe5c7bq"}))),n.createElement(a_,{fixStatus:l},n.createElement(n.Fragment,null,n.createElement("div",{...er.Ay.props(a$.suggestedValueSizer,a&&a$.hoveredSuggestedValueSizer(o))},t.suggestedValue),a?n.createElement(n.Fragment,null,n.createElement(ag,{ignoreViolationRow:i}),o?n.createElement(af,{applyFixToRow:e}):null):null))))}function ah({children:e,fixStatus:t,groupKey:l,violations:r,isApplying:a}){let[i,o]=(0,n.useState)(!1),[s,d]=(0,n.useState)(!1),c=(0,E.md)(lo.E7),m=(0,n.useCallback)(()=>{if(!i){o(!0);try{let e=r.map(e=>e.guid);t7.r()?.ignoreViolationsForGuidsWithGroupKey(e,l);let t=c[l];(0,n_.dg)(e.length,t?.ruleId)}catch(e){o(!1)}}},[r,l,c,i]),{applyFixToRow:p,isApplying:g}=function(e,t){let[l,r]=(0,n.useState)("idle");return{applyFixToRow:(0,n.useCallback)(()=>{"running"!==l&&(r("running"),setTimeout(async()=>{let l=e[0]?.ruleId;try{let l=(0,t7.r)();if(!l)throw Error("Design linter not available");let n=E.zl.get(lo.$C),a=[],i=n?.get(t);if(!i?.fix?.fixContext)throw Error("No fix context available");a.push({violations:e,fixContext:i.fix.fixContext}),await l.applyFixContextToViolations(a),r("applied"),(0,n_.lX)(e.length,i.fix.ruleId)}catch{(0,ls.Lt)((0,u.t)("design_linter.penalty_box.fix_failed_bell"),ad.zX.EXCLAMATION,"fix error"),(0,n_.Yu)(l),r("error")}},0))},[l,e,t]),isApplying:"running"===l}}(r,l);return!r||0===r.length||i||g?null:n.createElement(n.Fragment,null,n.createElement("div",{onMouseEnter:()=>{d(!0),E.zl.set(t9.hx,r)},onMouseLeave:()=>{d(!1),E.zl.set(t9.hx,[])}},e.suggestionRowContent({showHover:s&&!a,isApplying:a,ignoreViolationRow:m,fixStatus:t,applyFixToRow:p})))}function a_({fixStatus:e,children:t}){return"loading"===e?n.createElement("div",{className:"x19y5rnk x7z60cl xmkeg23 x1y0btm7 x1yjdb4r xxbzjz2 x1l2q4c8 x78zum5 x6s0dn4"},n.createElement(nd.Wi,{className:"x5yr21d xh8yej3",opacity:33,animationType:nd.JR.SHIMMER})):n.createElement("div",{className:"xxbzjz2 x1l2q4c8 x78zum5 x6s0dn4 x1jnr06f"},t)}let av=n.forwardRef(function({onClick:e,type:t},l){return n.createElement(aw,{ref:l,onClick:e},e=>n.createElement("div",{...er.Ay.props(a$.noSuggestionFound(e))},n.createElement(ak,{type:t,isHovered:e})))});function ak({type:e,isHovered:t}){let l=(0,u.t)("design_linter.penalty_box.no_suggestion_found");return e===as.kQ.TEXT?l=(0,u.t)("design_linter.suggestion_block.select_style"):(e===as.kQ.COLOR||e===as.kQ.NUMBER)&&(l=(0,u.t)("design_linter.suggestion_block.select_variable")),n.createElement(n.Fragment,null,n.createElement(aS,{type:e,isHovered:t}),n.createElement(nn.G,{text:l}))}function aS({type:e,isHovered:t}){return e===as.kQ.COLOR?n.createElement(aR,{isHovered:t}):e===as.kQ.TEXT?n.createElement(aT,null):e===as.kQ.NUMBER?n.createElement(aI,null):n.createElement(aO,null,n.createElement(ar.Z,null))}function aR({isHovered:e}){return n.createElement(aO,null,n.createElement(ao.J,{color:(0,ai.E2)(e?"#D9D9D9":"#F5F5F5"),className:ax}))}function aT(){return n.createElement(aO,null,n.createElement("div",{...er.Ay.props(a$.textIcon)},"Ag"))}function aI(){return n.createElement(aO,null,n.createElement(r4.c,null))}function aC({label:e,value:t,isApplying:l}){let r=void 0!==t;return n.createElement("span",{...er.Ay.props(a$.selectedSuggestion,r&&a$.selectedSuggestionWithValue),"data-tooltip":e,"data-tooltip-type":al.Ib.TEXT},n.createElement("div",{...er.Ay.props(a$.labelText,l&&a$.colorTextTertiary)},e),r&&n.createElement("div",{...er.Ay.props(a$.valueText,l&&a$.colorTextTertiary)},t))}let aw=n.forwardRef(function({children:e,onClick:t,tooltip:l,disabled:r=!1},a){let[i,o]=(0,nj.M)();return n.createElement("div",{ref:e=>{i(e),a&&("function"==typeof a?a(e):a.current=e)},...er.Ay.props(a$.suggestedValueContent,o&&a$.hoveredSuggestedValueContent)},n.createElement(ly.E,{onClick:t,className:"x78zum5 x6s0dn4 xjbqb8w xh8yej3 x1l2q4c8 xmzs88n x98rzlu","data-tooltip":l,"data-tooltip-type":al.Ib.TEXT,disabled:r},e(o)))});function aL({children:e,label:t,icon:l,isApplying:r,isReady:a,onApply:i,onIgnore:o,shouldShowIgnore:s}){return n.createElement("div",{className:"x78zum5 xdt5ytf x87ps6o"},n.createElement("div",{...er.Ay.props(a$.headerRow,!!l&&a$.iconAndHeaderRow)},n.createElement("div",{className:"x78zum5 x6s0dn4 x1jnr06f"},l&&n.createElement("div",{className:"x78zum5 x6s0dn4 xl56j7k xlup9mm x1kky2od"},l),n.createElement("div",{...er.Ay.props(a$.titleContent)},t)),n.createElement(aA,{label:"string"==typeof t?t:"",onApply:i,onIgnore:o,isApplying:r,isReady:a,shouldShowIgnore:s})),e)}function aA({label:e,isApplying:t,isReady:l,onApply:r,onIgnore:a,shouldShowIgnore:i}){return l?i?n.createElement(ly.E,{...er.Ay.props(a$.blockActionButton),onClick:a,"data-tooltip":(0,u.t)("design_linter.suggestion_block.ignore_tooltip",{section:e.toLowerCase()}),"data-tooltip-type":al.Ib.TEXT},(0,u.t)("general.ignore")):n.createElement(ly.E,{...er.Ay.props(a$.blockActionButton,t&&a$.blockActionButtonDisabled),onClick:r,"data-tooltip":(0,u.t)("design_linter.suggestion_block.apply_tooltip",{section:e.toLowerCase()}),"data-tooltip-type":al.Ib.TEXT,disabled:t},t?n.createElement(nG.k,{size:"sm"}):null,(0,u.t)("design_linter.suggestion_block.apply")):n.createElement("div",{...er.Ay.props(a$.blockActionButton,a$.blockActionButtonLoading,a$.blockActionButtonDisabled)},n.createElement(nG.k,{size:"sm"}),(0,u.t)("design_linter.suggestion_block.loading"))}function aN(){return n.createElement("div",{className:"xjm9jq1 xbpqucl x1xpthql"})}function aO({children:e,isDisabled:t}){return n.createElement("div",{...er.Ay.props(a$.suggestedValueIconContainer,t&&a$.suggestedValueIconDisabled)},e)}let a$={headerRow:{display:"x78zum5",height:"x10w6t97",justifyContent:"x1qughib",padding:"x1rrr4bg",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,$$css:!0},iconAndHeaderRow:{paddingLeft:"xf18ygs",paddingInlineStart:null,paddingInlineEnd:null,$$css:!0},titleContent:{...eE.g.textBodyMedium,display:"x78zum5",$$css:!0},suggestedValueIconContainer:{display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",height:"xxk0z11",width:"xvy4d1p",minWidth:"xnei2rj",$$css:!0},suggestedValueIconDisabled:{opacity:"x1ksfsxq",$$css:!0},blockActionButton:{...eE.g.textBodyMedium,color:"x1quhyk7",marginLeft:"x1iog12x",marginInlineStart:null,marginInlineEnd:null,gap:"xg2d0mh",rowGap:null,columnGap:null,$$css:!0},blockActionButtonLoading:{display:"x78zum5",alignItems:"x6s0dn4",$$css:!0},blockActionButtonDisabled:{color:"x1n0bwc9",$$css:!0},violationRowContainer:{display:"x78zum5",height:"x10w6t97",paddingRight:"xy13l1i",paddingLeft:"x163pfp",paddingInlineStart:null,paddingInlineEnd:null,$$css:!0},hoveredViolationRowContainer:{paddingRight:"xy13l1i",paddingInlineStart:null,paddingInlineEnd:null,$$css:!0},hoveredViolationRow:{backgroundColor:"x30nh5c",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},violationRowContent:{display:"x78zum5",alignItems:"x6s0dn4",borderRadius:"x192jxwq",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,padding:"xfawy5m",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,width:"x5c4s84",gap:"x167g77z",rowGap:null,columnGap:null,$$css:!0},currentValueContainer:{...eE.g.textBodyMedium,display:"x78zum5",color:"x1n0bwc9",alignItems:"x6s0dn4",$$css:!0},currentValueContent:{textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",overflow:"xb3r6kr",overflowX:null,overflowY:null,padding:"xehqz9p",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,width:"x29ncy0",minWidth:"xwrg52n",$$css:!0},suggestedValueContent:{width:"xh8yej3",minWidth:"xgqtt45",display:"x78zum5",alignItems:"x6s0dn4",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,borderColor:"x7z60cl",borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,userSelect:"x87ps6o",borderWidth:"xmkeg23",borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:"x1y0btm7",borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,backgroundColor:"x1yjdb4r",flex:"x98rzlu",flexGrow:null,flexShrink:null,flexBasis:null,$$css:!0},hoveredSuggestedValueContent:{backgroundColor:"x1oqziki",$$css:!0},suggestedValueSizer:{width:"xxbzjz2",height:"x1l2q4c8",display:"x78zum5",alignItems:"x6s0dn4",$$css:!0},hoveredSuggestedValueSizer:e=>[{width:"x1bl4301",minWidth:"x1eqyben",$$css:!0},{"--width":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e?"132px":"162px"),"--minWidth":(e=>"number"==typeof e?e+"px":null!=e?e:void 0)(e?"132px":"162px")}],selectedSuggestion:{...eE.g.textBodyMedium,display:"xrvj5dj",gridTemplateColumns:"xju1xpo",width:"xh8yej3",userSelect:"x87ps6o",$$css:!0},selectedSuggestionWithValue:{gap:"x167g77z",rowGap:null,columnGap:null,$$css:!0},labelText:{textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",overflow:"xb3r6kr",overflowX:null,overflowY:null,$$css:!0},valueText:{color:"x1n0bwc9",$$css:!0},noSuggestionFound:e=>[{display:"x78zum5",alignItems:"x6s0dn4",color:(e?aa.Tj.textSecondary:aa.Tj.textTertiary)==null?null:"xfx01vb","--color-icon":(e?aa.Tj.iconSecondary:aa.Tj.iconTertiary)==null?null:"xhxir3b",flex:"x98rzlu",flexGrow:null,flexShrink:null,flexBasis:null,$$css:!0},{"--color":(e?aa.Tj.textSecondary:aa.Tj.textTertiary)!=null?e?aa.Tj.textSecondary:aa.Tj.textTertiary:void 0,"----color-icon":(e?aa.Tj.iconSecondary:aa.Tj.iconTertiary)!=null?e?aa.Tj.iconSecondary:aa.Tj.iconTertiary:void 0}],colorTextTertiary:{color:"x3vvef7",$$css:!0},textIcon:{...eE.g.textBodyMediumStrong,$$css:!0}};var aM=l(693964),aB=l(301249),az=l(577972);function aV({items:e}){return n.createElement("div",{className:"x78zum5 xdt5ytf"},e.map((e,t)=>e?n.createElement(n.Fragment,{key:t},t>0?n.createElement(aN,null):null,n.createElement("div",null,e)):null))}function aP(){let{blocks:e,totalViolations:t}=(0,E.md)(rW.LG),l=(0,n.useMemo)(()=>{let t=e.flatMap(e=>Object.entries(e.violationsByGroupKey).flatMap(([t,l])=>l.map(l=>({groupKey:t,violation:l,blockConfig:e.blockConfig})))).reduce((e,{blockConfig:t,groupKey:l,violation:n})=>{let{detectionContext:r}=n;if(!r||!("libraryKey"in r))return e;let a=((e,t)=>{let l=["FRAME","TEXT"].includes(e)?n.nodeType:"SHAPE";return["RECTANGLE_TOP_LEFT_CORNER_RADIUS","RECTANGLE_TOP_RIGHT_CORNER_RADIUS","RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS","RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS"].includes(t)?"SHAPE-CORNER_RADIUS":["STACK_PADDING_LEFT","STACK_PADDING_RIGHT","STACK_PADDING_TOP","STACK_PADDING_BOTTOM"].includes(t)?`${l}-PADDING`:`${l}-${t}`})(n.nodeType,r.assetType),i=r.libraryKey;return e[i]||(e[i]={blockConfig:t,violationsByType:{"FRAME-FILL":{violationLists:[],violationsByGroupKey:{}},"FRAME-STROKE":{violationLists:[],violationsByGroupKey:{}},"FRAME-STACK_SPACING_HORIZONTAL":{violationLists:[],violationsByGroupKey:{}},"FRAME-STACK_SPACING_VERTICAL":{violationLists:[],violationsByGroupKey:{}},"FRAME-PADDING":{violationLists:[],violationsByGroupKey:{}},"TEXT-FILL":{violationLists:[],violationsByGroupKey:{}},"TEXT-STROKE":{violationLists:[],violationsByGroupKey:{}},"SHAPE-FILL":{violationLists:[],violationsByGroupKey:{}},"SHAPE-STROKE":{violationLists:[],violationsByGroupKey:{}},"SHAPE-COMPONENT":{violationLists:[],violationsByGroupKey:{}},"SHAPE-CORNER_RADIUS":{violationLists:[],violationsByGroupKey:{}}}}),e[i].violationsByType[a]&&(e[i].violationsByType[a].violationsByGroupKey[l]||(e[i].violationsByType[a].violationsByGroupKey[l]=[],e[i].violationsByType[a].violationLists.push({groupKey:l,violation:n})),e[i].violationsByType[a].violationsByGroupKey[l].push(n)),e},{});return Object.keys(t).sort().map(e=>({id:e,libraryKey:e,blockConfig:t[e].blockConfig,violationsByType:t[e].violationsByType}))},[e]);return t?n.createElement(aV,{items:l.map(({id:e,libraryKey:t,blockConfig:l,violationsByType:r})=>n.createElement(aF,{blockConfig:{...l,getLabel:()=>(0,u.tx)("design_linter.suggestion_block.assets_outside_selected_libraries",{name:n.createElement(aD,{libraryKey:t})})},key:e,title:(0,u.tx)("design_linter.suggestion_block.assets_outside_selected_libraries",{name:n.createElement(aD,{libraryKey:t})}),violationsByType:r}))}):null}function aF({blockConfig:e,title:t,violationsByType:l}){let r=(0,n.useMemo)(()=>Object.entries(l).filter(([e,{violationLists:t}])=>t.length>0).map(([e,{violationLists:t,violationsByGroupKey:l}])=>{let r={violationLists:t,violationsByGroupKey:l,icon:n.createElement(aB.E,null)};switch(e){case"FRAME-FILL":return{...r,key:"frameFill",priority:1,label:(0,u.t)("design_linter.suggestion_block.fill_colors.background_colors")};case"FRAME-STROKE":return{...r,key:"frameStroke",priority:2,label:(0,u.t)("design_linter.suggestion_block.stroke_colors.stroke_color")};case"SHAPE-FILL":return{...r,key:"shapeFill",priority:3,label:(0,u.t)("design_linter.suggestion_block.fill_colors.shape_colors")};case"SHAPE-STROKE":return{...r,key:"shapeStroke",priority:4,label:(0,u.t)("design_linter.suggestion_block.stroke_colors.shape_stroke_colors")};case"TEXT-FILL":return{...r,key:"textFill",priority:5,label:(0,u.t)("design_linter.suggestion_block.fill_colors.text_color")};case"TEXT-STROKE":return{...r,key:"textStroke",priority:6,label:(0,u.t)("design_linter.suggestion_block.stroke_colors.text_stroke_color")};case"SHAPE-CORNER_RADIUS":return{...r,key:"shapeCornerRadius",icon:n.createElement(r4.c,null),priority:7,label:(0,u.t)("design_linter.suggestion_block.corner_radius")};case"FRAME-STACK_SPACING_HORIZONTAL":return{...r,key:"frameStackSpacingHorizontal",icon:n.createElement(r4.c,null),priority:8,label:(0,u.t)("design_linter.suggestion_block.horizontal_spacing")};case"FRAME-STACK_SPACING_VERTICAL":return{...r,key:"frameStackSpacingVertical",icon:n.createElement(r4.c,null),priority:9,label:(0,u.t)("design_linter.suggestion_block.vertical_spacing")};case"FRAME-PADDING":return{...r,key:"framePadding",icon:n.createElement(r4.c,null),priority:10,label:(0,u.t)("design_linter.suggestion_block.padding")};case"SHAPE-COMPONENT":return{...r,key:"component",icon:n.createElement(az.k,null),priority:11,label:(0,u.t)("design_linter.suggestion_block.library_assets.components")};default:return null}}).filter(e=>null!==e).sort((e,t)=>e.priority-t.priority),[l]);return n.createElement(n.Fragment,null,n.createElement("div",{className:"x1rrr4bg x87ps6o"},n.createElement("div",{...er.Ay.props(aK.titleContent)},t)),n.createElement("div",{className:"x78zum5 x6s0dn4 x10w6t97 x1qughib x1n0bwc9 x1rrr4bg"},(0,u.t)("design_linter.suggestion_block.assets_outside_selected_libraries.instructions")),r.map(t=>n.createElement(ab,{blockConfig:{...e,getLabel:()=>t.label},icon:t.icon,key:t.key,violationsByGroupKey:t.violationsByGroupKey},e=>n.createElement(aH,{violationLists:t.violationLists,violationsByGroupKey:t.violationsByGroupKey,isApplying:e}))))}function aD({libraryKey:e}){let{subscribedLibraries:t,usedInFileLibraries:l}=l7(),r="loaded"===t.status?t.data.find(t=>t.library_key===e):void 0,a="loaded"===l.status?l.data.find(t=>t.library_key===e):void 0,i=r?.library_name||a?.library_name;return i?n.createElement(aG,{libraryName:i,libraryKey:e}):null}function aG({libraryName:e,libraryKey:t}){let l=(0,ae.sZ)(),r=(0,at.Oe)(l),a=(0,r6.fV)(t),i=(0,E.md)(aM.V9),o=t?i[t]?.hubFileId??null:null;return n.createElement(n.Fragment,null,n.createElement("span",{className:"x10gc95e"},e),r&&a&&n.createElement(r7.KP,{libraryKey:t}),o&&n.createElement(r9.E,{libraryKey:t,showTooltip:!0}))}function aH({violationLists:e,isApplying:t,violationsByGroupKey:l}){return n.createElement(n.Fragment,null,e.map(({groupKey:e,violation:r})=>{let{detectionContext:a}=r;return a&&"assetType"in a?n.createElement(aU,{key:e,groupKey:e,violations:l[r.groupKey]??[],ruleId:r.ruleId,isApplying:t}):null}))}function aU({groupKey:e,violations:t,ruleId:l,isApplying:r}){let a=t[0],{fix:i,status:o}=ac(e);if(!a?.detectionContext)return null;let{detectionContext:s,guid:d}=a;if(!("assetType"in s))return null;let u="COMPONENT"===s.assetType,c=r8.includes(s.assetType);return n.createElement(ah,{fixStatus:o,groupKey:e,violations:t,isApplying:r},{suggestionRowContent:t=>u?n.createElement(aq,{context:s,ignoreViolationRow:t.ignoreViolationRow,showHover:t.showHover}):n.createElement(ay,{...t},{currentValue:n.createElement(aj,{context:s}),suggestedValue:c?n.createElement(aW,{fix:i,groupKey:e,ruleId:l,violatingNodeId:d,assetType:s.assetType,isApplying:r}):n.createElement(aX,{fix:i,groupKey:e,ruleId:l,violatingNodeId:d,assetType:s.assetType,isApplying:r})})})}function aj({context:e}){let t=(0,E.md)(t9.nE);if(!e)return null;let{assetId:l}=e,r=t[l];if(!r)return null;let a=`${r.name}`;return n.createElement("span",{"data-tooltip":a,"data-tooltip-type":al.Ib.TEXT},a)}function aq({context:e,ignoreViolationRow:t,showHover:l}){let r=(0,lw.eS)(lw.aD.CURRENT),{assetId:a}=e;if(!r[a])return null;let i=r[a];return n.createElement("div",{className:"x78zum5 x163pfp xnuq7ks xng8ra"},n.createElement("div",{...er.Ay.props(aK.componentDataContainer,l&&aK.hoveredComponentDataContainer)},n.createElement("div",{className:"x6s0dn4 xkawg4k xsb15dp x1sxf85j x78zum5 x2lah0s xl56j7k xyo1k6t x187nhsf xn3w4p2"},n.createElement(e7.oW,{alt:i.name,src:i.thumbnail_url,className:"xq8v1hd xdnzh0y"})),n.createElement("span",{className:"x1iyjqo2 xb3r6kr xlyipyv xuxw1ft x1nx2rwh","data-tooltip":i.name,"data-tooltip-type":al.Ib.TEXT},i.name),l?n.createElement("div",{className:"x8x9d4c x17ituo4 x2lah0s"},n.createElement(aE,{ignoreViolationRow:t})):null))}function aW({ruleId:e,fix:t,groupKey:l,violatingNodeId:r,assetType:a,isApplying:o}){let{fixContext:s,valid:d}=t??{},c=(0,n.useRef)(null),m=lq(),[p,g]=(0,E.fp)(lF),f=(0,E.Xr)(lP),x=(0,E.Xr)(lM),b=(0,E.Xr)(lB),y=(0,E.Xr)(lz),{fix:h}=am(l),{fixContext:_}=h??{},v=s?.fixes,k=_?.fixes,S=(0,lH.d$)(e,a),{fixes:R,listItems:T,allResolvedVariables:I,variableMap:C}=lU({selectedFixes:v?.fixes??[],cachedFixes:(k?.fixes??[]).slice(0,3),violatingNodeId:r,type:i.rXF.FLOAT,scopes:S}),w=(0,n.useMemo)(()=>{if(!v?.fixes.length)return R[0];let e=v?.fixes[0]?.variableId;if(!e||!I)return R[0];let t=I.libraryVariables[e]?.resolvedValue??I.localVariables[e]?.resolvedValue;return t?{variableId:e,resolvedValue:t}:R[0]},[v,I,R]),L=(0,n.useCallback)(e=>!!(e?.id&&v?.fixes.length)&&e.id===v?.fixes[0]?.variableId,[v]),A=(0,n.useCallback)(t=>{if(!I||!e)return;let n=I.libraryVariables[t]?.resolvedValue??I.localVariables[t]?.resolvedValue;if(!n)return;let a={...s,fixes:{suggestionId:(0,lI.g)(),fixes:[{variableId:t,resolvedValue:n}]}};E.zl.set(lo.Sg,{groupKey:l,selectedFixItem:{fix:{ruleId:e,guid:r??"",valid:!0,fixContext:a},status:"loaded"}})},[I,e,l,r,s]),N=(0,n.useCallback)(()=>{let e=!!p?.current&&!!c.current,t=p?.current===c.current;if(e&&t){m();return}g(c),f(!0),y(()=>L),b(()=>A),x({title:(0,u.t)("design_linter.rules.number_rules.dropdown_title"),emptyLabel:"",display:"LIST",items:T})},[p,g,f,y,L,b,A,x,T,m]);if(!t||!d||!s||!R||0===R.length||!w||!r)return n.createElement(av,{ref:c,onClick:N,type:as.kQ.NUMBER});let{variableId:O,resolvedValue:$}=w,M=(C??{})[O]?.name,B=$.value;return B&&M?n.createElement(aw,{ref:c,onClick:N,tooltip:M,disabled:o},()=>n.createElement(n.Fragment,null,n.createElement(aO,{isDisabled:o},n.createElement(r4.c,null)),n.createElement(aC,{label:M,value:B,isApplying:o}))):n.createElement(av,{ref:c,onClick:N,type:as.kQ.NUMBER})}function aX({ruleId:e,fix:t,groupKey:l,violatingNodeId:r,assetType:a,isApplying:o}){let{fixContext:s,valid:d}=t??{},c=(0,n.useRef)(null),m=lq(),[p,g]=(0,E.fp)(lF),f=(0,E.Xr)(lP),x=(0,E.Xr)(lM),b=(0,E.Xr)(lB),y=(0,E.Xr)(lz),{fix:h}=am(l),{fixContext:_}=h??{},v=s?.fixes,k=_?.fixes,S=(0,lH.d$)(e,a),{fixes:R,listItems:T,allResolvedVariables:I,variableMap:C}=lU({selectedFixes:v?.fixes??[],cachedFixes:(k?.fixes??[]).slice(0,3),violatingNodeId:r,type:i.rXF.COLOR,scopes:S}),w=(0,n.useMemo)(()=>{if(!v?.fixes.length)return R[0];let e=v?.fixes[0]?.variableId;if(!e||!I)return R[0];let t=I.libraryVariables[e]?.resolvedValue??I.localVariables[e]?.resolvedValue;return t?{variableId:e,resolvedValue:t}:R[0]},[v,I,R]),L=(0,n.useCallback)(e=>!!(e?.id&&v?.fixes.length)&&e.id===v?.fixes[0]?.variableId,[v]),A=(0,n.useCallback)(t=>{if(!I||!e)return;let n=I.libraryVariables[t]?.resolvedValue??I.localVariables[t]?.resolvedValue;if(!n)return;let a={...s,fixes:{suggestionId:(0,lI.g)(),fixes:[{variableId:t,resolvedValue:n}]}};E.zl.set(lo.Sg,{groupKey:l,selectedFixItem:{fix:{ruleId:e,guid:r??"",valid:!0,fixContext:a},status:"loaded"}})},[I,e,s,l,r]),N=(0,n.useCallback)(()=>{let e=!!p?.current&&!!c.current,t=p?.current===c.current;if(e&&t){m();return}g(c),f(!0),y(()=>L),b(()=>A),x({title:(0,u.t)("design_linter.rules.color_rules.dropdown_title"),emptyLabel:"",display:"LIST",items:T})},[p,g,f,y,L,b,A,x,T,m]);if(!t||!d||!s||!R||0===R.length||!w||!r)return n.createElement(av,{ref:c,onClick:N,type:as.kQ.COLOR});let{variableId:O,resolvedValue:$}=w,M=(C??{})[O]?.name,B=$.value;return B&&M?n.createElement(aw,{ref:c,onClick:N,tooltip:M,disabled:o},()=>n.createElement(n.Fragment,null,n.createElement(aO,{isDisabled:o},n.createElement(ao.J,{color:B,opacity:B.a,className:tE()(ax)})),n.createElement(aC,{label:M,isApplying:o}))):n.createElement(av,{ref:c,onClick:N,type:as.kQ.COLOR})}let aK={titleContent:{...eE.g.textBodyMedium,display:"x78zum5",alignItems:"x6s0dn4",height:"x10w6t97",$$css:!0},componentDataContainer:{display:"x78zum5",alignItems:"x6s0dn4",borderRadius:"x192jxwq",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,padding:"x1d4th4m",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,width:"x1yinuae",$$css:!0},hoveredComponentDataContainer:{backgroundColor:"x30nh5c",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0}};var aY=l(632727),aQ=l(372566);function aJ(){let{blocks:e,totalViolations:t}=(0,E.md)(rW.r0);return t?n.createElement(aV,{items:e.map(({blockConfig:e,violationsByGroupKey:t})=>n.createElement(ab,{blockConfig:e,icon:n.createElement(aB.E,null),key:e.id,violationsByGroupKey:t},e=>n.createElement(n.Fragment,null,Object.entries(t).map(([t,l])=>{let r=l[0];return n.createElement(aZ,{key:t,violations:l,groupKey:t,ruleId:r?.ruleId,isApplying:e})}))))}):null}function aZ({groupKey:e,violations:t,ruleId:l,isApplying:r}){let a=t[0],{fix:i,status:o}=ac(e);if(!a?.detectionContext)return null;let{detectionContext:s,guid:d}=a;return n.createElement(ah,{fixStatus:o,groupKey:e,violations:t,isApplying:r},{suggestionRowContent:t=>n.createElement(ay,{...t},{currentValue:n.createElement(a0,{context:s}),suggestedValue:n.createElement(a1,{fix:i,groupKey:e,ruleId:l,violatingNodeId:d,isApplying:r})})})}function a0({context:e}){if(!e)return null;let t=e.color,l=e.opacity,r=`${aY.z5.format(t)}${l&&l<1?` \xb7 ${function(e){let t=new aQ.t6({min:0,max:100});return`${t.format(100*e)}%`}(l)}`:""}`;return n.createElement("span",{"data-tooltip":r,"data-tooltip-type":al.Ib.TEXT},r)}function a1({ruleId:e,fix:t,groupKey:l,violatingNodeId:r,isApplying:a}){let{fixContext:o,valid:s}=t??{},d=(0,n.useRef)(null),c=lq(),[m,p]=(0,E.fp)(lF),g=(0,E.Xr)(lP),f=(0,E.Xr)(lM),x=(0,E.Xr)(lB),b=(0,E.Xr)(lz),{fix:y}=am(l),{fixContext:h}=y??{},_=o?.fixes,v=h?.fixes,k=(0,lH.d$)(e),{fixes:S,listItems:R,allResolvedVariables:T,variableMap:I}=lU({selectedFixes:_??[],cachedFixes:(v??[]).slice(0,3),violatingNodeId:r,type:i.rXF.COLOR,scopes:k}),C=(0,n.useMemo)(()=>{if(!_?.length)return S[0];let e=_[0]?.variableId;if(!e||!T)return S[0];let t=T.libraryVariables[e]?.resolvedValue??T.localVariables[e]?.resolvedValue;return t?{variableId:e,resolvedValue:t}:S[0]},[_,T,S]),w=(0,n.useCallback)(e=>!!(e?.id&&_?.length)&&e.id===_[0]?.variableId,[_]),L=(0,n.useCallback)(t=>{if(!T||!e)return;let n=T.libraryVariables[t]?.resolvedValue??T.localVariables[t]?.resolvedValue;if(!n)return;let a={...o,fixes:[{variableId:t,resolvedValue:n}]};E.zl.set(lo.Sg,{groupKey:l,selectedFixItem:{fix:{ruleId:e,guid:r??"",valid:!0,fixContext:a},status:"loaded"}})},[T,e,l,r,o]),A=(0,n.useCallback)(()=>{let e=!!m?.current&&!!d.current,t=m?.current===d.current;if(e&&t){c();return}p(d),g(!0),b(()=>w),x(()=>L),f({title:(0,u.t)("design_linter.rules.color_rules.dropdown_title"),emptyLabel:"",display:"LIST",items:R})},[m,p,g,b,w,x,L,f,R,c]);if(!t||!s||!o||!S||0===S.length||!C||!r)return n.createElement(av,{ref:d,onClick:A,type:as.kQ.COLOR});let{variableId:N,resolvedValue:O}=C,$=(I??{})[N]?.name,M=O.value;return M&&$?n.createElement(aw,{ref:d,onClick:A,tooltip:$,disabled:a},()=>n.createElement(n.Fragment,null,n.createElement(aO,{isDisabled:a},n.createElement(ao.J,{color:M,opacity:M.a,className:tE()(ax)})),n.createElement(aC,{label:$,isApplying:a}))):n.createElement(av,{ref:d,onClick:A,type:as.kQ.COLOR})}function a2(){let{blocks:e,totalViolations:t}=(0,E.md)(rW.yU);return t?n.createElement(aV,{items:e.map(({blockConfig:e,violationsByGroupKey:t})=>n.createElement(ab,{blockConfig:e,icon:n.createElement(ar.Z,null),key:e.id,violationsByGroupKey:t},e=>n.createElement(n.Fragment,null,Object.entries(t).map(([t,l])=>n.createElement(a5,{key:t,groupKey:t,violations:l,isApplying:e})))))}):null}let a5=n.memo(function({groupKey:e,violations:t,isApplying:l}){let r=(0,n.useMemo)(()=>(function(e){let t={};for(let l of e){let e=l.detectionContext,n=e?.subtype;n&&(t[n]||(t[n]=[]),t[n].push(l))}return t})(t),[t]);return n.createElement("div",{key:e},Object.entries(r).map(([t,r])=>r?.length?n.createElement(a3,{key:`${e}-${t}`,violations:r,groupKey:e,subtype:t,isApplying:l}):null))});function a3({groupKey:e,violations:t,subtype:l,isApplying:r}){let[a,i]=(0,n.useState)(!1),o=t[0],s=o?.detectionContext,{applyFixToBlock:d,isApplying:c}=au((0,n.useMemo)(()=>({[e]:t}),[e,t])),m=(0,n.useCallback)(()=>{if(!a){i(!0);try{let l=t.map(e=>e.guid);t7.r()?.ignoreViolationsForGuidsWithGroupKey(l,e)}catch(e){i(!1)}}},[t,e,a]);if(!t||0===t.length||a||!s?.explanation)return null;let p=c||r;return n.createElement("div",{onMouseEnter:()=>{E.zl.set(t9.hx,t)},onMouseLeave:()=>{E.zl.set(t9.hx,[])}},n.createElement("div",{className:"x78zum5 xdt5ytf x1nfngrj x12sbs06 xf18ygs"},n.createElement("div",{...er.Ay.props(a4.subtypeLabel)},l),n.createElement("div",{...er.Ay.props(a4.explanationText)},s.explanation),n.createElement("div",{className:"x78zum5 x1nfngrj x6s0dn4"},n.createElement(ly.E,{...er.Ay.props(a4.fixButton),onClick:d,disabled:p,"data-tooltip":(0,u.t)("design_linter.suggestion_block.apply_tooltip",{section:l}),"data-tooltip-type":al.Ib.TEXT},c?"Applying...":"Apply Fix"),n.createElement(ly.E,{...er.Ay.props(a4.ignoreButton),onClick:m,disabled:p,"data-tooltip":(0,u.t)("design_linter.suggestion_block.ignore_tooltip",{section:l}),"data-tooltip-type":al.Ib.TEXT},(0,u.t)("general.ignore")))))}let a4={subtypeLabel:{...eE.g.textBodyMediumStrong,color:"x1akne3o",display:"x78zum5",alignItems:"x6s0dn4",gap:"xg2d0mh",rowGap:null,columnGap:null,$$css:!0},explanationText:{...eE.g.textBodyMedium,color:"x1akne3o",lineHeight:"x37zpob",$$css:!0},fixButton:{...eE.g.textBodyMedium,color:"x1quhyk7",padding:"xm22vyk",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,borderRadius:"x12oqio5",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,backgroundColor:"xjbqb8w xv2f06h",$$css:!0},ignoreButton:{...eE.g.textBodyMedium,color:"x1n0bwc9",padding:"xm22vyk",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,borderRadius:"x12oqio5",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,backgroundColor:"xjbqb8w xv2f06h",$$css:!0}};function a8(){let{blocks:e,totalViolations:t}=(0,E.md)(rW.d9);return t?n.createElement(aV,{items:e.map(({blockConfig:e,violationsByGroupKey:t})=>n.createElement(ab,{blockConfig:e,icon:n.createElement(r4.c,null),key:e.id,violationsByGroupKey:t},e=>n.createElement(n.Fragment,null,Object.entries(t).map(([t,l])=>{let r=l[0];return n.createElement(a6,{key:t,violations:l,groupKey:t,ruleId:r?.ruleId,isApplying:e})}))))}):null}function a6({groupKey:e,violations:t,ruleId:l,isApplying:r}){let a=t[0],{fix:i,status:o}=ac(e);if(!a?.detectionContext)return null;let{detectionContext:s,guid:d}=a;return n.createElement(ah,{fixStatus:o,groupKey:e,violations:t,isApplying:r},{suggestionRowContent:t=>n.createElement(ay,{...t},{currentValue:n.createElement(a7,{context:s}),suggestedValue:n.createElement(a9,{fix:i,groupKey:e,ruleId:l,violatingNodeId:d,isApplying:r})})})}function a7({context:e}){if(!e)return null;let t=parseFloat(e.numericValue.toFixed(2)).toString();return n.createElement("span",{"data-tooltip":t,"data-tooltip-type":al.Ib.TEXT},t)}function a9({ruleId:e,fix:t,groupKey:l,violatingNodeId:r,isApplying:a}){let{fixContext:o,valid:s}=t??{},d=(0,n.useRef)(null),c=lq(),[m,p]=(0,E.fp)(lF),g=(0,E.Xr)(lP),f=(0,E.Xr)(lM),x=(0,E.Xr)(lB),b=(0,E.Xr)(lz),{fix:y}=am(l),{fixContext:h}=y??{},_=o?.fixes,v=h?.fixes,k=(0,lH.d$)(e),{fixes:S,listItems:R,allResolvedVariables:T,variableMap:I}=lU({selectedFixes:_??[],cachedFixes:(v??[]).slice(0,3),violatingNodeId:r,type:i.rXF.FLOAT,scopes:k}),C=(0,n.useMemo)(()=>{if(!_?.length)return S[0];let e=_[0]?.variableId;if(!e||!T)return S[0];let t=T.libraryVariables[e]?.resolvedValue??T.localVariables[e]?.resolvedValue;return t?{variableId:e,resolvedValue:t}:S[0]},[_,T,S]),w=(0,n.useCallback)(e=>!!(e?.id&&_?.length)&&e.id===_[0]?.variableId,[_]),L=(0,n.useCallback)(t=>{if(!T||!e)return;let n=T.libraryVariables[t]?.resolvedValue??T.localVariables[t]?.resolvedValue;if(!n)return;let a={...o,fixes:[{variableId:t,resolvedValue:n}]};E.zl.set(lo.Sg,{groupKey:l,selectedFixItem:{fix:{ruleId:e,guid:r??"",valid:!0,fixContext:a},status:"loaded"}})},[T,e,l,r,o]),A=(0,n.useCallback)(()=>{let e=!!m?.current&&!!d.current,t=m?.current===d.current;if(e&&t){c();return}p(d),g(!0),b(()=>w),x(()=>L),f({title:(0,u.t)("design_linter.rules.number_rules.dropdown_title"),emptyLabel:"",display:"LIST",items:R})},[m,p,g,b,w,x,L,f,R,c]);if(!t||!s||!o||!S||0===S.length||!C||!r)return n.createElement(av,{ref:d,onClick:A,type:as.kQ.NUMBER});let{variableId:N,resolvedValue:O}=C,$=(I??{})[N]?.name,M=O.value;return $?n.createElement(aw,{ref:d,onClick:A,tooltip:$,disabled:a},()=>n.createElement(n.Fragment,null,n.createElement(aO,{isDisabled:a},n.createElement(r4.c,null)),n.createElement(aC,{label:$,value:M,isApplying:a}))):n.createElement(av,{ref:d,onClick:A,type:as.kQ.NUMBER})}var ie=l(907727),it=l(802070),il=l(45341);function ir(){let{blocks:e,totalViolations:t}=(0,E.md)(rW.qQ);return t?n.createElement(aV,{items:e.map(({blockConfig:e,violationsByGroupKey:t})=>n.createElement(ab,{blockConfig:e,icon:null,key:e.id,violationsByGroupKey:t},e=>n.createElement(n.Fragment,null,Object.entries(t).map(([t,l])=>{let r=l[0];return n.createElement(ia,{key:t,violations:l,groupKey:t,ruleId:r?.ruleId,isApplying:e})}))))}):null}function ia({groupKey:e,violations:t,ruleId:l,isApplying:r}){let a=t[0],{fix:i,status:o}=ac(e);if(!a?.detectionContext)return null;let{detectionContext:s,guid:d}=a;return n.createElement(ah,{fixStatus:o,groupKey:e,violations:t,isApplying:r},{suggestionRowContent:t=>n.createElement(ay,{...t},{currentValue:n.createElement(ii,{context:s}),suggestedValue:n.createElement(io,{fix:i,groupKey:e,ruleId:l,violatingNodeId:d,isApplying:r,detectionContext:s})})})}function ii({context:e}){if(!e)return null;let t=e.fillColor,l=e.fillOpacity,r=`${aY.z5.format(t)}${l&&l<1?` \xb7 ${function(e){let t=new aQ.t6({min:0,max:100});return`${t.format(100*e)}%`}(l)}`:""}`;return n.createElement("span",{"data-tooltip":r,"data-tooltip-type":al.Ib.TEXT},r)}function io({ruleId:e,fix:t,groupKey:l,violatingNodeId:r,isApplying:a,detectionContext:o}){let{fixContext:s,valid:d}=t??{},c=(0,n.useRef)(null),m=lq(),[p,g]=(0,E.fp)(lF),f=(0,E.Xr)(lP),x=(0,E.Xr)(lM),b=(0,E.Xr)(lB),y=(0,E.Xr)(lz),h=(0,E.Xr)(lV),{fix:_}=am(l),{fixContext:v}=_??{},k=s?.fixes,{fixes:S,listItems:R,allResolvedVariables:T,variableMap:I}=lU({selectedFixes:k??[],cachedFixes:(v?.fixes??[]).slice(0,3),violatingNodeId:r,type:i.rXF.COLOR,scopes:(0,lH.d$)(e)}),C=(0,n.useMemo)(()=>{if(!k?.length)return S[0];let e=k[0]?.variableId;if(!e||!T)return S[0];let t=T.libraryVariables[e]?.resolvedValue??T.localVariables[e]?.resolvedValue;return t?{variableId:e,resolvedValue:t}:S[0]},[k,T,S]),w=(0,n.useCallback)(e=>!!(e?.id&&k?.length)&&e.id===k[0]?.variableId,[k]),L=(0,n.useCallback)(t=>{if(!T||!e)return;let n=T.libraryVariables[t]?.resolvedValue??T.localVariables[t]?.resolvedValue;if(!n)return;let a={...s,fixes:[{variableId:t,resolvedValue:n}]};E.zl.set(lo.Sg,{groupKey:l,selectedFixItem:{fix:{ruleId:e,guid:r??"",valid:!0,fixContext:a},status:"loaded"}})},[T,e,l,r,s]),A=(0,n.useCallback)(()=>{let e=!!p?.current&&!!c.current,t=p?.current===c.current;if(e&&t){m();return}let{backgroundColor:l,contrastRatios:r}=o,a=function(e){if("LIST"!==e.type||!e.variable||!T)return null;let t=e.variable.node_id,a=T.libraryVariables[t]?.resolvedValue??T.localVariables[t]?.resolvedValue;if(!a?.value)return null;let i=a.value;return n.createElement(is,{backgroundColor:l,selectedColor:i,contrastRatios:r})};g(c),f(!0),y(()=>w),b(()=>L),h(()=>a),x({title:(0,u.t)("design_linter.rules.color_rules.dropdown_title"),emptyLabel:"",display:"LIST",items:R})},[p,g,f,y,w,b,L,h,x,R,m,o,T]);if(!t||!d||!s||!S||0===S.length||!C||!r)return n.createElement(av,{ref:c,onClick:A,type:as.kQ.COLOR});let{variableId:N,resolvedValue:O}=C,$=(I??{})[N]?.name,M=O.value;return M&&$?n.createElement(aw,{ref:c,onClick:A,tooltip:$,disabled:a},()=>n.createElement(n.Fragment,null,n.createElement(aO,{isDisabled:a},n.createElement(ao.J,{color:M,opacity:M.a,className:tE()(ax)})),n.createElement(aC,{label:$,isApplying:a}),n.createElement(is,{backgroundColor:o.fillColor,selectedColor:O.value,contrastRatios:o.contrastRatios}))):n.createElement(av,{ref:c,onClick:A,type:as.kQ.COLOR})}function is({backgroundColor:e,selectedColor:t,contrastRatios:l}){let r=(0,n.useMemo)(()=>{let{aaPass:n}=(0,il.Ef)((0,lt.Hu)(t),e,l?.AA,l?.AAA);return!!n},[e,t,l]);return n.createElement("div",{...er.Ay.props(id.contrastCheck,r?id.passing:id.failing)},r?n.createElement(ie.l,null):n.createElement(it.X,null),(0,u.t)("design_linter.suggestion_block.text_background_contrast_aa.aaStandard"))}let id={contrastCheck:{display:"x78zum5",alignItems:"x6s0dn4",gap:"x195vfkc",rowGap:null,columnGap:null,userSelect:"x87ps6o",$$css:!0},passing:{color:"xq6u9c4","--color-icon":"x11vm0g5",$$css:!0},failing:{color:"x1akne3o","--color-icon":"xbzrb6o",$$css:!0}};function iu(){let{blocks:e,totalViolations:t}=(0,E.md)(rW.GM);return t?n.createElement(aV,{items:e.map(({blockConfig:e,violationsByGroupKey:t})=>n.createElement(ab,{blockConfig:e,icon:n.createElement(ic,null),key:e.id,violationsByGroupKey:t},e=>n.createElement(n.Fragment,null,Object.entries(t).map(([t,l])=>n.createElement(im,{key:t,violations:l,groupKey:t,isApplying:e})))))}):null}function ic(){return n.createElement("div",{...er.Ay.props(iE.textIcon)},"Ag")}function im({groupKey:e,violations:t,isApplying:l}){let r=t[0],{fix:a,status:i}=ac(e);return r?.detectionContext?n.createElement(ah,{fixStatus:i,groupKey:e,violations:t,isApplying:l},{suggestionRowContent:t=>n.createElement(ay,{...t},{currentValue:n.createElement(ip,{context:r.detectionContext}),suggestedValue:n.createElement(ig,{fix:a,groupKey:e,isApplying:l})})}):null}function ip({context:e}){let{fontFamily:t,fontSize:l,lineHeight:r}=e,a=parseFloat(l.toFixed(2)).toString(),i=parseFloat(r.toFixed(2)).toString(),o=`${t} ${a}, ${i}`;return n.createElement("span",{"data-tooltip":o,"data-tooltip-type":al.Ib.TEXT},o)}function ig({fix:e,groupKey:t,isApplying:l}){let{fixContext:r,valid:a}=e??{},i=(0,n.useRef)(null),[o,s]=(0,E.fp)(lF),d=(0,E.Xr)(lP),c=(0,E.Xr)(lM),m=(0,E.Xr)(lB),p=(0,E.Xr)(lz),g=lq(),{fix:f}=am(t),{fixContext:x}=f??{},b=r?.styles,{allStyles:y,listItems:h,styleNodeIdToStyle:_}=function({selectedStyles:e,cachedStyles:t}){let{listItems:l,allStyles:r}=(0,E.md)(lG),a=(0,n.useMemo)(()=>{let e={};for(let t of r)e[t.node_id]=t;return{styleNodeIdToStyle:e}},[r]);return(0,n.useMemo)(()=>{let{styleNodeIdToStyle:n}=a;if(0===t.length)return{listItems:l,allStyles:[...e,...r],styleNodeIdToStyle:n};let i=[];for(let e of t)i.push({id:e.node_id,type:"TEXT_STYLE_LIST",style:e,isSuggestion:!0}),n[e.node_id]=e;return{listItems:[{id:(0,lI.g)(),type:"LIST_HIERARCHY_PATH",label:(0,u.t)("design_linter.preview.suggested")},...i,{id:(0,lI.g)(),type:"LIST_SEPARATOR"},...l],allStyles:0===e.length?r:[...e,...r],styleNodeIdToStyle:n}},[e,t,l,r,a])}({selectedStyles:b??[],cachedStyles:(x?.styles??[]).slice(0,1)}),v=b?.length?b[0]:y[0],k=(0,n.useCallback)(e=>!!(e?.id&&b?.length)&&e.id===b?.[0]?.node_id,[b]),S=(0,n.useCallback)(l=>{let n=_[l];if(!n)return;let a={...r,styles:[n]};E.zl.set(lo.Sg,{groupKey:t,selectedFixItem:{fix:{ruleId:rT.C.REQUIRE_TEXT_STYLES,guid:e?.guid??"",valid:!0,fixContext:a},status:"loaded"}})},[_,t,e?.guid,r]),R=(0,n.useCallback)(()=>{if(l)return;let e=!!o?.current&&!!i.current,t=o?.current===i.current;if(e&&t){g();return}p(()=>k),m(()=>S),c({title:(0,u.t)("design_linter.rules.text_styles.dropdown_title"),emptyLabel:"",display:"LIST",items:h}),s(i),d(!0)},[g,o,l,k,h,S,s,d,p,c,m]);return e&&a&&r&&v?n.createElement(aw,{ref:i,onClick:R,tooltip:v.name},()=>n.createElement(n.Fragment,null,n.createElement(aO,{isDisabled:l},n.createElement(ao.J,{fillStyle:v,className:ax})),n.createElement(aC,{label:v.name,isApplying:l}))):n.createElement(av,{ref:i,onClick:R,type:as.kQ.TEXT})}let iE={textIcon:{...eE.g.textBodyMediumStrong,width:"x1kky2od",height:"xlup9mm",$$css:!0}},ix=n.memo(function(){let e=lq(),t=0===(0,E.md)(rW.QU).violationCount,l=function(){let{blocks:e,totalViolations:t}=(0,E.md)(rW.r0);return!!e.length&&!!t}(),r=function(){let{blocks:e,totalViolations:t}=(0,E.md)(rW.GM);return!!e.length&&!!t}(),a=function(){let{blocks:e,totalViolations:t}=(0,E.md)(rW.d9);return!!e.length&&!!t}(),i=function(){let{blocks:e,totalViolations:t}=(0,E.md)(rW.qQ);return!!e.length&&!!t}(),o=function(){let{blocks:e,totalViolations:t}=(0,E.md)(rW.LG);return!!e.length&&!!t}(),s=function(){let{blocks:e,totalViolations:t}=(0,E.md)(rW.yU);return!!e.length&&!!t}(),{nextGroup:d,hasNextGroup:c}=function(){let e=(0,E.md)(lo.NM),t=(0,n.useRef)(null),l=(0,n.useRef)(null),r=(0,E.md)(lo.Bd);return(0,n.useEffect)(()=>{if(!(l.current!==e))return;l.current=e;let n=r.map(e=>e.id),a=n.findIndex(t=>t===e);t.current=-1!==a?n.slice(a+1):n},[e,r]),{nextGroup:(0,n.useCallback)(()=>{if(!t.current||!r.length)return;let e=r.reduce((e,t)=>(e.add(t.id),e),new Set),l="";for(let n=0;n<t.current.length;n++){let r=t.current[n]??"";if(e.has(r)){l=r;break}}if(!l){let e=r[0]?.id??"";if(!e){E.zl.set(lo._M,ll.FR.ALL_VISUAL_GROUPS_VIEW);return}l=e}let n=E.zl.get(t9.Iy).get(l);n&&(0,n_.JT)(n,"NEXT"),E.zl.set(lo.NM,l),E.zl.set(ru)},[r]),hasNextGroup:r.length>0}}();if(!function(){let e=(0,E.md)(lo.NM),t=(0,E.md)(lo.$C),{isReady:l,numSuccessfulFixes:r}=(0,n.useMemo)(()=>{let e=Array.from(t.values()),l=e.every(e=>e?.status!=="loading"),n=e.filter(e=>e?.status==="loaded").length;return{selectedFixes:e,isReady:l,numSuccessfulFixes:n}},[t]),a=(0,n.useRef)(null);(0,n.useEffect)(()=>{e&&(a.current=performance.now())},[e]),(0,n.useEffect)(()=>{if(l&&e&&a.current){let t=performance.now()-a.current;(0,n_.OW)(e,r,t),a.current=null}},[e,l,r])}(),t)return n.createElement("div",{...er.xk(iy.noViolations)},(0,u.tx)("design_linter.modal.group_suggestions_completed"),c?n.createElement(lu.$n,{variant:"primary",onClick:d},(0,u.tx)("general.next")):null);let m=[];return l&&m.push(n.createElement(aJ,{key:"color-variables"})),r&&m.push(n.createElement(iu,{key:"text-styles"})),a&&m.push(n.createElement(a8,{key:"number-variables"})),i&&m.push(n.createElement(ir,{key:"text-background-contrast"})),o&&m.push(n.createElement(aP,{key:"assets-from-library"})),s&&m.push(n.createElement(a2,{key:"extensibility-rule"})),n.createElement("div",{className:"x78zum5 xdt5ytf x5yr21d x1rife3k xp6roeo",onScroll:e},n.createElement("div",{className:"x78zum5 xdt5ytf x1gskr33"},m.map((e,t)=>n.createElement(n.Fragment,{key:e.key},t>0&&n.createElement(aN,null),e))))}),ib=(0,n.memo)(function(){return!function(){let e=(0,E.md)(lo.vu);(0,n.useEffect)(()=>{e.length&&i.Egt?.replaceSelection(e,!0)},[e])}(),(0,x.h)(()=>{E.zl.set(ru)}),n.createElement("div",{className:"x78zum5 x1v8gsql x5yr21d xh8yej3"},n.createElement("div",{className:"x78zum5 xdt5ytf x5yr21d xqo8coc xuhaxrz x1yjdb4r"},(0,o.k)().aip_flower_garden_debug&&n.createElement(rd,null),n.createElement(ix,null)),n.createElement(rY,null))}),iy={noViolations:{...eE.g.textBodyMedium,color:"x1n0bwc9",display:"x78zum5",justifyContent:"xl56j7k",alignItems:"x6s0dn4",userSelect:"x87ps6o",flexDirection:"xdt5ytf",gap:"x1i71x30",rowGap:null,columnGap:null,height:"x5yr21d",$$css:!0}},ih=n.memo(function(){let e=ld(),t=0===(0,E.md)(t9.Kk),l=(0,E.md)(lo._M);return e?n.createElement("div",{className:"x78zum5 xh8yej3 x5yr21d xdt5ytf x6s0dn4 xl56j7k x1nfngrj"},n.createElement(nG.k,null),n.createElement("span",{...er.xk(i_.loadingText)},(0,u.tx)("design_linter.modal.loading")),(0,o.k)().aip_flower_garden_debug&&n.createElement(rd,null)):l===ll.FR.SELECTED_VISUAL_GROUP_VIEW?n.createElement(ib,null):t?n.createElement("div",{"data-testid":"design-linter-container-no-violations",...er.xk(i_.noViolationsContainer)},n.createElement("div",{className:"x78zum5 xl56j7k x87ps6o xdt5ytf x6s0dn4"},n.createElement("span",null,(0,u.tx)("design_linter.modal.suggestions_completed")),(0,o.k)().aip_flower_garden_debug&&n.createElement(rd,null))):n.createElement(n1,null)}),i_={loadingText:{color:"x1n0bwc9",...eE.g.textBodyLarge,marginLeft:"xrybvsa",marginRight:"x17qaar8",marginInlineStart:null,marginInlineEnd:null,textAlign:"x2b8uid",userSelect:"x87ps6o",$$css:!0},noViolationsContainer:{color:"x1n0bwc9",...eE.g.textBodyMedium,display:"x78zum5",width:"xh8yej3",height:"x5yr21d",flexDirection:"xdt5ytf",justifyContent:"xl56j7k",$$css:!0}},iv=(0,nP.jz)(lj);function ik(){let e=n$.ox(),t=function(){let e=(0,tS.GQ)(),t=(0,E.md)(lo._M),l=(0,n.useMemo)(()=>new nD.Mi(e+(0,nP.jz)(lj),(0,nP.jz)(lj)),[e]),[{windowInnerHeight:r,windowInnerWidth:a}]=(0,nV.A)((0,nF.l)(),300,{equalityFn:nO.c2}),i=915,o=540;return t===ll.FR.ALL_VISUAL_GROUPS_VIEW&&(i=336,o=475),{initialPosition:l,maxHeight:r-2*iv,minHeight:250,minWidth:400,initialHeight:o,initialWidth:Math.min(a-2*iv,i)}}(),l=function(){let e=(0,E.Xr)(lo.$H);return(0,n.useMemo)(()=>lv()(t=>{e(t)},100),[e])}(),r=function(){let e=(0,E.Xr)(lo.r4);return(0,n.useMemo)(()=>lv()(t=>{e(t)},100),[e])}(),a=function(){let e=(0,E.Xr)(lo._M),t=lq();return(0,n.useCallback)(()=>{t(),t7.r()?.teardownLinter(),e(ll.FR.ALL_VISUAL_GROUPS_VIEW)},[t,e])}(),i=(0,E.md)(lo._M),o=(0,n.useCallback)(e=>{e.size&&l(e.size),r(e.position)},[r,l]);return(0,x.h)(()=>{l({x:t.initialWidth,y:t.initialHeight}),r({x:t.initialPosition.x,y:t.initialPosition.y})}),(0,n.useLayoutEffect)(()=>{let t=475,n=336;i===ll.FR.SELECTED_VISUAL_GROUP_VIEW&&(t=540,n=915);let r=new nD.Mi(n,t);e.setSize(r),l(r)},[i,l,e]),(0,n_.ZE)(),n.createElement(lx._L,{defaultWidth:t.initialWidth,defaultHeight:t.initialHeight,defaultPosition:{left:t.initialPosition.x,top:t.initialPosition.y},constraints:{maxHeight:t.maxHeight},manager:e,onClose:({source:e})=>{"outside"!==e&&a()},onTransform:o},n.createElement(et.vo,null,n.createElement(et.Y9,null,n.createElement(iS,null)),n.createElement(et.nB,{padding:0,scrolling:"none",className:"xb3r6kr"},n.createElement(ih,null))),n.createElement(lW,null))}function iS(){let[e,t]=(0,E.fp)(lo._M);return e===ll.FR.SELECTED_VISUAL_GROUP_VIEW?n.createElement("div",{className:"xt0e3qv x87ps6o xh8yej3"},n.createElement(iR,{showBackButton:!0,onBackClick:()=>t(ll.FR.ALL_VISUAL_GROUPS_VIEW)})):n.createElement("div",{className:"xt0e3qv x87ps6o xh8yej3 x8rdmch"},n.createElement(iR,null))}function iR({showBackButton:e=!1,onBackClick:t}){let l=ld();return n.createElement("div",{className:"x78zum5 x1qughib x6s0dn4"},n.createElement("div",{className:"x78zum5 xg2d0mh x6s0dn4"},e&&t&&n.createElement(ly.E,{onClick:t},n.createElement(nM.C,null),n.createElement("div",{className:"x78zum5 x1g2dr8m xiqqdae xkezfkh x1giz659 x14kxzw3"},l?(0,u.tx)("design_linter.title"):(0,u.tx)("design_linter.review_title"))),!e&&n.createElement("div",{className:"x78zum5 x1g2dr8m xiqqdae xkezfkh x1giz659 x14kxzw3"},l?(0,u.tx)("design_linter.title"):(0,u.tx)("design_linter.review_title")),n.createElement(lf.E,null,(0,u.tx)("general.beta"))),n.createElement("div",{className:"x78zum5 xg2d0mh x1057jvv"},n.createElement(iI,null),n.createElement(iT,null)))}function iT(){let[e,t]=(0,E.fp)(lo._M);return n.createElement(tm.K,{onClick:()=>{e===ll.FR.SELECTED_VISUAL_GROUP_VIEW?t(ll.FR.LIBRARY_SELECTOR_FROM_SELECTED_GROUP_VIEW):t(ll.FR.LIBRARY_SELECTOR_FROM_ALL_GROUPS_VIEW)},"aria-label":(0,u.t)("design_linter.penalty_box.open_library_selector_aria")},n.createElement(nB.l,null))}function iI(){let e=(0,E.Xr)(lo._M),t=ld(),l=(0,n.useCallback)(()=>{(0,n_.il)(),t7.r()?.refreshDetection(),e(ll.FR.ALL_VISUAL_GROUPS_VIEW)},[e]);return n.createElement(tm.K,{onClick:l,"aria-label":(0,u.t)("design_linter.modal.penalty_box.refresh_button_tooltip"),disabled:t},n.createElement(nz.T,null))}function iC(){return(0,t9.qZ)()?n.createElement(n.Fragment,null,!!(0,o.k)().aip_flower_garden_ts&&n.createElement(nA,null),n.createElement(iw,null)):null}let iw=n.memo(()=>{let e=(0,eQ.ut)(i.Ez5?.uiState()?.showDesignLinter,!1),t=(0,E.md)(t9.FD),l=(0,E.md)(lo.pR),r=function(){let e=(0,E.md)(lo._M);return(0,ls.y4)(e)}();return((0,n.useEffect)(()=>()=>{t7.r()?.teardownLinter()},[]),!function(){let e=(0,E.Xr)(t9.v4),t=(0,la.pN)(),l=t.data?.libraryVariables,r=t.data?.libraryVariableSets,a=(0,E.md)(t9.Ut);(0,n.useEffect)(()=>{if(a.size<1){(0,le.PN)()&&e(e=>({...e,status:"loaded"}));return}if("errors"===t.status){e(e=>({...e,status:"error"}));return}if("loaded"!==t.status)return;let n=new AbortController,i=n.signal;return async function(){if(!r||!l)return;e(e=>({...e,status:"loading"}));let t=new Set,n=[];r.forEach(e=>{a.has(e.library_key)&&(n.push(e),t.add(e.library_key))});for(let e=0;e<n.length;e+=2){if(i.aborted)return;let t=n.slice(e,e+2).map(e=>(0,lr.RI)(e));await Promise.allSettled(t)}e({libraryVariables:l,libraryVariableSetIdToSet:n.reduce((e,t)=>(t.node_id&&(e[t.node_id]=t),e),{}),status:"loaded",libraryKeys:t})}(),()=>{n.abort()}},[t.status,r,l,a,e])}(),!function(){let e=(0,E.md)(t9.Ut);(0,n.useEffect)(()=>{let t=[...e].map(e=>e.toString());(0,li.kA)({library_keys:t,entity_type:"VARIABLE",entity_value_type:"FLOAT",max_results_per_library:100}),(0,li.kA)({library_keys:t,entity_type:"STYLE",entity_value_type:"TEXT",max_results_per_library:100}),(0,ln.w0)(lt.yA).then(e=>{let l=e.get(lt.tS,lt.Iv);(0,li.kA)({library_keys:t,entity_type:"VARIABLE",entity_value_type:"COLOR",max_results_per_library:l})})},[e])}(),(0,n_.fx)(e,l),!e||t)?null:r?n.createElement(nv,null):n.createElement(ik,null)});var iL=l(809761),iA=l(820314),iN=l(701455),iO=l(408742),i$=l(552552),iM=l(853733),iB=l(353620),iz=l(758429);function iV({children:e}){return n.createElement(iz.G.Provider,{value:{loggerEventName:"design_navigate"}},n.createElement(iM.s.Provider,{value:{allowLibraryPublish:!0}},n.createElement(iB.y0.Provider,{value:iB.X},e)))}var iP=l(813009),iF=l(797688),iD=l(995218),iG=l(330362),iH=l(831271),iU=l(659502),ij=l(922484),iq=l(407638),iW=l(259964),iX=l(450651),iK=l(858160),iY=l(919671),iQ=l(963307),iJ=l(394882),iZ=l(698429),i0=l(24508),i1=l(231563);function i2({dropdownShown:e,pickerShown:t,saveAsState:l,sceneGraphSelection:a}){let i=(0,r.wA)(),o=(0,eM.q5)(),s=(0,eI.p8)("currentPage"),d=(0,eI.p8)("isReadOnly"),c=(0,eI.p8)("currentSelectedProperty"),m=(0,iZ.ks)(),p=d&&!m,g=(0,iQ.Gt)("numSelected"),{exportSettings:E}=(0,iQ.pw)("exportSettings"),f=(0,i0.Wd)();return n.createElement(iJ.VF,{isVisible:!0},()=>n.createElement(i0.LI,{key:"export",currentPage:s,currentSelectedProperty:c,dispatch:i,dropdownShown:e,exportSettings:E,isSelectionRenamable:i0.LI.isSelectionRenamable(Object.keys(a)),numSelected:g,openFile:o,panelWidth:i1.iP,pickerShown:t,recordingKey:"exportsPanel",saveAsState:l,sceneGraphSelection:a,singleNodeName:f,standalone:!0,title:p?(0,u.t)("fullscreen.properties_panel.export"):(0,u.t)("fullscreen.properties_panel.presets")}))}var i5=l(714327),i3=l(812045),i4=l(562026),i8=l(596224),i6=l(257009),i7=l(587995),i9=l(612499);function oe({dropdownShown:e,expandedFramePresetType:t,pickerShown:l,sceneGraphSelection:a,shownPanels:o,userFlags:s}){let d=(0,r.wA)(),u=(0,eM.q5)(),c=(0,i8.cJ)(),m=(0,iQ.tN)("containsResponsiveSets"),p=!o[i.ibQ.FRAME_PRESETS]&&!o[i.ibQ.PENCIL_TOOL]&&!m;return n.createElement(n.Fragment,null,n.createElement(iJ.VF,{isVisible:o[i.ibQ.FRAME_PRESETS]},()=>n.createElement(i6.nl,{key:"frame-presets",recordingKey:"framePresetPanel",dispatch:d,expandedFramePresetType:t})),!c&&n.createElement(iJ.VF,{isVisible:o[i.ibQ.PENCIL_TOOL]},()=>n.createElement(i7.q,{id:"pencilToolPanel",key:"pencilToolPanel",recordingKey:"pencilToolPanel",openFile:u})),n.createElement(iJ.VF,{isVisible:p},()=>n.createElement(i9.Z0,{key:"prototype",recordingKey:"prototypePanel",dropdownShown:e,pickerShown:l,sceneGraphSelection:a,shouldUseSelectedStyleProperties:!0,userFlags:s})))}function ot({scrollContainer:e,refMainScrollContainer:t,...l}){(0,i5.S2)();let r=(0,iG.k)(),a=l.propertiesPanelTab,o=(0,eI.p8)("topLevelMode"),s=(0,i1.Dj)(l.user),d=o!==i.lyf.PREVIEW&&(o!==i.lyf.BRANCHING||!s)&&o!==i.lyf.DEV_HANDOFF&&a===i.FAf.DESIGN,u=o!==i.lyf.PREVIEW&&o!==i.lyf.BRANCHING&&a===i.FAf.PROTOTYPE,c=o===i.lyf.PREVIEW&&!l.userStateLoaded&&!r||a===i.FAf.INSPECT,m=a===i.FAf.EXPORT,p=a===i.FAf.COMMENT;return n.createElement(n.Fragment,null,d&&n.createElement(iY.Y,{scrollContainer:e,...l}),u&&n.createElement(oe,{dropdownShown:l.dropdownShown,expandedFramePresetType:l.expandedFramePresetType,pickerShown:l.pickerShown,sceneGraphSelection:l.sceneGraphSelection,shownPanels:l.shownPanels,userFlags:l.userFlags}),c&&n.createElement(i3.q,{scrollContainer:e}),m&&n.createElement(i2,{dropdownShown:l.dropdownShown,pickerShown:l.pickerShown,saveAsState:l.saveAsState,sceneGraphSelection:l.sceneGraphSelection}),p&&n.createElement(l.commentsPanel,null))}function ol(e){!function(){let e=(0,tr.GS)(),{isPropertiesPanelCollapsed:t,setPropertiesPanelCollapsed:l}=(0,iK.iT)(),a=(0,tS.Ye)(),o=(0,iD.ow)(),s=(0,eI.ax)(),d=(0,eI.dH)(),u=d===i.NLJ.FRAME||d===i.NLJ.COMMENTS||d===i.NLJ.VECTOR_PENCIL,c=(0,r.d4)(e=>e.mirror.appModel.activeUserAction===i.QOV.DEFAULT),m=(0,iK.ys)();(0,n.useEffect)(()=>{e&&c&&!o&&t&&(u||s)&&l(!1)},[s,c,d,e,l,t,a,u,o]),(0,n.useEffect)(()=>{m&&l(!0)},[m,l,t])}();let t=(0,eI.p8)("showUi");if((0,o.k)().dont_render_ui&&!t)return n.createElement(n.Fragment,null);let l=null,a=e=>{l=e};return n.createElement(i4.j,{recordingKey:e.recordingKey,activeTab:e.propertiesPanelTab,refMainScrollContainer:a},n.createElement(ot,{...e,scrollContainer:l,refMainScrollContainer:a}))}var on=l(224747),or=l(459762),oa=l(719486);let oi=n.memo(function(){let e=(0,iP.R)(e=>(0,iq.getPermissionsState)(e)),t=(0,eI.aV)(),l=(0,r.d4)(e=>e.loadingState),a=(0,g.UN)(),o=(0,r.d4)(e=>e.mirror.sceneGraphSelection),s=(0,r.d4)(e=>e.currentUserOrgId),d=(0,r.d4)(e=>e.dropdownShown),u=(0,r.d4)(e=>e.fonts),c=(0,r.d4)(e=>e.fileVersion),m=(0,r.d4)(e=>e.installedPluginVersions),p=(0,r.d4)(e=>e.library),E=(0,r.d4)(e=>e.localPlugins),f=(0,r.d4)(e=>e.modalShown),x=(0,r.d4)(e=>e.openFile),b=(0,r.d4)(e=>e.pickerShown),y=(0,r.d4)(e=>e.pickerInStyleCreationShown),h=(0,r.d4)(e=>e.publishedPlugins),_=(0,r.d4)(e=>e.saveAsState),v=(0,r.d4)(e=>e.selectedView),k=(0,r.d4)(e=>e.voice.showWidget),S=(0,r.d4)(e=>e.stylePickerListLayout),R=(0,r.d4)(e=>e.stylePickerShown),T=(0,r.d4)(e=>e.stylePreviewShown),I=(0,r.d4)(e=>e.styleSets),C=(0,r.d4)(e=>e.usedKeyboardShortcuts),w=(0,r.d4)(e=>e.user),L=(0,r.d4)(e=>e.userFlags),A=(0,r.d4)(e=>e.userStateLoaded),N=(0,r.d4)(e=>e.repos),O=(0,r.d4)(e=>e.folders),$=(0,r.d4)(e=>e.teams),M=(0,r.d4)(e=>e.orgById),B=(0,r.d4)(e=>e.orgUsersByOrgId),z=(0,r.d4)(e=>e.userEduGracePeriods),V=(0,r.d4)(e=>e.licenseGroups),P=(0,tr.GS)(),F=(0,iD.my)()===iW.nT.Design,D=(0,iG.k)(),G=(0,ij.VP)(l,"edit_button_upgrading_to_edit"),H=t||G,U=(0,eQ.ut)((0,eq.aY)(),i.FAf.DESIGN),j=(0,eQ.J2)(i.Ez5.propertiesPanelState().shownPropertiesPanels),q=(0,eQ.J2)((0,ej.UK)().expandedFramePresetType),W=(0,ej.Ku)(),X=(0,ej.qw)(),K=(0,iU.s_)(),Y=!(0,iF.Oo)()&&P&&K,Q=(0,eQ.J2)((0,ej.UK)().renderRulers),{isRightPanelCollapsed:J}=(0,n.useContext)(iX.t),{inProductHelpViewType:Z}=(0,tk.A5)(),ee=(0,iU.yO)(),et=(0,iH.T)(),el=(0,iH.q)(),en=(0,n.useMemo)(()=>D?i.FAf.COMMENT:U,[U,D]);return(0,n.useEffect)(()=>{en!==U&&eq.aY()?.set(en)},[en,U]),n.createElement(oa.o,{boundaryKey:"PropertiesPanel",loggedOutDesktopRevampExpAvaialable:F},n.createElement(ol,{key:(0,lg.tw)()??void 0,allSavedPlugins:m,colorFormat:W,commentsPanel:or.L,currentUserOrgId:s,dropdownShown:d,expandedFramePresetType:q,fileVersion:c,folders:O,fonts:u,hasMergedDimensionsAndAutolayout:P,inProductHelpSidePanelWidth:ee,inProductHelpViewType:Z,isCollapsed:J,isLoading:H,isUI3:P,isUIMinimized:el,justChangedMinimizeUIValue:et,library:p,licenseGroups:V,localPlugins:E,modalShown:f,openFile:x,orgById:M,orgUsersByOrgId:B,permissionsState:e,pickerInStyleCreationShown:y,pickerShown:b,propertiesPanelSplitPosition:X,propertiesPanelTab:en,publishedPlugins:h,recordingKey:"propertiesPanel",repos:N,rulersVisible:Q,saveAsState:_,sceneGraph:a,sceneGraphSelection:o,selectedView:v,shouldAnimateLoadingState:t,shouldShowBackgroundGradient:Y,showVoiceWidget:k,shownPanels:j,stylePickerListLayout:S,stylePickerShown:R,stylePreviewShown:T,styleSets:I,teams:$,usedKeyboardShortcuts:C,user:w,userEduGracePeriods:z,userFlags:L,userStateLoaded:A}),n.createElement(on.tZ,null))});var oo=l(715397),os=l(17726),od=l(473935),ou=l(444964),oc=l(188775),om=l(612803),op=l(904617),og=l(776740),oE=l(47003),of=l(759102),ox=l(304756),ob=l(87463),oy=l(18584),oh=l(704410),o_=l(526697);function ov(){let e=(0,k.e)({overlay:N.Dqt,priority:C.N.DEFAULT_MODAL});(0,v.E)(e.uniqueId,"commentThreadMobileAnnouncementClicked",()=>{(0,f.trackEvent)("sidebar_announcement_mobile_app_download_prompt_modal_shown"),e.show({})});let t=(0,n.useCallback)(async()=>{(0,f.trackEvent)("sidebar_announcement_mobile_app_download_prompt_email_me_cta_clicked"),await ox.Ay.post("/api/send_mobile_download_email"),e.complete()},[e]);return n.createElement(oy.h,{isShowing:e.isShowing,modalType:oh.q3.FEATURE_UPDATE,closeButtonStyle:oh.M_.ON_DARK,element:()=>n.createElement(ok,{onEmailClick:t}),trackingContextName:"mobile_comment_announcement",onClickPrimaryCta:e.complete,onClose:e.complete,onManualDismiss:e.complete})}function ok(e){return n.createElement("div",{className:"modal_comment_sidebar_announcement--container--5oh-p"},n.createElement("div",{className:"modal_comment_sidebar_announcement--imageContainer--Vuo-V"},n.createElement("img",{alt:"Background",src:(0,b.ck)("e19f2f58bc09414847ad59ff9228e07032e8842c"),className:"modal_comment_sidebar_announcement--image--lyA61"}),n.createElement("div",{className:"modal_comment_sidebar_announcement--spacer--m02YT"}),n.createElement(o_.T,null)),n.createElement("div",{className:"modal_comment_sidebar_announcement--textContainer--btaTy"},n.createElement("div",{className:"modal_comment_sidebar_announcement--title--eiyLq"},n.createElement(ob.E,{fontSize:24,fontWeight:"semi-bold"},(0,u.t)("rcs.mobile_comment_announcement.title"))),n.createElement("div",{className:"modal_comment_sidebar_announcement--description--Y8AJE"},n.createElement(ob.E,{fontSize:14},(0,u.t)("rcs.mobile_comment_announcement.description")))),n.createElement("div",{className:"modal_comment_sidebar_announcement--buttonsContainer--UTcgc"},n.createElement(lu.$n,{variant:"secondary",onClick:e.onEmailClick,iconPrefix:n.createElement(oE.f,null)},(0,u.t)("rcs.mobile_comment_announcement.email_download_link")),n.createElement(lu.$n,{variant:"primary",onClick:()=>{(0,f.trackEvent)("sidebar_announcement_mobile_app_download_prompt_learn_more_cta_clicked"),e5.Ay.unsafeRedirect("https://help.figma.com/hc/articles/1500007537281-Guide-to-the-Figma-mobile-app#download","_blank")},iconPrefix:n.createElement(of.b,null)},(0,u.t)("rcs.rcs_shared.learn_more"))))}var oS=l(569366),oR=l(811928),oT=l(199617),oI=l(260387),oC=l(881658),ow=l(548467),oL=l(601745),oA=l(197183),oN=l(58136),oO=l(521e3),o$=l(649685),oM=l(483438),oB=l(369644),oz=l(850568),oV=l(957070);let oP=n.memo(function({shouldShowDragAndDropBorder:e}){let t=(0,eI.p8)("isReadOnly"),l=(0,r.d4)(e=>e.progressBarState),p=(0,eI.p8)("loadingEmbeds"),g=(0,eQ.ut)(i.Ez5?.uiState().showCanvasSearch,!1),E=(0,eJ.Lk)(),f=(0,n.useRef)(null),x=(0,r.d4)(e=>e.userFlags),b=!!(0,o.k)().internal_only_debug_tools||!!x.has_cursor_bot_onboarding_v2,y=(0,r.d4)(e=>e.openFile),h=y?y.key:"",_=(0,r.d4)(e=>e.universalInsertModal),v=(0,r.wA)();(0,eH.Gb)(h),(0,eY.W)(),(0,e0.qh)();let k=(0,eX.BI)(),S=(0,eG.e)(),R=(0,eO.ZO)(),T=(0,eO.l7)(),I=(0,eQ.ut)((0,ej.UK)().enableCodegenMcpServer,!1),C=n.createElement(eZ.m,{role:"region","aria-label":(0,u.t)("fullscreen_actions.left_sidebar_label")},T?n.createElement(d.tH,{boundaryKey:"DevModeLeftPanel",fallback:d.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:a.eBU.DEVELOPER_TOOLS}},n.createElement(m.O,null)):n.createElement(ou.m,null));return n.createElement(iV,null,n.createElement(eU.ED,null),n.createElement(oo.sk,null,l.mode!==i.Oin.OFF&&n.createElement("div",{className:oV._q}),n.createElement(t6.pO,{initialFilterState:{currentPage:!1}},p.map(e=>n.createElement(iO._,{key:`loading-embed-${e}`,nodeId:e})),n.createElement(os.qn,null),n.createElement(oO.u,null),g&&n.createElement(og.n,null),(0,o.k)().ce_al_experiments_on&&n.createElement(og.n,null),n.createElement(iN.G,null),n.createElement(iN.b,null),n.createElement(oT.J,null),!T&&!S&&!R&&n.createElement(tQ.b,null),(0,o.k)().dt_mcp_auto_resources&&I&&n.createElement(s.y6,null),n.createElement(os.XI,{commentsDetailContainerRef:f}),n.createElement(oz.Z,null),(0,o.k)().cursor_bot&&b&&n.createElement(om.S,null),n.createElement(od.X,null),n.createElement(iL.J,null),n.createElement(oc.Nz,null),n.createElement("div",{ref:f}),!(0,eW.T)()&&C,!t&&n.createElement(oS.E,null),n.createElement(iA.G,null,T?null:n.createElement(n.Fragment,null,n.createElement(oF,null),!!k?.shouldOptimizeForIpadApp&&n.createElement(oL.K,null),!!k?.shouldOptimizeForIpadApp&&n.createElement(oA.t,null))),(0,o.k)().bake_canvas&&n.createElement(oN.eT,null),e&&n.createElement(oc.X5,null),(0,o.k)().aip_flower_garden&&n.createElement(iC,null)),n.createElement(e1.A,{isFigjamEditor:!1,isDesignEditor:!0,isSlidesEditor:!1,openFile:y}),n.createElement(oR.l,{defaultViewTabsAvailable:!0,defaultViewAssetsTabVisible:!0}),_.showing&&n.createElement(d.tH,{boundaryKey:"FdBrowseResourceModal",onError:()=>{v(c.F.enqueue({message:"Unable to open inserts menu",type:"react-error"}))},fallback:d.H4.NONE_I_KNOW_WHAT_IM_DOING},n.createElement(oC.k,null))),E&&n.createElement(op.K,{className:oV.PA},n.createElement(ow.s,null)))}),oF=n.memo(function(){let e=(0,eI.p8)("topLevelMode"),t=(0,eI.ax)(),l=(0,eI.dH)();return(0,eK.z)({topLevelMode:i.lyf.PREVIEW,eventName:"Preview Mode Selection Changed",teamFilesOnly:!0}),n.useEffect(()=>{t&&e===i.lyf.PREVIEW&&l!==i.NLJ.COMMENTS&&(0,eq.NT)(i.FAf.INSPECT)},[t,e,l]),n.createElement(n.Fragment,null,n.createElement(oi,null),n.createElement(oD,null))}),oD=n.memo(function(){return n.createElement(n.Fragment,null,n.createElement(e2.p,null,n.createElement(tl.NuxOnboardingOverlay,null)),n.createElement(e2.p,{featureFlag:"starting_points_modal"},n.createElement(tV,null)),n.createElement(e2.p,null,n.createElement(eA,null)),n.createElement(e2.p,null,n.createElement(eD,null)),n.createElement(e2.p,null,n.createElement(oI.e,null)),n.createElement(e2.p,null,n.createElement(V,null)),n.createElement(e2.p,null,n.createElement(P.A,null)),n.createElement(e2.p,{featureFlag:"mobile_prompt_sidebar_modal"},n.createElement(ov,null)),n.createElement(e2.p,null,n.createElement(J.S,null)),n.createElement(e2.p,null,n.createElement(tY,null)),n.createElement(e2.p,null,n.createElement(t8,null)),n.createElement(e2.p,null,n.createElement(Q,null)),n.createElement(e2.p,null,n.createElement(tt,null)),n.createElement(e2.p,{featureFlag:"cheddar"},n.createElement(o$.Ab,null)),n.createElement(e2.p,{featureFlag:"bob_template_gen"},n.createElement(oM.E,null)))});function oG(){let[e,t]=(0,n.useState)(!1);return n.createElement(i$.c,{loadedCommentsProvider:!1},n.createElement(oB.v,{setShouldShowDragAndDropBorder:t,isDragTarget:!1},n.createElement(oP,{shouldShowDragAndDropBorder:e})))}}}]);

//# debugId=d0192558-3c9e-5149-bb95-a13768c1b24c

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/c806c444796268d576cc87e80c35e04d40e9a08e/a88a4c5a-6136d09dbb514764.min.js.map